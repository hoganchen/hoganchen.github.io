<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="Python实现__func__, __LINE__, __FILE_\1234567891011import inspectdef print_line_file_func():    caller_frame_record = inspect.stack()[1]    # print(caller_frame_record)    frame = caller_frame_record[">
<meta property="og:type" content="article">
<meta property="og:title" content="Python使用示例">
<meta property="og:url" content="http://yoursite.com/2018/06/11/python-usage-example/index.html">
<meta property="og:site_name" content="Hogan&#39;s Blog">
<meta property="og:description" content="Python实现__func__, __LINE__, __FILE_\1234567891011import inspectdef print_line_file_func():    caller_frame_record = inspect.stack()[1]    # print(caller_frame_record)    frame = caller_frame_record[">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/upload_image/python-usage-example/zip_single_file.png">
<meta property="og:image" content="http://yoursite.com/upload_image/python-usage-example/zip_multiple_file.png">
<meta property="og:image" content="http://yoursite.com/upload_image/python-usage-example/zip_multiple_file_no_structure.png">
<meta property="og:image" content="http://yoursite.com/upload_image/python-usage-example/unzip_all_files.png">
<meta property="og:image" content="http://yoursite.com/upload_image/python-usage-example/unzip_single_file.png">
<meta property="og:image" content="http://yoursite.com/upload_image/python-usage-example/read_zip_file.png">
<meta property="og:image" content="http://yoursite.com/upload_image/python-usage-example/read_zip_file_02.png">
<meta property="og:updated_time" content="2020-06-21T04:16:35.279Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python使用示例">
<meta name="twitter:description" content="Python实现__func__, __LINE__, __FILE_\1234567891011import inspectdef print_line_file_func():    caller_frame_record = inspect.stack()[1]    # print(caller_frame_record)    frame = caller_frame_record[">
<meta name="twitter:image" content="http://yoursite.com/upload_image/python-usage-example/zip_single_file.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/06/11/python-usage-example/"/>





  <title>Python使用示例 | Hogan's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hogan's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/python-usage-example/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hogan Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hogan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Python使用示例</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T16:23:52+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <ol>

<h5 id="Python实现-func-LINE-FILE"><a href="#Python实现-func-LINE-FILE" class="headerlink" title="Python实现__func__, __LINE__, __FILE_\"></a>Python实现__func__, __LINE__, __FILE_\</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import inspect</span><br><span class="line"></span><br><span class="line">def print_line_file_func():</span><br><span class="line">    caller_frame_record = inspect.stack()[1]</span><br><span class="line">    # print(caller_frame_record)</span><br><span class="line">    frame = caller_frame_record[0]</span><br><span class="line">    # print(frame)</span><br><span class="line">-     info = inspect.getframeinfo(frame)</span><br><span class="line">    print(info.filename)                        # __FILE__</span><br><span class="line">    print(info.function)                        # __FUNCTION__</span><br><span class="line">    print(info.lineno)                          # __LINE__</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h5 id="Python操作excel表格"><a href="#Python操作excel表格" class="headerlink" title="Python操作excel表格"></a>Python操作excel表格</h5><p><a href="http://openpyxl.readthedocs.io/en/default/usage.html" target="_blank" rel="noopener">http://openpyxl.readthedocs.io/en/default/usage.html</a><br><a href="https://stackoverflow.com/questions/28691998/is-openpyxl-iter-rows-skipping-last-row" target="_blank" rel="noopener">https://stackoverflow.com/questions/28691998/is-openpyxl-iter-rows-skipping-last-row</a></p>
<h5 id="Python-2和3的区别"><a href="#Python-2和3的区别" class="headerlink" title="Python 2和3的区别"></a>Python 2和3的区别</h5><p><a href="http://blog.jobbole.com/80006/" target="_blank" rel="noopener">http://blog.jobbole.com/80006/</a><br><a href="http://www.techug.com/post/the-difference-of-python2-and-python3.html" target="_blank" rel="noopener">http://www.techug.com/post/the-difference-of-python2-and-python3.html</a><br><a href="https://segmentfault.com/a/1190000000618286" target="_blank" rel="noopener">https://segmentfault.com/a/1190000000618286</a><br><a href="https://www.zhihu.com/question/19698598" target="_blank" rel="noopener">https://www.zhihu.com/question/19698598</a><br><a href="http://www.runoob.com/python/python-2x-3x.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-2x-3x.html</a><br><a href="http://www.cnblogs.com/hanggegege/p/5840005.html" target="_blank" rel="noopener">http://www.cnblogs.com/hanggegege/p/5840005.html</a></p>
<p><a href="https://wizardforcel.gitbooks.io/w3school-python/content/29.html" target="_blank" rel="noopener">https://wizardforcel.gitbooks.io/w3school-python/content/29.html</a><br><a href="https://www.gitbook.com/book/wizardforcel/w3school-python/details" target="_blank" rel="noopener">https://www.gitbook.com/book/wizardforcel/w3school-python/details</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">作者：王猫猫</span><br><span class="line">链接：https://www.zhihu.com/question/19698598/answer/12704353</span><br><span class="line">来源：知乎</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br><span class="line"></span><br><span class="line">&gt;  1. print不再是语句，而是函数，比如原来是 print &apos;abc&apos; 现在是 print(&apos;abc&apos;)但是 python2.6+ 可以使用 from __future__ import print_function 来实现相同功能</span><br><span class="line">&gt;</span><br><span class="line">&gt;  2. 在Python 3中，没有旧式类，只有新式类，也就是说不用再像这样 class Foobar(object): pass 显式地子类化object但是最好还是加上. 主要区别在于 old-style 是 classtype 类型而 new-style 是 type类型</span><br><span class="line">&gt;</span><br><span class="line">&gt;  3. 原来1/2（两个整数相除）结果是0，现在是0.5了python 2.2+ 以上都可以使用 from __future__ import division 实现改特性, 同时注意 // 取代了之前的 / 运算</span><br><span class="line">&gt;</span><br><span class="line">&gt;  4. 新的字符串格式化方法format取代%错误, 从 python2.6+ 开始已经在str和unicode中有该方法, 同时 python3依然支持 % 算符</span><br><span class="line">&gt;</span><br><span class="line">&gt;  5. xrange重命名为range同时更改的还有一系列内置函数及方法, 都返回迭代器对象, 而不是列表或者 元组, 比如 filter, map, dict.items 等</span><br><span class="line">&gt;</span><br><span class="line">&gt;  6. !=取代  &lt;   &gt;  python2 也很少有人用  &lt;  &gt;  所以不算什么修改</span><br><span class="line">&gt;</span><br><span class="line">&gt;  7. long重命名为int不完全对, python3 彻底废弃了 long+int 双整数实现的方法, 统一为 int , 支持高精度整数运算.</span><br><span class="line">&gt;</span><br><span class="line">&gt;  8. except Exception, e变成except (Exception) as e只有 python2.5 及以下版本不支持该语法. python2.6 是支持的. 不算新东西</span><br><span class="line">&gt;</span><br><span class="line">&gt;  9. exec变成函数类似 print() 的变化, 之前是语句.</span><br></pre></td></tr></table></figure></p>
<h5 id="编写python2，python3兼容代码"><a href="#编写python2，python3兼容代码" class="headerlink" title="编写python2，python3兼容代码"></a>编写python2，python3兼容代码</h5><p><a href="http://python-future.org/compatible_idioms.html" target="_blank" rel="noopener">http://python-future.org/compatible_idioms.html</a><br><a href="http://blog.csdn.net/foryouslgme/article/details/52353836" target="_blank" rel="noopener">http://blog.csdn.net/foryouslgme/article/details/52353836</a><br><a href="http://blog.csdn.net/ronnyjiang/article/details/53333538" target="_blank" rel="noopener">http://blog.csdn.net/ronnyjiang/article/details/53333538</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">python commands模块在python3.x被subprocess取代</span><br><span class="line"></span><br><span class="line">subprocess</span><br><span class="line"></span><br><span class="line">可以执行shell命令的相关模块和函数有：</span><br><span class="line"></span><br><span class="line">os.system</span><br><span class="line">os.spawn</span><br><span class="line">os.popen --废弃</span><br><span class="line">popen2.* --废弃</span><br><span class="line">commands.* --废弃，3.x中被移除</span><br><span class="line"></span><br><span class="line">import commands</span><br><span class="line"></span><br><span class="line">result = commands.getoutput(&apos;cmd&apos;)　　　＃</span><br><span class="line">只返回执行的结果, 忽略返回值.</span><br><span class="line"></span><br><span class="line">result = commands.getstatus(&apos;cmd&apos;)</span><br><span class="line">＃返回ls -ld file执行的结果.</span><br><span class="line"></span><br><span class="line">result = commands.getstatusoutput(&apos;cmd&apos;)</span><br><span class="line"></span><br><span class="line">＃</span><br><span class="line">用os.popen()执行命令cmd, 然后返回两个元素的元组(status, result). cmd执行的方式是&#123; cmd ; &#125;2&gt;&amp;1, 这样返回结果里面就会包含标准输出和标准错误.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例子</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; subprocess.getstatusoutput(&apos;pwd&apos;)</span><br><span class="line">(0, &apos;/home/ronny&apos;)</span><br><span class="line">&gt;&gt;&gt; subprocess.getoutput(&apos;pwd&apos;)</span><br><span class="line">&apos;/home/ronny&apos;</span><br><span class="line">&gt;&gt;&gt; subprocess.getstatus(&apos;pwd&apos;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">AttributeError: module &apos;subprocess&apos; has no attribute &apos;getstatus&apos;</span><br><span class="line"></span><br><span class="line">以上执行shell命令的相关的模块和函数的功能均在 subprocess 模块中实现，并提供了更丰富的功能。</span><br><span class="line">(1) call</span><br><span class="line"></span><br><span class="line">执行命令，返回状态码(命令正常执行返回0，报错则返回1)</span><br><span class="line"></span><br><span class="line">ret1=subprocess.call(&quot;ifconfig&quot;)</span><br><span class="line">ret2=subprocess.call(&quot;ipconfig&quot;)　　　　#python3.5不是这样，依然会抛出异常导致无法对ret2赋值</span><br><span class="line">print(ret1)     #0</span><br><span class="line">print(ret2)     #1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ret = subprocess.call([&quot;ls&quot;, &quot;-l&quot;], shell=False)    #shell为False的时候命令必须分开写</span><br><span class="line">ret = subprocess.call(&quot;ls -l&quot;, shell=True)</span><br><span class="line"></span><br><span class="line">(2) check_call</span><br><span class="line"></span><br><span class="line">执行命令，如果执行成功则返回状态码0，否则抛异常</span><br><span class="line"></span><br><span class="line">subprocess.check_call([&quot;ls&quot;, &quot;-l&quot;])</span><br><span class="line">subprocess.check_call(&quot;exit 1&quot;, shell=True)</span><br><span class="line"></span><br><span class="line">(3) check_output</span><br><span class="line"></span><br><span class="line">执行命令，如果执行成功则返回执行结果，否则抛异常</span><br><span class="line"></span><br><span class="line">subprocess.check_output([&quot;echo&quot;, &quot;Hello World!&quot;])</span><br><span class="line">subprocess.check_output(&quot;exit 1&quot;, shell=True)</span><br><span class="line"></span><br><span class="line">(4) subprocess.Popen(...)</span><br><span class="line"></span><br><span class="line">用于执行复杂的系统命令</span><br><span class="line">参数 	注释</span><br><span class="line">args 	shell命令，可以是字符串或者序列类型（如：list，元组）</span><br><span class="line">bufsize 	指定缓冲。0 无缓冲,1 行缓冲,其他 缓冲区大小,负值 系统缓冲</span><br><span class="line">stdin, stdout, stderr 	分别表示程序的标准输入、输出、错误句柄</span><br><span class="line">preexec_fn 	只在Unix平台下有效，用于指定一个可执行对象（callable object），它将在子进程运行之前被调用</span><br><span class="line">close_sfs 	在windows平台下，如果close_fds被设置为True，则新创建的子进程将不会继承父进程的输入、输出、错误管道。所以不能将close_fds设置为True同时重定向子进程的标准输入、输出与错误(stdin, stdout, stderr)。</span><br><span class="line">shell 	同上</span><br><span class="line">cwd 	用于设置子进程的当前目录</span><br><span class="line">env 	用于指定子进程的环境变量。如果env = None，子进程的环境变量将从父进程中继承。</span><br><span class="line">universal_newlines 	不同系统的换行符不同，True -&gt; 同意使用 \n</span><br><span class="line">startupinfo 	只在windows下有效，将被传递给底层的CreateProcess()函数，用于设置子进程的一些属性，如：主窗口的外观，进程的优先级等等</span><br><span class="line">createionflags 	同上</span><br><span class="line"></span><br><span class="line">import subprocess</span><br><span class="line">ret1 = subprocess.Popen([&quot;mkdir&quot;,&quot;t1&quot;])</span><br><span class="line">ret2 = subprocess.Popen(&quot;mkdir t2&quot;, shell=True)</span><br><span class="line"></span><br><span class="line">终端输入的命令分为两种：</span><br><span class="line"></span><br><span class="line">    输入即可得到输出，如：ifconfig</span><br><span class="line">    输入进行某环境，依赖再输入，如：python</span><br><span class="line"></span><br><span class="line">import subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen(&quot;mkdir t3&quot;, shell=True, cwd=&apos;/home/dev&apos;,)     #在cwd目录下执行命令</span><br><span class="line"></span><br><span class="line">import subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen([&quot;python&quot;], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=True)</span><br><span class="line">obj.stdin.write(&quot;print(1)\n&quot;)</span><br><span class="line">obj.stdin.write(&quot;print(2)&quot;)</span><br><span class="line">obj.stdin.close()</span><br><span class="line"></span><br><span class="line">cmd_out = obj.stdout.read()</span><br><span class="line">obj.stdout.close()</span><br><span class="line">cmd_error = obj.stderr.read()</span><br><span class="line">obj.stderr.close()</span><br><span class="line"></span><br><span class="line">print(cmd_out)</span><br><span class="line">print(cmd_error)</span><br><span class="line"></span><br><span class="line">import subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen([&quot;python&quot;], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=True)</span><br><span class="line">obj.stdin.write(&quot;print(1)\n&quot;)</span><br><span class="line">obj.stdin.write(&quot;print(2)&quot;)</span><br><span class="line"></span><br><span class="line">out_error_list = obj.communicate()</span><br><span class="line">print(out_error_list)</span><br><span class="line"></span><br><span class="line">import subprocess</span><br><span class="line"></span><br><span class="line">obj = subprocess.Popen([&quot;python&quot;], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=True)</span><br><span class="line">out_error_list = obj.communicate(&apos;print(&quot;hello&quot;)&apos;)</span><br><span class="line">print(out_error_list)</span><br></pre></td></tr></table></figure></p>
<h5 id="Python的几种取整方式"><a href="#Python的几种取整方式" class="headerlink" title="Python的几种取整方式"></a>Python的几种取整方式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">https://www.2cto.com/kf/201507/422109.html</span><br><span class="line">http://blog.csdn.net/hemingliang1987/article/details/18266967</span><br><span class="line">http://www.cnblogs.com/wkqblog/p/3204267.html</span><br><span class="line">C语言的math.h头文件中有ceil和floor两个函数：</span><br><span class="line">double ceil(double x);</span><br><span class="line">float ceilf(float x);</span><br><span class="line">long double ceill(long double x);</span><br><span class="line"></span><br><span class="line">double floor(double x);</span><br><span class="line">float floorf(float x);</span><br><span class="line">long double floorl(long double x);</span><br><span class="line"></span><br><span class="line">上面一个是把一个浮点数向上取整，下面一个是向下取整。于是当整数除法向上取整的时候就会出现这种情况：</span><br><span class="line">int a = 10, b = 3,  c = 0;</span><br><span class="line">c = (int)ceil((float)a / (float)b);</span><br><span class="line"></span><br><span class="line">进行了几次类型转换最终实现了向上取整。其实不需要那么麻烦，对于两个正整数，实现向上取整只需要：</span><br><span class="line">c = (a + b - 1) / b;</span><br><span class="line"></span><br><span class="line">不需要转换类型，也不需要调用函数，当然这只是对正整数适用。向下取整可以使用强制类型转换。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">类似C语言的向上取整</span><br><span class="line">int a = (x - 1) / y + 1  # C language</span><br><span class="line">int a = (m + n - 1) / n  # C language, 需考虑溢出</span><br><span class="line"></span><br><span class="line">var = int((x - 1) / y) + 1  # Python language</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">向下取整(强制类型转换)</span><br><span class="line">var = int(x)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http://blog.csdn.net/huzq1976/article/details/51581330</span><br><span class="line">math库的使用</span><br><span class="line">1. /是精确除法，//是向下取整除法，%是求模</span><br><span class="line">2. %求模是基于向下取整除法规则的</span><br><span class="line">3. 四舍五入取整round, 向零取整int, 向下和向上取整函数math.floor, math.ceil</span><br><span class="line">4. //和math.floor在CPython中的不同</span><br><span class="line">5. /在python 2 中是向下取整运算</span><br><span class="line">6. C中%是向零取整求模。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http://www.csuldw.com/2015/12/04/2015-12-04-Python-Round/</span><br><span class="line">　　在处理数据的时候，碰到了一个问题，就是取整方式！比如给定一个数值型列表，我需要分别获取它位置为长度的0%,25%,50%,75%,100%处的几个数字。但Python自带的int是向下取整，如果数字长度是5，理论上这五个数字分别对应0%,25%,50%,75%,100%的位置，但使用int，结果却并不是入次。比如当5*0.75时,如果加上int(5*0.75)，就等于3，而我想要的应该是4，显然不是我想要的，所以这里需要用到向上取整方式。因此，顺便总结了一下Python的几种取整方式。</span><br><span class="line">取整方式</span><br><span class="line"></span><br><span class="line">　　下面介绍几种常用的取整方法，包括向下取整、四舍五入、向上取整。</span><br><span class="line">（1）向下取整</span><br><span class="line"></span><br><span class="line">　　向下取整很简单，直接使用int()函数即可，如下代码(Python 2.7.5 IDLE)</span><br><span class="line">&gt;&gt;&gt; a = 3.75</span><br><span class="line">&gt;&gt;&gt; int(a)</span><br><span class="line">3</span><br><span class="line"></span><br><span class="line">（2）四舍五入</span><br><span class="line"></span><br><span class="line">　　第二种就是对数字进行四舍五入，具体的看下面的代码：</span><br><span class="line">&gt;&gt;&gt; a=3.25;b=3.75</span><br><span class="line">&gt;&gt;&gt; round(a);round(b)</span><br><span class="line">3.0</span><br><span class="line">4.0</span><br><span class="line"></span><br><span class="line">（3)向上取整</span><br><span class="line"></span><br><span class="line">　　但三种，就是向上取整，也就是我这次数据处理中需要的，由于之前没在Python中用到过，所以不太熟悉，其实Python的math中就带了向上取整的函数，即ceil方法，专门用于向上取整，实例如下：</span><br><span class="line">&gt;&gt;&gt; import math</span><br><span class="line">&gt;&gt;&gt; math.ceil(3.25)</span><br><span class="line">4.0</span><br><span class="line">&gt;&gt;&gt; math.ceil(3.75)</span><br><span class="line">4.0</span><br><span class="line"></span><br><span class="line">好了，取整方式，大概就是这三种，介绍到此吧！</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http://blog.csdn.net/guizaijianchic/article/details/71191807</span><br><span class="line">#encoding:utf-8</span><br><span class="line">import math</span><br><span class="line"></span><br><span class="line">#向上取整</span><br><span class="line">print &quot;math.ceil---&quot;</span><br><span class="line">print &quot;math.ceil(2.3) =&gt; &quot;, math.ceil(2.3)</span><br><span class="line">print &quot;math.ceil(2.6) =&gt; &quot;, math.ceil(2.6)</span><br><span class="line"></span><br><span class="line">#向下取整</span><br><span class="line">print &quot;\nmath.floor---&quot;</span><br><span class="line">print &quot;math.floor(2.3) =&gt; &quot;, math.floor(2.3)</span><br><span class="line">print &quot;math.floor(2.6) =&gt; &quot;, math.floor(2.6)</span><br><span class="line"></span><br><span class="line">#四舍五入</span><br><span class="line">print &quot;\nround---&quot;</span><br><span class="line">print &quot;round(2.3) =&gt; &quot;, round(2.3)</span><br><span class="line">print &quot;round(2.6) =&gt; &quot;, round(2.6)</span><br><span class="line"></span><br><span class="line">#这三个的返回结果都是浮点型</span><br><span class="line">print &quot;\n\nNOTE:every result is type of float&quot;</span><br><span class="line">print &quot;math.ceil(2) =&gt; &quot;, math.ceil(2)</span><br><span class="line">print &quot;math.floor(2) =&gt; &quot;, math.floor(2)</span><br><span class="line">print &quot;round(2) =&gt; &quot;, round(2)</span><br></pre></td></tr></table></figure>
<h5 id="Python字符串补零"><a href="#Python字符串补零" class="headerlink" title="Python字符串补零"></a>Python字符串补零</h5><p><a href="http://www.runoob.com/python/att-string-zfill.html" target="_blank" rel="noopener">http://www.runoob.com/python/att-string-zfill.html</a><br><a href="http://www.runoob.com/python3/python3-string-zfill.html" target="_blank" rel="noopener">http://www.runoob.com/python3/python3-string-zfill.html</a><br><a href="http://www.sharejs.com/codes/python/8037" target="_blank" rel="noopener">http://www.sharejs.com/codes/python/8037</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">python中有一个zfill方法用来给字符串前面补0，非常有用</span><br><span class="line"></span><br><span class="line">n = &quot;123&quot;</span><br><span class="line">s = n.zfill(5)</span><br><span class="line">assert s == &quot;00123&quot;</span><br><span class="line"></span><br><span class="line">zfill()也可以给负数补0</span><br><span class="line">n = &quot;-123&quot;</span><br><span class="line">s = n.zfill(5)</span><br><span class="line">assert s == &quot;-0123&quot;</span><br><span class="line"></span><br><span class="line">对于纯数字，我们也可以通过格式化的方式来补0</span><br><span class="line">n = 123</span><br><span class="line">s = &quot;%05d&quot; % n</span><br><span class="line">assert s == &quot;00123&quot;</span><br></pre></td></tr></table></figure></p>
<h5 id="python命令行参数"><a href="#python命令行参数" class="headerlink" title="python命令行参数"></a>python命令行参数</h5><p><a href="http://www.runoob.com/python/python-command-line-arguments.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-command-line-arguments.html</a><br><a href="https://www.jianshu.com/p/0361cd8b8fec" target="_blank" rel="noopener">https://www.jianshu.com/p/0361cd8b8fec</a><br><a href="https://www.jianshu.com/p/c2c0447e8fd5" target="_blank" rel="noopener">https://www.jianshu.com/p/c2c0447e8fd5</a><br><a href="http://blog.51cto.com/dragonball/1417916" target="_blank" rel="noopener">http://blog.51cto.com/dragonball/1417916</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line">import sys, getopt</span><br><span class="line"></span><br><span class="line">def main(argv):</span><br><span class="line">   inputfile = &apos;&apos;</span><br><span class="line">   outputfile = &apos;&apos;</span><br><span class="line">   try:</span><br><span class="line">      opts, args = getopt.getopt(argv,&quot;hi:o:&quot;,[&quot;ifile=&quot;,&quot;ofile=&quot;])</span><br><span class="line">   except getopt.GetoptError:</span><br><span class="line">      print &apos;test.py -i &lt;inputfile&gt; -o &lt;outputfile&gt;&apos;</span><br><span class="line">      sys.exit(2)</span><br><span class="line">   for opt, arg in opts:</span><br><span class="line">      if opt == &apos;-h&apos;:</span><br><span class="line">         print &apos;test.py -i &lt;inputfile&gt; -o &lt;outputfile&gt;&apos;</span><br><span class="line">         sys.exit()</span><br><span class="line">      elif opt in (&quot;-i&quot;, &quot;--ifile&quot;):</span><br><span class="line">         inputfile = arg</span><br><span class="line">      elif opt in (&quot;-o&quot;, &quot;--ofile&quot;):</span><br><span class="line">         outputfile = arg</span><br><span class="line">   print &apos;输入的文件为：&apos;, inputfile</span><br><span class="line">   print &apos;输出的文件为：&apos;, outputfile</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">   main(sys.argv[1:])</span><br></pre></td></tr></table></figure></p>
<h5 id="检查变量是否被定义"><a href="#检查变量是否被定义" class="headerlink" title="检查变量是否被定义"></a>检查变量是否被定义</h5><p><a href="https://stackoverflow.com/questions/1592565/determine-if-variable-is-defined-in-python" target="_blank" rel="noopener">https://stackoverflow.com/questions/1592565/determine-if-variable-is-defined-in-python</a><br><a href="https://stackoverflow.com/questions/750298/easy-way-to-check-that-a-variable-is-defined-in-python" target="_blank" rel="noopener">https://stackoverflow.com/questions/750298/easy-way-to-check-that-a-variable-is-defined-in-python</a><br><a href="https://stackoverflow.com/questions/843277/how-do-i-check-if-a-variable-exists" target="_blank" rel="noopener">https://stackoverflow.com/questions/843277/how-do-i-check-if-a-variable-exists</a><br><a href="http://bbs.chinaunix.net/thread-1620204-1-1.html" target="_blank" rel="noopener">http://bbs.chinaunix.net/thread-1620204-1-1.html</a><br><a href="http://www.cnblogs.com/freemao/p/3940580.html" target="_blank" rel="noopener">http://www.cnblogs.com/freemao/p/3940580.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">    a # does a exist in the current namespace</span><br><span class="line">except NameError:</span><br><span class="line">    a = 10 # nope</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; x = 10</span><br><span class="line">&gt;&gt;&gt; &apos;x&apos; in dir()</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; &apos;y&apos; in dir()</span><br><span class="line">False</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="Python的raise函数用法"><a href="#Python的raise函数用法" class="headerlink" title="Python的raise函数用法"></a>Python的raise函数用法</h5><p><a href="http://www.pythondoc.com/pythontutorial3/errors.html" target="_blank" rel="noopener">http://www.pythondoc.com/pythontutorial3/errors.html</a><br><a href="http://blog.csdn.net/mr_jj_lian/article/details/6786052" target="_blank" rel="noopener">http://blog.csdn.net/mr_jj_lian/article/details/6786052</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">抛出异常</span><br><span class="line"></span><br><span class="line">raise 语句允许程序员强制抛出一个指定的异常。例如:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; raise NameError(&apos;HiThere&apos;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">NameError: HiThere</span><br><span class="line"></span><br><span class="line">要抛出的异常由 raise 的唯一参数标识。它必需是一个异常实例或异常类（继承自 Exception 的类）。</span><br><span class="line"></span><br><span class="line">如果你需要明确一个异常是否抛出，但不想处理它，raise 语句可以让你很简单的重新抛出该异常:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; try:</span><br><span class="line">...     raise NameError(&apos;HiThere&apos;)</span><br><span class="line">... except NameError:</span><br><span class="line">...     print(&apos;An exception flew by!&apos;)</span><br><span class="line">...     raise</span><br><span class="line">...</span><br><span class="line">An exception flew by!</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 2, in ?</span><br><span class="line">NameError: HiThere</span><br><span class="line"></span><br><span class="line">8.5. 用户自定义异常</span><br><span class="line"></span><br><span class="line">在程序中可以通过创建新的异常类型来命名自己的异常（Python 类的内容请参见 类 ）。异常类通常应该直接或间接的从 Exception 类派生，例如:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; class MyError(Exception):</span><br><span class="line">...     def __init__(self, value):</span><br><span class="line">...         self.value = value</span><br><span class="line">...     def __str__(self):</span><br><span class="line">...         return repr(self.value)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; try:</span><br><span class="line">...     raise MyError(2*2)</span><br><span class="line">... except MyError as e:</span><br><span class="line">...     print(&apos;My exception occurred, value:&apos;, e.value)</span><br><span class="line">...</span><br><span class="line">My exception occurred, value: 4</span><br><span class="line">&gt;&gt;&gt; raise MyError(&apos;oops!&apos;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in ?</span><br><span class="line">__main__.MyError: &apos;oops!&apos;</span><br><span class="line"></span><br><span class="line">在这个例子中，Exception 默认的 __init__() 被覆盖。新的方式简单的创建 value 属性。这就替换了原来创建 args 属性的方式。</span><br><span class="line"></span><br><span class="line">异常类中可以定义任何其它类中可以定义的东西，但是通常为了保持简单，只在其中加入几个属性信息，以供异常处理句柄提取。如果一个新创建的模块中需要抛出几种不同的错误时，一个通常的作法是为该模块定义一个异常基类，然后针对不同的错误类型派生出对应的异常子类:</span><br><span class="line"></span><br><span class="line">class Error(Exception):</span><br><span class="line">    &quot;&quot;&quot;Base class for exceptions in this module.&quot;&quot;&quot;</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">class InputError(Error):</span><br><span class="line">    &quot;&quot;&quot;Exception raised for errors in the input.</span><br><span class="line"></span><br><span class="line">    Attributes:</span><br><span class="line">        expression -- input expression in which the error occurred</span><br><span class="line">        message -- explanation of the error</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self, expression, message):</span><br><span class="line">        self.expression = expression</span><br><span class="line">        self.message = message</span><br><span class="line"></span><br><span class="line">class TransitionError(Error):</span><br><span class="line">    &quot;&quot;&quot;Raised when an operation attempts a state transition that&apos;s not</span><br><span class="line">    allowed.</span><br><span class="line"></span><br><span class="line">    Attributes:</span><br><span class="line">        previous -- state at beginning of transition</span><br><span class="line">        next -- attempted new state</span><br><span class="line">        message -- explanation of why the specific transition is not allowed</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self, previous, next, message):</span><br><span class="line">        self.previous = previous</span><br><span class="line">        self.next = next</span><br><span class="line">        self.message = message</span><br><span class="line"></span><br><span class="line">与标准异常相似，大多数异常的命名都以 “Error” 结尾。</span><br><span class="line"></span><br><span class="line">很多标准模块中都定义了自己的异常，用以报告在他们所定义的函数中可能发生的错误。关于类的进一步信息请参见 类 一章。</span><br></pre></td></tr></table></figure></p>
<h5 id="Python变量，可变变量"><a href="#Python变量，可变变量" class="headerlink" title="Python变量，可变变量"></a>Python变量，可变变量</h5><p><a href="https://foofish.net/python-variable.html" target="_blank" rel="noopener">https://foofish.net/python-variable.html</a><br><a href="http://www.jianshu.com/p/67db61f013b7" target="_blank" rel="noopener">http://www.jianshu.com/p/67db61f013b7</a><br><a href="http://songlee24.github.io/2014/08/12/python-FAQ-01/" target="_blank" rel="noopener">http://songlee24.github.io/2014/08/12/python-FAQ-01/</a></p>
<p><a href="https://foofish.net/iadd_add.html" target="_blank" rel="noopener">https://foofish.net/iadd_add.html</a><br><a href="https://foofish.net/python-tricks.html" target="_blank" rel="noopener">https://foofish.net/python-tricks.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">Python在heap中分配的对象分为两类：可变对象和不可变对象。</span><br><span class="line"></span><br><span class="line">可变对象：list，dict</span><br><span class="line"></span><br><span class="line">不可变对象：int，float，string，tuple</span><br><span class="line"></span><br><span class="line">在python中一切皆对象，python中的变量是指向对象的引用，当然变量也是对象。可变对象及不可变对象的根本区别就是对象本身是否可变。</span><br><span class="line"></span><br><span class="line">函数的参数传递</span><br><span class="line"></span><br><span class="line">由于python规定参数传递都是传递引用，即传递给函数的是原始变量指向的内存地址。如果修改参数的话，就会改变原始参数，但是python有可变对象和不可变对象；这就使得当传递的参数为可变对象时，函数内部修改参数会影响到原始变量；当传递的参数为不可变对象时，函数内部修改参数不会影响到原始变量。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">https://foofish.net/iadd_add.html</span><br><span class="line"></span><br><span class="line">代码1与代码2中的l2的值是一样的，但是l1的值却不一样，说明 i += x 与 i = i + x 是不等价的，那什么情况下等价，什么情况下不等价呢？</span><br><span class="line"></span><br><span class="line">弄清楚这个问题之前，首选得明白两个概念：可变对象（mutable）与不可变对象（immutable）。在 Python 中任何对象都有的三个通用属性：唯一标识、类型、值。</span><br><span class="line"></span><br><span class="line">唯一标识：用于标识对象的在内存中唯一性，它在对象创建之后就不会再改变，函数 id()可以查看对象的唯一标识</span><br><span class="line"></span><br><span class="line">类型：决定了该对象支持哪些操作，不同类型的对象支持的操作就不一样，比如列表可以有length属性，而整数没有。同样地对象的类型一旦确定了就不会再变，函数 type()可以返回对象的类型信息。</span><br><span class="line"></span><br><span class="line">对象的值与唯一标识不一样，并不是所有的对象的值都是一成不变的，有些对象的值可以通过某些操作发生改变，值可以变化的对象称之为可变对象（mutable），值不能改变的对象称之为不可变对象（immutable）</span><br><span class="line"></span><br><span class="line">_add_ 和 _iadd_ 的区别</span><br><span class="line"></span><br><span class="line">    _add_ 方法接收两个参数，返回它们的和，两个参数的值均不会改变。</span><br><span class="line">    _iadd_ 方法同样接收两个参数，但它是属于 in-place 操作，就是说它会改变第一个参数的值，因为这需要对象是可变的，所以对于不可变对象没有__iadd__方法。</span><br><span class="line">下列代码中，代码1中的 += 操作调用的是__iadd__方法，他会原地修改l2指向的那个对象本身的值，而代码2中的 + 操作调用的是 _add_ 方法，该方法会返回一个新的对象，原来的对象保持不变，l1还是指向原来的对象，而l2已经指向一个新的对象。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; l1 = range(3)</span><br><span class="line">&gt;&gt;&gt; l2 = l1</span><br><span class="line">&gt;&gt;&gt; l1</span><br><span class="line">[0, 1, 2]</span><br><span class="line">&gt;&gt;&gt; l2</span><br><span class="line">[0, 1, 2]</span><br><span class="line">&gt;&gt;&gt; l2 += [3]</span><br><span class="line">&gt;&gt;&gt; l1</span><br><span class="line">[0, 1, 2, 3]</span><br><span class="line">&gt;&gt;&gt; l2</span><br><span class="line">[0, 1, 2, 3]</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; l1 = range(3)</span><br><span class="line">&gt;&gt;&gt; l2 = l1</span><br><span class="line">&gt;&gt;&gt; l1</span><br><span class="line">[0, 1, 2]</span><br><span class="line">&gt;&gt;&gt; l2</span><br><span class="line">[0, 1, 2]</span><br><span class="line">&gt;&gt;&gt; l2 = l2 + [3]</span><br><span class="line">&gt;&gt;&gt; l1</span><br><span class="line">[0, 1, 2]</span><br><span class="line">&gt;&gt;&gt; l2</span><br><span class="line">[0, 1, 2, 3]</span><br><span class="line">&gt;&gt;&gt; id(l1)</span><br><span class="line">139956819091328</span><br><span class="line">&gt;&gt;&gt; id(l2)</span><br><span class="line">139956819169152</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; tup = (1, 2, 3)</span><br><span class="line">&gt;&gt;&gt; tup1 = tuple(tup)</span><br><span class="line">&gt;&gt;&gt; id(tup)</span><br><span class="line">139956819114896</span><br><span class="line">&gt;&gt;&gt; id(tup1)</span><br><span class="line">139956819114896</span><br><span class="line">&gt;&gt;&gt; tup1 = tup[:]</span><br><span class="line">&gt;&gt;&gt; id(tup)</span><br><span class="line">139956819114896</span><br><span class="line">&gt;&gt;&gt; id(tup1)</span><br><span class="line">139956819114896</span><br></pre></td></tr></table></figure></p>
<h5 id="Python垃圾回收"><a href="#Python垃圾回收" class="headerlink" title="Python垃圾回收"></a>Python垃圾回收</h5><p><a href="http://www.wklken.me/posts/2015/09/29/python-source-gc.html#biao-ji-qing-chu_1" target="_blank" rel="noopener">http://www.wklken.me/posts/2015/09/29/python-source-gc.html#biao-ji-qing-chu_1</a><br><a href="http://python.jobbole.com/82061/" target="_blank" rel="noopener">http://python.jobbole.com/82061/</a><br><a href="https://github.com/Hipponensis/Notes/blob/master/%E5%85%B3%E4%BA%8EPython%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.md" target="_blank" rel="noopener">https://github.com/Hipponensis/Notes/blob/master/%E5%85%B3%E4%BA%8EPython%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.md</a><br><a href="https://foofish.net/python-gc.html" target="_blank" rel="noopener">https://foofish.net/python-gc.html</a><br><a href="http://hbprotoss.github.io/posts/pythonla-ji-hui-shou-ji-zhi.html" target="_blank" rel="noopener">http://hbprotoss.github.io/posts/pythonla-ji-hui-shou-ji-zhi.html</a></p>
<p><a href="http://www.jianshu.com/p/1e375fb40506" target="_blank" rel="noopener">http://www.jianshu.com/p/1e375fb40506</a><br><a href="https://my.oschina.net/hebianxizao/blog/57367?fromerr=KJozamtm" target="_blank" rel="noopener">https://my.oschina.net/hebianxizao/blog/57367?fromerr=KJozamtm</a><br><a href="http://www.cnblogs.com/Xjng/p/5128269.html" target="_blank" rel="noopener">http://www.cnblogs.com/Xjng/p/5128269.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">Python中的垃圾回收是以引用计数为主，分代收集为辅。引用计数的缺陷是循环引用的问题。</span><br><span class="line">在Python中，如果一个对象的引用数为0，Python虚拟机就会回收这个对象的内存。</span><br><span class="line">python里也同java一样采用了垃圾收集机制，不过不一样的是，python采用的是引用计数机制为主，标记-清除和分代收集两种机制为辅的策略。</span><br><span class="line">    引用计数机制：</span><br><span class="line">    python里每一个东西都是对象，它们的核心就是一个结构体：PyObject</span><br><span class="line">    PyObject是每个对象必有的内容，其中ob_refcnt就是做为引用计数。当一个对象有新的引用时，它的ob_refcnt就会增加，当引用它的对象被删除，它的ob_refcnt就会减少</span><br><span class="line">    引用计数为0时，该对象生命就结束了。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python的GC模块主要运用了“引用计数”（reference counting）来跟踪和回收垃圾。在引用计数的基础上，还可以通过“标记-清除”（mark and sweep）解决容器对象可能产生的循环引用的问题。通过“分代回收”（generation collection）以空间换取时间来进一步提高垃圾回收的效率。</span><br><span class="line"></span><br><span class="line">一、引用计数</span><br><span class="line"></span><br><span class="line">在Python中，大多数对象的生命周期都是通过对象的引用计数来管理的。从广义上来讲，引用计数也是一种垃圾收集机制，而且也是一种最直观，最简单的垃圾收集技术。</span><br><span class="line"></span><br><span class="line">原理：当一个对象的引用被创建或者复制时，对象的引用计数加1；当一个对象的引用被销毁时，对象的引用计数减1；当对象的引用计数减少为0时，就意味着对象已经没有被任何人使用了，可以将其所占用的内存释放了。</span><br><span class="line"></span><br><span class="line">虽然引用计数必须在每次分配和释放内存的时候加入管理引用计数的动作，然而与其他主流的垃圾收集技术相比，引用计数有一个最大的有点，即“实时性”，任何内存，一旦没有指向它的引用，就会立即被回收。而其他的垃圾收集计数必须在某种特殊条件下（比如内存分配失败）才能进行无效内存的回收。</span><br><span class="line"></span><br><span class="line">引用计数机制执行效率问题：引用计数机制所带来的维护引用计数的额外操作与Python运行中所进行的内存分配和释放，引用赋值的次数是成正比的。而这点相比其他主流的垃圾回收机制，比如“标记-清除”，“停止-复制”，是一个弱点，因为这些技术所带来的额外操作基本上只是与待回收的内存数量有关。</span><br><span class="line"></span><br><span class="line">如果说执行效率还仅仅是引用计数机制的一个软肋的话，那么很不幸，引用计数机制还存在着一个致命的弱点，正是由于这个弱点，使得侠义的垃圾收集从来没有将引用计数包含在内，能引发出这个致命的弱点就是循环引用（也称交叉引用）。</span><br><span class="line"></span><br><span class="line">二、标记-清除</span><br><span class="line"></span><br><span class="line">“标记-清除”是为了解决循环引用的问题。可以包含其他对象引用的容器对象（比如：list，set，dict，class，instance）都可能产生循环引用。</span><br><span class="line"></span><br><span class="line">我们必须承认一个事实，如果两个对象的引用计数都为1，但是仅仅存在他们之间的循环引用，那么这两个对象都是需要被回收的，也就是说，它们的引用计数虽然表现为非0，但实际上有效的引用计数为0。我们必须先将循环引用摘掉，那么这两个对象的有效计数就现身了。假设两个对象为A、B，我们从A出发，因为它有一个对B的引用，则将B的引用计数减1；然后顺着引用达到B，因为B有一个对A的引用，同样将A的引用减1，这样，就完成了循环引用对象间环摘除。</span><br><span class="line"></span><br><span class="line">但是这样就有一个问题，假设对象A有一个对象引用C，而C没有引用A，如果将C计数引用减1，而最后A并没有被回收，显然，我们错误的将C的引用计数减1，这将导致在未来的某个时刻出现一个对C的悬空引用。这就要求我们必须在A没有被删除的情况下复原C的引用计数，如果采用这样的方案，那么维护引用计数的复杂度将成倍增加。</span><br><span class="line"></span><br><span class="line">原理：“标记-清除”采用了更好的做法，我们并不改动真实的引用计数，而是将集合中对象的引用计数复制一份副本，改动该对象引用的副本。对于副本做任何的改动，都不会影响到对象生命走起的维护。</span><br><span class="line"></span><br><span class="line">这个计数副本的唯一作用是寻找root object集合（该集合中的对象是不能被回收的）。当成功寻找到root object集合之后，首先将现在的内存链表一分为二，一条链表中维护root object集合，成为root链表，而另外一条链表中维护剩下的对象，成为unreachable链表。之所以要剖成两个链表，是基于这样的一种考虑：现在的unreachable可能存在被root链表中的对象，直接或间接引用的对象，这些对象是不能被回收的，一旦在标记的过程中，发现这样的对象，就将其从unreachable链表中移到root链表中；当完成标记后，unreachable链表中剩下的所有对象就是名副其实的垃圾对象了，接下来的垃圾回收只需限制在unreachable链表中即可。</span><br><span class="line"></span><br><span class="line">三、分代回收</span><br><span class="line"></span><br><span class="line">背景：分代的垃圾收集技术是在上个世纪80年代初发展起来的一种垃圾收集机制，一系列的研究表明：无论使用何种语言开发，无论开发的是何种类型，何种规模的程序，都存在这样一点相同之处。即：一定比例的内存块的生存周期都比较短，通常是几百万条机器指令的时间，而剩下的内存块，起生存周期比较长，甚至会从程序开始一直持续到程序结束。</span><br><span class="line"></span><br><span class="line">从前面“标记-清除”这样的垃圾收集机制来看，这种垃圾收集机制所带来的额外操作实际上与系统中总的内存块的数量是相关的，当需要回收的内存块越多时，垃圾检测带来的额外操作就越多，而垃圾回收带来的额外操作就越少；反之，当需回收的内存块越少时，垃圾检测就将比垃圾回收带来更少的额外操作。为了提高垃圾收集的效率，采用“空间换时间的策略”。</span><br><span class="line"></span><br><span class="line">原理：将系统中的所有内存块根据其存活时间划分为不同的集合，每一个集合就成为一个“代”，垃圾收集的频率随着“代”的存活时间的增大而减小。也就是说，活得越长的对象，就越不可能是垃圾，就应该减少对它的垃圾收集频率。那么如何来衡量这个存活时间：通常是利用几次垃圾收集动作来衡量，如果一个对象经过的垃圾收集次数越多，可以得出：该对象存活时间就越长。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; import sys</span><br><span class="line">&gt;&gt;&gt; sys.getrefcount(1)</span><br><span class="line">605</span><br><span class="line">&gt;&gt;&gt; a = [1, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; sys.getrefcount(a)</span><br><span class="line">2</span><br><span class="line">&gt;&gt;&gt; b = a</span><br><span class="line">&gt;&gt;&gt; sys.getrefcount(a)</span><br><span class="line">3</span><br><span class="line">&gt;&gt;&gt; sys.getrefcount(b)</span><br><span class="line">3</span><br><span class="line">&gt;&gt;&gt; b = 123456</span><br><span class="line">&gt;&gt;&gt; sys.getrefcount(b)</span><br><span class="line">2</span><br><span class="line">&gt;&gt;&gt; sys.getrefcount(a)</span><br><span class="line">2</span><br></pre></td></tr></table></figure></p>
<h5 id="函数的参数传递方式"><a href="#函数的参数传递方式" class="headerlink" title="函数的参数传递方式"></a>函数的参数传递方式</h5><p><a href="https://foofish.net/python-function-args.html" target="_blank" rel="noopener">https://foofish.net/python-function-args.html</a><br><a href="http://dantangfan.github.io/2015/05/11/python-arguments.html" target="_blank" rel="noopener">http://dantangfan.github.io/2015/05/11/python-arguments.html</a><br><a href="https://www.zhihu.com/question/20591688" target="_blank" rel="noopener">https://www.zhihu.com/question/20591688</a><br><a href="http://winterttr.me/2015/10/24/python-passing-arguments-as-value-or-reference/" target="_blank" rel="noopener">http://winterttr.me/2015/10/24/python-passing-arguments-as-value-or-reference/</a><br><a href="http://songlee24.github.io/2014/08/12/python-FAQ-01/" target="_blank" rel="noopener">http://songlee24.github.io/2014/08/12/python-FAQ-01/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Python语言中，万物皆对象，而对象分可改变对象和不可改变对象，也就是说传参即是传对象，如果参数是不可改变对象，赋值则是重新赋予了一个新的对象，而参数是可改变对象，则对对象的操作是直接作用于对象本身。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; summary_info = &#123;&#125;</span><br><span class="line">&gt;&gt;&gt; summary_info[phone_name] = &#123;&apos;suite_name&apos;: phone_name, &apos;running_time&apos;: 0,</span><br><span class="line">...                                                 &apos;total_tests&apos;: 0, &apos;pass&apos;: 0, &apos;failure&apos;: 0, &apos;error&apos;: 0, &apos;skip&apos;: 0&#125;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; id(phone_name)</span><br><span class="line">139975784995896</span><br><span class="line">&gt;&gt;&gt; id(phone_name).hex()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">AttributeError: &apos;int&apos; object has no attribute &apos;hex&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(phone_name))</span><br><span class="line">&apos;0x7f4ea6f11c38&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(summary_info))</span><br><span class="line">&apos;0x7f4ea8b762d0&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(summary_info[phone_name]))</span><br><span class="line">&apos;0x7f4ea8b76318&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(summary_info[phone_name][&apos;pass&apos;]))</span><br><span class="line">&apos;0x7f4ea8a069a0&apos;</span><br><span class="line">&gt;&gt;&gt; device_info = summary_info.get(phone_name)</span><br><span class="line">&gt;&gt;&gt; hex(id(device_info))</span><br><span class="line">&apos;0x7f4ea8b76318&apos;</span><br><span class="line">&gt;&gt;&gt; device_info[&apos;pass&apos;] = 10</span><br><span class="line">&gt;&gt;&gt; summary_info</span><br><span class="line">&#123;&apos;xiaomi&apos;: &#123;&apos;suite_name&apos;: &apos;xiaomi&apos;, &apos;running_time&apos;: 0, &apos;total_tests&apos;: 0, &apos;pass&apos;: 10, &apos;failure&apos;: 0, &apos;error&apos;: 0, &apos;skip&apos;: 0&#125;&#125;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="列表复制-深层赋值只有copy-deepcopy能实现，仔细分析5种复制方法比较"><a href="#列表复制-深层赋值只有copy-deepcopy能实现，仔细分析5种复制方法比较" class="headerlink" title="列表复制(深层赋值只有copy.deepcopy能实现，仔细分析5种复制方法比较)"></a>列表复制(深层赋值只有copy.deepcopy能实现，仔细分析5种复制方法比较)</h5><p><a href="http://www.cnblogs.com/ifantastic/p/3811145.html" target="_blank" rel="noopener">http://www.cnblogs.com/ifantastic/p/3811145.html</a><br><a href="http://henry.precheur.org/python/copy_list" target="_blank" rel="noopener">http://henry.precheur.org/python/copy_list</a><br><a href="https://code.i-harness.com/zh-CN/q/27de42" target="_blank" rel="noopener">https://code.i-harness.com/zh-CN/q/27de42</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">附：五种复制方法的比较(前四种只满足简单列表的复制，即浅拷贝)</span><br><span class="line">你可以使用另一种拷贝方式,给定一个列表L,无论是完整切片L[:]或者列表解析[x for x in L],都会获得L的浅拷贝,试试L+[],L*1...但是上面两种方法都会使人迷惑,使用list(L)最清晰和快速,当然,由于历史原因,你可能会经常看到L[:]的写法.</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; import copy</span><br><span class="line">&gt;&gt;&gt; a = [[10], 20]</span><br><span class="line">&gt;&gt;&gt; b = a[:]</span><br><span class="line">&gt;&gt;&gt; c = list(a)</span><br><span class="line">&gt;&gt;&gt; d = a * 1</span><br><span class="line">&gt;&gt;&gt; e = copy.copy(a)</span><br><span class="line">&gt;&gt;&gt; f = copy.deepcopy(a)</span><br><span class="line">&gt;&gt;&gt; a.append(21)</span><br><span class="line">&gt;&gt;&gt; a[0].append(11)</span><br><span class="line">&gt;&gt;&gt; print id(a), a</span><br><span class="line">30553152 [[10, 11], 20, 21]</span><br><span class="line">&gt;&gt;&gt; print id(b), b</span><br><span class="line">44969816 [[10, 11], 20]</span><br><span class="line">&gt;&gt;&gt; print id(c), c</span><br><span class="line">44855664 [[10, 11], 20]</span><br><span class="line">&gt;&gt;&gt; print id(d), d</span><br><span class="line">44971832 [[10, 11], 20]</span><br><span class="line">&gt;&gt;&gt; print id(e), e</span><br><span class="line">44833088 [[10, 11], 20]</span><br><span class="line">&gt;&gt;&gt; print id(f), f</span><br><span class="line">44834648 [[10], 20]</span><br></pre></td></tr></table></figure></p>
<h5 id="Python对象的浅拷贝和深拷贝"><a href="#Python对象的浅拷贝和深拷贝" class="headerlink" title="Python对象的浅拷贝和深拷贝"></a>Python对象的浅拷贝和深拷贝</h5><p><a href="http://www.cnblogs.com/wilber2013/p/4645353.html" target="_blank" rel="noopener">http://www.cnblogs.com/wilber2013/p/4645353.html</a><br><a href="http://www.runoob.com/python/att-dictionary-copy.html" target="_blank" rel="noopener">http://www.runoob.com/python/att-dictionary-copy.html</a><br><a href="http://www.runoob.com/w3cnote/python-understanding-dict-copy-shallow-or-deep.html" target="_blank" rel="noopener">http://www.runoob.com/w3cnote/python-understanding-dict-copy-shallow-or-deep.html</a><br><a href="http://python.jobbole.com/82294/" target="_blank" rel="noopener">http://python.jobbole.com/82294/</a><br><a href="https://code.i-harness.com/zh-CN/q/27de42" target="_blank" rel="noopener">https://code.i-harness.com/zh-CN/q/27de42</a></p>
<p><a href="http://songlee24.github.io/2014/08/12/python-FAQ-01/" target="_blank" rel="noopener">http://songlee24.github.io/2014/08/12/python-FAQ-01/</a><br><a href="https://songlee24.github.io/2014/08/15/python-FAQ-02/" target="_blank" rel="noopener">https://songlee24.github.io/2014/08/15/python-FAQ-02/</a></p>
<p><a href="http://www.jianshu.com/p/efa9dd51f5cc" target="_blank" rel="noopener">http://www.jianshu.com/p/efa9dd51f5cc</a><br><a href="http://wecatch.me/blog/2016/06/18/python-copy-deepcopy/" target="_blank" rel="noopener">http://wecatch.me/blog/2016/06/18/python-copy-deepcopy/</a><br><a href="http://www.cnblogs.com/fendou-999/p/3535118.html" target="_blank" rel="noopener">http://www.cnblogs.com/fendou-999/p/3535118.html</a><br><a href="http://blog.csdn.net/sharkw/article/details/1934090" target="_blank" rel="noopener">http://blog.csdn.net/sharkw/article/details/1934090</a></p>
<p>深拷贝代码分析<br><a href="https://juejin.im/entry/5927e2300ce463006b065eb0" target="_blank" rel="noopener">https://juejin.im/entry/5927e2300ce463006b065eb0</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">python中的深拷贝和浅拷贝和java里面的概念是一样的，所谓浅拷贝就是对引用的拷贝，所谓深拷贝就是对对象的资源的拷贝。</span><br><span class="line">首先，对赋值操作我们要有以下认识：</span><br><span class="line"></span><br><span class="line">    赋值是将一个对象的地址赋值给一个变量，让变量指向该地址（ 旧瓶装旧酒 ）。</span><br><span class="line">    修改不可变对象（str、tuple）需要开辟新的空间</span><br><span class="line">    修改可变对象（list等）不需要开辟新的空间</span><br><span class="line"></span><br><span class="line">    浅拷贝仅仅复制了容器中元素的地址</span><br><span class="line"></span><br><span class="line">这里可以看出，未修改前，a和b中元素的地址都是相同的，不可变的hello</span><br><span class="line">和可变的list地址都一样，说明浅拷贝知识将容器内的元素的地址复制了一份。这可以通过修改后，b中字符串没改变，但是list元素随着a相应改变得到验证。</span><br><span class="line"></span><br><span class="line">    浅拷贝是在另一块地址中创建一个新的变量或容器，但是容器内的元素的地址均是源对象的元素的地址的拷贝。也就是说新的容器中指向了旧的元素（ 新瓶装旧酒 ）。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">深拷贝，完全拷贝了一个副本，容器内部元素地址都不一样</span><br><span class="line">这里可以看出，深拷贝后，a和b的地址以及a和b中的元素地址均不同，这是完全拷贝的一个副本，修改a后，发现b没有发生任何改变，因为b是一个完全的副本，元素地址与a均不同，a修改不影响b。</span><br><span class="line"></span><br><span class="line">    深拷贝是在另一块地址中创建一个新的变量或容器，同时容器内的元素的地址也是新开辟的，仅仅是值相同而已，是完全的副本。也就是说（ 新瓶装新酒 ）。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">总结一下，当我们使用下面的操作的时候，会产生浅拷贝的效果：</span><br><span class="line"></span><br><span class="line">    使用切片[:]操作</span><br><span class="line">    使用工厂函数（如list/dir/set）</span><br><span class="line">    使用copy模块中的copy()函数</span><br></pre></td></tr></table></figure></p>
<h5 id="Python进制转换"><a href="#Python进制转换" class="headerlink" title="Python进制转换"></a>Python进制转换</h5><p><a href="http://www.runoob.com/python3/python3-conversion-binary-octal-hexadecimal.html" target="_blank" rel="noopener">http://www.runoob.com/python3/python3-conversion-binary-octal-hexadecimal.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">以下代码用于实现十进制转二进制、八进制、十六进制：</span><br><span class="line"></span><br><span class="line"># -*- coding: UTF-8 -*-</span><br><span class="line"></span><br><span class="line"># Filename : test.py</span><br><span class="line"># author by : www.runoob.com</span><br><span class="line"></span><br><span class="line"># 获取用户输入十进制数</span><br><span class="line">dec = int(input(&quot;输入数字：&quot;))</span><br><span class="line"></span><br><span class="line">print(&quot;十进制数为：&quot;, dec)</span><br><span class="line">print(&quot;转换为二进制为：&quot;, bin(dec))</span><br><span class="line">print(&quot;转换为八进制为：&quot;, oct(dec))</span><br><span class="line">print(&quot;转换为十六进制为：&quot;, hex(dec))</span><br></pre></td></tr></table></figure></p>
<h5 id="默认参数的坑"><a href="#默认参数的坑" class="headerlink" title="默认参数的坑"></a>默认参数的坑</h5><p><a href="https://foofish.net/python-function-args.html" target="_blank" rel="noopener">https://foofish.net/python-function-args.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">def bad_append(new_item, a_list=[]):</span><br><span class="line">    a_list.append(new_item)</span><br><span class="line">    return a_list</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; print add_end(&apos;one&apos;)</span><br><span class="line">[&apos;one&apos;]</span><br><span class="line">&gt;&gt;&gt; print bad_append(&apos;one&apos;)</span><br><span class="line">[&apos;one&apos;, &apos;one&apos;]</span><br><span class="line"></span><br><span class="line">上述错误在于，第一次调用a_list已经绑定了一个对象[]，第二次调用则是在这个空的列表上继续append</span><br><span class="line">这段代码是初学者最容易犯的错误，用可变(mutable)对象作为参数的默认值。函数定义好之后，默认参数 a_list 就会指向（绑定）到一个空列表对象，每次调用函数时，都是对同一个对象进行 append 操作。因此这样写就会有潜在的bug，同样的调用方式返回了不一样的结果。</span><br><span class="line"></span><br><span class="line">def good_append(new_item, a_list=None):</span><br><span class="line">    if a_list is None:</span><br><span class="line">        a_list = []</span><br><span class="line">    a_list.append(new_item)</span><br><span class="line">    return a_list</span><br><span class="line"></span><br><span class="line">即默认参宿不可以是可变对象，可变对象作为默认参数有潜在的风险</span><br></pre></td></tr></table></figure></p>
<h5 id="静态类和静态函数的区别"><a href="#静态类和静态函数的区别" class="headerlink" title="静态类和静态函数的区别"></a>静态类和静态函数的区别</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">IND = &apos;ON&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Kls(object):</span><br><span class="line">    g_data = 10</span><br><span class="line"></span><br><span class="line">    def __init__(self, data):</span><br><span class="line">        self.db = None</span><br><span class="line">        self.data = data</span><br><span class="line">        Kls.g_data = 20</span><br><span class="line"></span><br><span class="line">    @staticmethod</span><br><span class="line">    def check_ind():</span><br><span class="line">        print(&quot;IND = %s\n&quot; % IND)</span><br><span class="line">        print(&quot;Kls.g_data = %s\n&quot; % Kls.g_data)</span><br><span class="line"></span><br><span class="line">        Kls.g_data += 1</span><br><span class="line">        print_line_file_func()</span><br><span class="line">        return IND == &apos;ON&apos;</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def do_reset(cls):</span><br><span class="line">        if cls.check_ind():</span><br><span class="line">            print(&apos;Reset done for:&apos;, cls.g_data)</span><br><span class="line"></span><br><span class="line">        cls.g_data += 1</span><br><span class="line"></span><br><span class="line">    def set_db(self):</span><br><span class="line">        if self.check_ind():</span><br><span class="line">            self.db = &apos;New db connection&apos;</span><br><span class="line">        print(&apos;DB connection made for: &apos;, self.data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ik1 = Kls(12)</span><br><span class="line">ik1.check_ind()</span><br><span class="line">ik1.do_reset()</span><br><span class="line">ik1.set_db()</span><br><span class="line">Kls.check_ind()</span><br><span class="line">Kls.do_reset()</span><br><span class="line">ik1.do_reset()</span><br><span class="line">ik1.set_db()</span><br></pre></td></tr></table></figure>
<h5 id="Python类成员方法，静态方法和静态类的区别"><a href="#Python类成员方法，静态方法和静态类的区别" class="headerlink" title="Python类成员方法，静态方法和静态类的区别"></a>Python类成员方法，静态方法和静态类的区别</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">IND = &apos;ON&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Kls(object):</span><br><span class="line">    # this global variable also can be accessed in instance object</span><br><span class="line">    g_data = 10</span><br><span class="line"></span><br><span class="line">    def __init__(self, data):</span><br><span class="line">        self.db = None</span><br><span class="line">        self.data = data</span><br><span class="line">        # modified the global variable g_data to 20</span><br><span class="line">        # Kls.g_data = 20</span><br><span class="line"></span><br><span class="line">    def self_func(self):</span><br><span class="line">        print(&quot;call private_func&quot;, self.data)</span><br><span class="line">        print(&quot;Kls.g_data = &quot;, Kls.g_data)</span><br><span class="line"></span><br><span class="line">    @staticmethod</span><br><span class="line">    def check_ind():</span><br><span class="line">        print(&quot;IND = %s\n&quot; % IND)</span><br><span class="line">        print(&quot;Kls.g_data = %s\n&quot; % Kls.g_data)</span><br><span class="line"></span><br><span class="line">        Kls.g_data += 1</span><br><span class="line">        print_line_file_func()</span><br><span class="line">        return IND == &apos;ON&apos;</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def do_reset(cls):</span><br><span class="line">        cls_inst = cls(10)</span><br><span class="line">        cls_inst.self_func()</span><br><span class="line">        cls.check_ind()</span><br><span class="line">        if cls_inst.check_ind():</span><br><span class="line">            print(&apos;Reset done for:&apos;, cls_inst.g_data)</span><br><span class="line">            print(&apos;Reset done for:&apos;, cls.g_data)</span><br><span class="line"></span><br><span class="line">        cls.g_data += 1</span><br><span class="line"></span><br><span class="line">    def set_db(self):</span><br><span class="line">    	Kls.do_reset()</span><br><span class="line">        if self.check_ind():</span><br><span class="line">            self.db = &apos;New db connection&apos;</span><br><span class="line">        print(&apos;DB connection made for: &apos;, self.data)</span><br><span class="line">        print(Kls.g_data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Kls.check_ind()</span><br><span class="line">Kls.do_reset()</span><br><span class="line">ik1 = Kls(12)</span><br><span class="line">ik1.check_ind()</span><br><span class="line">ik1.do_reset()</span><br><span class="line">ik1.set_db()</span><br><span class="line">Kls.check_ind()</span><br><span class="line">Kls.do_reset()</span><br><span class="line">ik1.do_reset()</span><br><span class="line">ik1.set_db()</span><br><span class="line"></span><br><span class="line">备注：</span><br><span class="line">1. 类变量g_data(Class Variable)是共享的(Shared)——它们可以被属于该类的所有实例访问。该类变量只拥有一个副本,当任何一个对象对类变量作出改变时,发生的变动将在其它所有实例中都会得到体现。如果需要在成员函数中访问类变量，需通过classname.classvariable方式访问，如示例中的Kls.g_data</span><br><span class="line">2. 成员变量和成员方法不能被静态方法访问，但是成员函数可以访问静态方法和静态类。</span><br><span class="line">3. 静态类需要访问成员函数，需要先实例化，然后再访问</span><br><span class="line">4. 静态方法可以互相访问，静态方法也可以访问静态类</span><br><span class="line"></span><br><span class="line">参考：</span><br><span class="line">http://pythoncentral.io/difference-between-staticmethod-and-classmethod-in-python/</span><br><span class="line">https://www.zhihu.com/question/20021164</span><br><span class="line">http://blog.csdn.net/caroline_wendy/article/details/23383995</span><br><span class="line">http://www.jianshu.com/p/212b6fdb2c50</span><br></pre></td></tr></table></figure>
<h5 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h5><p><a href="http://www.cnblogs.com/huxi/archive/2010/07/04/1771073.html" target="_blank" rel="noopener">http://www.cnblogs.com/huxi/archive/2010/07/04/1771073.html</a><br><a href="https://oncemore2020.github.io/blog/python-re/" target="_blank" rel="noopener">https://oncemore2020.github.io/blog/python-re/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">re.compile(strPattern[, flag]):</span><br><span class="line"></span><br><span class="line">这个方法是Pattern类的工厂方法，用于将字符串形式的正则表达式编译为Pattern对象。 第二个参数flag是匹配模式，取值可以使用按位或运算符&apos;|&apos;表示同时生效，比如re.I | re.M。另外，你也可以在regex字符串中指定模式，比如re.compile(&apos;pattern&apos;, re.I | re.M)与re.compile(&apos;(?im)pattern&apos;)是等价的。</span><br><span class="line">可选值有：</span><br><span class="line"></span><br><span class="line">    re.I(re.IGNORECASE): 忽略大小写（括号内是完整写法，下同）</span><br><span class="line">    M(MULTILINE): 多行模式，改变&apos;^&apos;和&apos;$&apos;的行为（参见上图）</span><br><span class="line">    S(DOTALL): 点任意匹配模式，改变&apos;.&apos;的行为</span><br><span class="line">    L(LOCALE): 使预定字符类 \w \W \b \B \s \S 取决于当前区域设定</span><br><span class="line">    U(UNICODE): 使预定字符类 \w \W \b \B \s \S \d \D 取决于unicode定义的字符属性</span><br><span class="line">    X(VERBOSE): 详细模式。这个模式下正则表达式可以是多行，忽略空白字符，并可以加入注释。以下两个正则表达式是等价的：</span><br><span class="line"></span><br><span class="line">a = re.compile(r&quot;&quot;&quot;\d +  # the integral part</span><br><span class="line">                   \.    # the decimal point</span><br><span class="line">                   \d *  # some fractional digits&quot;&quot;&quot;, re.X)</span><br><span class="line">b = re.compile(r&quot;\d+\.\d*&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">实例方法[ | re模块方法]：</span><br><span class="line"></span><br><span class="line">    match(string[, pos[, endpos]]) | re.match(pattern, string[, flags]):</span><br><span class="line">    这个方法将从string的pos下标处起尝试匹配pattern；如果pattern结束时仍可匹配，则返回一个Match对象；如果匹配过程中pattern无法匹配，或者匹配未结束就已到达endpos，则返回None。</span><br><span class="line">    pos和endpos的默认值分别为0和len(string)；re.match()无法指定这两个参数，参数flags用于编译pattern时指定匹配模式。</span><br><span class="line">    注意：这个方法并不是完全匹配。当pattern结束时若string还有剩余字符，仍然视为成功。想要完全匹配，可以在表达式末尾加上边界匹配符&apos;$&apos;。</span><br><span class="line">    示例参见2.1小节。</span><br><span class="line">    search(string[, pos[, endpos]]) | re.search(pattern, string[, flags]):</span><br><span class="line">    这个方法用于查找字符串中可以匹配成功的子串。从string的pos下标处起尝试匹配pattern，如果pattern结束时仍可匹配，则返回一个Match对象；若无法匹配，则将pos加1后重新尝试匹配；直到pos=endpos时仍无法匹配则返回None。</span><br><span class="line">    pos和endpos的默认值分别为0和len(string))；re.search()无法指定这两个参数，参数flags用于编译pattern时指定匹配模式。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. 使用变量</span><br><span class="line">DATA_TIME_PATTERN = re.compile(r&apos;^(\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;\s+\d&#123;2&#125;:\d&#123;2&#125;:\d&#123;2&#125;\.\d+)&apos;)</span><br><span class="line">line_data = self.__get_line_from_file()</span><br><span class="line"># match_obj = re.match(r&apos;^(\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;\s+\d&#123;2&#125;:\d&#123;2&#125;:\d&#123;2&#125;\.\d+)&apos;, line_data)</span><br><span class="line"># date_pattern_str = &apos;(\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;\s+\d&#123;2&#125;:\d&#123;2&#125;:\d&#123;2&#125;\.\d+)&apos;</span><br><span class="line"># match_obj = re.match(r&apos;^%s&apos; % date_pattern_str, line_data)</span><br><span class="line">match_obj = re.match(DATA_TIME_PATTERN, line_data)</span><br><span class="line"></span><br><span class="line">2. escape的用法</span><br><span class="line">re模块还提供了一个方法escape(string)，用于将string中的正则表达式元字符如*/+/?等之前加上转义符再返回，在需要大量匹配元字符时有那么一点用。</span><br><span class="line">COMMENT_START = &apos;/****&apos;</span><br><span class="line">COMMENT_END = &apos;****/&apos;</span><br><span class="line"></span><br><span class="line">if re.search(r&apos;^%s&apos; % re.escape(COMMENT_START), line_data):</span><br><span class="line">    case_start_flag = 1</span><br><span class="line">elif re.search(r&apos;%s$&apos; % re.escape(COMMENT_END), line_data):</span><br><span class="line">    case_start_flag = 0</span><br><span class="line">elif re.search(r&apos;^%s&apos; % re.escape(CMD_PREFIX), line_data):</span><br><span class="line">    match_obj = re.match(r&apos;^\S+\s+(.+?)\s+\((.*)\)&apos;, line_data)</span><br><span class="line">    if match_obj:</span><br><span class="line">        # cmd_dict.clear()</span><br><span class="line">        cmd_dict[&apos;type&apos;] = CMD_ATTR</span><br><span class="line">        cmd_dict[&apos;cmd&apos;] = match_obj.group(1)</span><br><span class="line">        cmd_dict[&apos;msg&apos;] = match_obj.group(2).strip()</span><br><span class="line"></span><br><span class="line">        self.cases_attribute[case_name].append(cmd_dict)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">self.__result_str = &apos;Test result:&apos;</span><br><span class="line">self.__warning_str = &apos;Warning:&apos;</span><br><span class="line">self.__error_str = &apos;Error:&apos;</span><br><span class="line"></span><br><span class="line">if re.search(r&apos;^\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;\s+\d&#123;2&#125;:\d&#123;2&#125;:\d&#123;2&#125;\.\d+\s*-&gt;\s*%s&apos;</span><br><span class="line">             % re.escape(self.__result_str), line_data, re.I):</span><br><span class="line">    match_obj = re.match(r&apos;^\d&#123;4&#125;-\d&#123;2&#125;-\d&#123;2&#125;\s+\d&#123;2&#125;:\d&#123;2&#125;:\d&#123;2&#125;\.\d+\s*-&gt;\s*%s\s*(.*)$&apos;</span><br><span class="line">                         % re.escape(self.__result_str), line_data, re.I)</span><br><span class="line"></span><br><span class="line">    if match_obj:</span><br><span class="line">        if match_obj.group(1) in self.__result_content_str:</span><br><span class="line">            test_result[&apos;result&apos;] = match_obj.group(1)</span><br><span class="line">        else:</span><br><span class="line">            test_result[&apos;result&apos;] = &apos;FAILED&apos;</span><br><span class="line"></span><br><span class="line">3. 使用re对字符串分组</span><br><span class="line">serial_data = &apos;043E1301001600010028AAE050A000070000000A0001&apos;</span><br><span class="line"># 如使用&apos;.&#123;2,2&#125;&apos;，则奇数个serial_data，最后一个会被丢弃，而用&apos;.&#123;1,2&#125;&apos;则可以避免这个问题</span><br><span class="line">pattern = re.compile(&apos;.&#123;1,2&#125;&apos;)</span><br><span class="line">pattern = re.compile(&apos;.&#123;2,2&#125;&apos;)</span><br><span class="line">serial_hex_str = &apos; &apos;.join(pattern.findall(serial_data)) + &apos; &apos;</span><br><span class="line"># serial_hex_str = &quot; &quot;.join(serial_data[i:i+2] for i in range(0, len(serial_data), 2))</span><br><span class="line">print(serial_hex_str)</span><br><span class="line"></span><br><span class="line">4. re.sub字符串转列表</span><br><span class="line">line_data = &quot;case: [&apos;advertisement&apos;, &apos;connect&apos;, &apos;checkRepeatConnect&apos;, &apos;checkProfile&apos;, &apos;testThroughput&apos;]&quot;</span><br><span class="line">line_match_obj = re.match(r&apos;^case:\s+\[\s*(.*?)\s*\]$&apos;, line_data)</span><br><span class="line">if line_match_obj:</span><br><span class="line">    cases_num_dict[phone_name][&apos;case_list&apos;] = re.sub(r&apos;[\&apos; ]&apos;, &apos;&apos;, line_match_obj.group(1)).split(&apos;,&apos;)</span><br><span class="line">    cases_num_dict[phone_name][&apos;case_list&apos;] = re.sub(r&apos;(\&apos;| )&apos;, &apos;&apos;, line_match_obj.group(1)).split(&apos;,&apos;)</span><br><span class="line">    cases_num_dict[phone_name][&apos;case_list&apos;] = re.sub(r&apos;\&apos;| &apos;, &apos;&apos;, line_match_obj.group(1)).split(&apos;,&apos;)</span><br><span class="line"></span><br><span class="line">5. re.match与re.search区别</span><br><span class="line">&gt;&gt;&gt; re.match(r&apos;world&apos;, &apos;hello world&apos;).group()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">AttributeError: &apos;NoneType&apos; object has no attribute &apos;group&apos;</span><br><span class="line">&gt;&gt;&gt; re.search(r&apos;world&apos;, &apos;hello world&apos;).group()</span><br><span class="line">&apos;world&apos;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; link = &apos;&lt;div class=&quot;thumbnail&quot;&gt;&lt;div class=&quot;cat&quot;&gt;&lt;a href=&quot;http://mebook.cc/category/cxxs/wxyq&quot; rel=&quot;category tag&quot;&gt;武侠玄幻·穿越言情&lt;/a&gt; · &lt;a href=&quot;http://mebook.cc/category/cxxs&quot; rel=&quot;category tag&quot;&gt;畅销小说&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;img&quot;&gt;&lt;a href=&quot;http://mebook.cc/19656.html&quot; title=&quot;《逝鸿传说（精排）》碎石（作者）epub+mobi&quot;&gt;&lt;img src=&quot;http://i2.cfimg.com/621500/b269420e4803dcee.png&quot;/&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&apos;</span><br><span class="line">&gt;&gt;&gt; re.match(r&apos;a\s*href=\&quot;([^\&quot;]+)\&quot;\s*title=\&quot;\s*(.*?)\&quot;&apos;, link).group()</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">AttributeError: &apos;NoneType&apos; object has no attribute &apos;group&apos;</span><br><span class="line">&gt;&gt;&gt; re.search(r&apos;a\s*href=\&quot;([^\&quot;]+)\&quot;\s*title=\&quot;\s*(.*?)\&quot;&apos;, link).group()</span><br><span class="line">&apos;a href=&quot;http://mebook.cc/19656.html&quot; title=&quot;《逝鸿传说（精排）》碎石（作者）epub+mobi&quot;&apos;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="正则表达式使用变量"><a href="#正则表达式使用变量" class="headerlink" title="正则表达式使用变量"></a>正则表达式使用变量</h5><p><a href="https://stackoverflow.com/questions/6930982/how-to-use-a-variable-inside-a-regular-expression" target="_blank" rel="noopener">https://stackoverflow.com/questions/6930982/how-to-use-a-variable-inside-a-regular-expression</a><br><a href="https://code.i-harness.com/zh-CN/q/69c226" target="_blank" rel="noopener">https://code.i-harness.com/zh-CN/q/69c226</a><br><a href="https://codeday.me/bug/20170627/34116.html" target="_blank" rel="noopener">https://codeday.me/bug/20170627/34116.html</a><br><a href="https://oncemore2020.github.io/blog/python-re/" target="_blank" rel="noopener">https://oncemore2020.github.io/blog/python-re/</a><br><a href="http://www.cnblogs.com/yangshuo/archive/2013/06/06/3120595.html" target="_blank" rel="noopener">http://www.cnblogs.com/yangshuo/archive/2013/06/06/3120595.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">1. Method 1</span><br><span class="line">TEXTO = sys.argv[1]</span><br><span class="line">my_regex = r&quot;\b(?=\w)&quot; + re.escape(TEXTO) + r&quot;\b(?!\w)&quot;</span><br><span class="line"></span><br><span class="line">if re.search(my_regex, subject, re.IGNORECASE):</span><br><span class="line">    etc.</span><br><span class="line"></span><br><span class="line">2. Method 2</span><br><span class="line">if re.search(r&quot;\b(?&lt;=\w)%s\b(?!\w)&quot; % TEXTO, subject, re.IGNORECASE):</span><br><span class="line">    etc.</span><br><span class="line"></span><br><span class="line">3. Method 3</span><br><span class="line">rx = r&apos;\b(?&lt;=\w)&#123;0&#125;\b(?!\w)&apos;.format(TEXTO)</span><br><span class="line"></span><br><span class="line">4. Method 4</span><br><span class="line">pattern = re.compile(r&quot;(&quot;+username+&quot;.*):(.*?):(.*?):(.*?):(.*)&quot;</span><br><span class="line">matches = re.findall(pattern, lines)</span><br><span class="line"></span><br><span class="line">5. Method 5</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">string = &quot;begin:id1:tag:middl:id2:tag:id3:end&quot;</span><br><span class="line">re_str1 = r&apos;(?&lt;=(\S&#123;5&#125;)):&apos;</span><br><span class="line">re_str2 = r&apos;(id\d+):(?=tag:)&apos;</span><br><span class="line">re_pattern = re.compile(re_str1 + re_str2)</span><br><span class="line">match = re_pattern.findall(string)</span><br><span class="line">print(match)</span><br><span class="line"></span><br><span class="line">6. Method 6</span><br><span class="line">&gt;&gt;&gt; user = &apos;heinz&apos;</span><br><span class="line">&gt;&gt;&gt; import re</span><br><span class="line">&gt;&gt;&gt; regex = re.compile(&apos;%s-\d*&apos;%user)</span><br><span class="line">&gt;&gt;&gt; regex.match(&apos;heinz-1&apos;)</span><br><span class="line">&lt;_sre.SRE_Match object at 0x2b27a18e3f38&gt;</span><br><span class="line">&gt;&gt;&gt; regex.match(&apos;heinz-11&apos;)</span><br><span class="line">&lt;_sre.SRE_Match object at 0x2b27a2f7c030&gt;</span><br><span class="line">&gt;&gt;&gt; regex.match(&apos;heinz-12345&apos;)</span><br><span class="line">&lt;_sre.SRE_Match object at 0x2b27a18e3f38&gt;</span><br><span class="line">&gt;&gt;&gt; regex.match(&apos;foo-12345&apos;)</span><br></pre></td></tr></table></figure></p>
<h5 id="Str模块相关函数用法"><a href="#Str模块相关函数用法" class="headerlink" title="Str模块相关函数用法"></a>Str模块相关函数用法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">1. split</span><br><span class="line">&gt;&gt;&gt; x = &apos;checkRepeatConnect_throughput&apos;</span><br><span class="line">&gt;&gt;&gt; x.split(&apos;_&apos;)[0]</span><br><span class="line">&apos;checkRepeatConnect&apos;</span><br><span class="line">&gt;&gt;&gt; x.split(&apos;_&apos;)</span><br><span class="line">[&apos;checkRepeatConnect&apos;, &apos;throughput&apos;]</span><br><span class="line">&gt;&gt;&gt; x.split(&apos;_&apos;)[0]</span><br><span class="line">&apos;checkRepeatConnect&apos;</span><br><span class="line">&gt;&gt;&gt; x = &apos;checkRepeatConnect_throughput_bin&apos;</span><br><span class="line">&gt;&gt;&gt; x.split(&apos;_&apos;)[0]</span><br><span class="line">&apos;checkRepeatConnect&apos;</span><br><span class="line">&gt;&gt;&gt; x.split(&apos;_&apos;)</span><br><span class="line">[&apos;checkRepeatConnect&apos;, &apos;throughput&apos;, &apos;bin&apos;]</span><br><span class="line">&gt;&gt;&gt; x.split(&apos;_&apos;)</span><br><span class="line">[&apos;checkRepeatConnect&apos;, &apos;throughput&apos;, &apos;bin&apos;]</span><br><span class="line">&gt;&gt;&gt; x = &apos;checkRepeatConnect&apos;</span><br><span class="line">&gt;&gt;&gt; x.split(&apos;_&apos;)</span><br><span class="line">[&apos;checkRepeatConnect&apos;]</span><br><span class="line">&gt;&gt;&gt; x.split(&apos;_&apos;)[0]</span><br><span class="line">&apos;checkRepeatConnect&apos;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">2. join</span><br><span class="line">Concatenate a list or tuple of words with intervening occurrences of sep. The default value for sep is a single space character. It is always true that string.join(string.split(s, sep), sep) equals s.</span><br><span class="line">&gt;&gt;&gt; a = [&apos;1&apos;, &apos;2&apos;, &apos;3&apos;]</span><br><span class="line">&gt;&gt;&gt; b=str(a)</span><br><span class="line">&gt;&gt;&gt; b</span><br><span class="line">&quot;[&apos;1&apos;, &apos;2&apos;, &apos;3&apos;]&quot;</span><br><span class="line">&gt;&gt;&gt; b=&apos;,&apos;</span><br><span class="line">&gt;&gt;&gt; b.join(a)</span><br><span class="line">&apos;1,2,3&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;,&apos;.join(a)</span><br><span class="line">&apos;1,2,3&apos;</span><br></pre></td></tr></table></figure>
<h5 id="Python检查列表，字符串为空"><a href="#Python检查列表，字符串为空" class="headerlink" title="Python检查列表，字符串为空"></a>Python检查列表，字符串为空</h5><p><a href="https://taizilongxu.gitbooks.io/stackoverflow-about-python/content/15/README.html" target="_blank" rel="noopener">https://taizilongxu.gitbooks.io/stackoverflow-about-python/content/15/README.html</a><br><a href="http://codewenda.com/%E7%94%A8python%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9F%A5%E7%9C%8B%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA/" target="_blank" rel="noopener">http://codewenda.com/%E7%94%A8python%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9F%A5%E7%9C%8B%E4%B8%80%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">例如,传递下面:</span><br><span class="line"></span><br><span class="line">a = []</span><br><span class="line"></span><br><span class="line">我怎么检查a是空值?</span><br><span class="line"></span><br><span class="line">if not a:</span><br><span class="line">  print &quot;List is empty&quot;</span><br><span class="line"></span><br><span class="line">用隐藏的空列表的布尔值才是最Pythonic的方法.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在Python中，如果要判断是个字符串是否为空，应该怎么写呢？</span><br><span class="line">这个问题很简单的，但是stackoverflow上依然是一个常被查看的问题。</span><br><span class="line"></span><br><span class="line">判断str的布尔值</span><br><span class="line">一个字符串如果是空字符串，那么if str判断其布尔值为False。</span><br><span class="line">代码如下：</span><br><span class="line">if str:</span><br><span class="line">    print(&apos;This is an empty string.&apos;)</span><br><span class="line"></span><br><span class="line">直接与空字符串比较</span><br><span class="line">当然前提是确认str是string类型了。如果不能确定它的类型，那就用最直接的判断：</span><br><span class="line">if str == &apos;&apos;:</span><br><span class="line">    print(&apos;This is an empty string.&apos;)</span><br></pre></td></tr></table></figure></p>
<h5 id="Python-os-path模块"><a href="#Python-os-path模块" class="headerlink" title="Python os.path模块"></a>Python os.path模块</h5><p><a href="https://www.cnblogs.com/dkblog/archive/2011/03/25/1995537.html" target="_blank" rel="noopener">https://www.cnblogs.com/dkblog/archive/2011/03/25/1995537.html</a><br><a href="http://yysfire.github.io/python/python2-standard-library-os.path.html" target="_blank" rel="noopener">http://yysfire.github.io/python/python2-standard-library-os.path.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line"> python os.path模块</span><br><span class="line">os.path.abspath(path) #返回绝对路径</span><br><span class="line">os.path.basename(path) #返回文件名</span><br><span class="line">os.path.commonprefix(list) #返回list(多个路径)中，所有path共有的最长的路径。</span><br><span class="line">os.path.dirname(path) #返回文件路径</span><br><span class="line">os.path.exists(path)  #路径存在则返回True,路径损坏返回False</span><br><span class="line">os.path.lexists  #路径存在则返回True,路径损坏也返回True</span><br><span class="line">os.path.expanduser(path)  #把path中包含的&quot;~&quot;和&quot;~user&quot;转换成用户目录</span><br><span class="line">os.path.expandvars(path)  #根据环境变量的值替换path中包含的”$name”和”$&#123;name&#125;”</span><br><span class="line">os.path.getatime(path)  #返回最后一次进入此path的时间。</span><br><span class="line">os.path.getmtime(path)  #返回在此path下最后一次修改的时间。</span><br><span class="line">os.path.getctime(path)  #返回path的大小</span><br><span class="line">os.path.getsize(path)  #返回文件大小，如果文件不存在就返回错误</span><br><span class="line">os.path.isabs(path)  #判断是否为绝对路径</span><br><span class="line">os.path.isfile(path)  #判断路径是否为文件</span><br><span class="line">os.path.isdir(path)  #判断路径是否为目录</span><br><span class="line">os.path.islink(path)  #判断路径是否为链接</span><br><span class="line">os.path.ismount(path)  #判断路径是否为挂载点（）</span><br><span class="line">os.path.join(path1[, path2[, ...]])  #把目录和文件名合成一个路径</span><br><span class="line">os.path.normcase(path)  #转换path的大小写和斜杠</span><br><span class="line">os.path.normpath(path)  #规范path字符串形式</span><br><span class="line">os.path.realpath(path)  #返回path的真实路径</span><br><span class="line">os.path.relpath(path[, start])  #从start开始计算相对路径</span><br><span class="line">os.path.samefile(path1, path2)  #判断目录或文件是否相同</span><br><span class="line">os.path.sameopenfile(fp1, fp2)  #判断fp1和fp2是否指向同一文件</span><br><span class="line">os.path.samestat(stat1, stat2)  #判断stat tuple stat1和stat2是否指向同一个文件</span><br><span class="line">os.path.split(path)  #把路径分割成dirname和basename，返回一个元组</span><br><span class="line">os.path.splitdrive(path)   #一般用在windows下，返回驱动器名和路径组成的元组</span><br><span class="line">os.path.splitext(path)  #分割路径，返回路径名和文件扩展名的元组</span><br><span class="line">os.path.splitunc(path)  #把路径分割为加载点与文件</span><br><span class="line">os.path.walk(path, visit, arg)  #遍历path，进入每个目录都调用visit函数，visit函数必须有</span><br><span class="line">3个参数(arg, dirname, names)，dirname表示当前目录的目录名，names代表当前目录下的所有</span><br><span class="line">文件名，args则为walk的第三个参数</span><br><span class="line">os.path.supports_unicode_filenames  #设置是否支持unicode路径名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">os.path 模块主要用来处理路径字符串，以提取出自己需要的信息。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; from os import path</span><br><span class="line"></span><br><span class="line">分割与连接路径</span><br><span class="line">os.path.split(path)</span><br><span class="line"></span><br><span class="line">将路径分割成一对元组(head,tail)，tail 是路径中最后一个斜杠后面的部分，而 head 是前面所有的部分。tail 部分不会包含斜杠；如果路径是以斜杠结尾，那么 tail 将为空串。如果路径中不包含斜杠，那么 head 为空。路径尾部的斜杠，除非代表的是根目录，否则 head 会将其去掉。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; path.split(pathstr)</span><br><span class="line">(&apos;/home/user/archive&apos;, &apos;src.tar.gz&apos;)</span><br><span class="line"></span><br><span class="line">os.path.basename(path)</span><br><span class="line"></span><br><span class="line">提取路径中的文件名，相当于 split(path) 返回值的 tail。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; pathstr=&apos;/home/user/archive/src.tar.gz&apos;</span><br><span class="line">&gt;&gt;&gt; path.basename(pathstr)</span><br><span class="line">src.tar.gz</span><br><span class="line">&gt;&gt;&gt; path.basename(&apos;/home/user/archive/&apos;)</span><br><span class="line">&apos;&apos;</span><br><span class="line"></span><br><span class="line">os.path.dirname(path)</span><br><span class="line"></span><br><span class="line">提取路径中的目录名，相当于 split(path) 返回值的 head。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; path.dirname(pathstr)</span><br><span class="line">&apos;/home/user/archive&apos;</span><br><span class="line"></span><br><span class="line">os.path.splitdrive(path)</span><br><span class="line"></span><br><span class="line">将路径分割成元组(drive,tail)，drive 是盘符部分，在不用盘符的系统上，drive 始终为空串。drive + tail始终和path一样。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; path.splitdrive(pathstr)</span><br><span class="line">(&apos;&apos;, &apos;/home/user/archive/src.tar.gz&apos;)</span><br><span class="line"></span><br><span class="line">os.path.splitext(path)</span><br><span class="line"></span><br><span class="line">将路径分割成(root,ext)，root + ext == path，ext 部分以点号开头且至多包含一个点号。如果路径部分就是一个以点号开头的文件名，那么 ext 为空串。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; path.splitext(pathstr)</span><br><span class="line">(&apos;/home/user/archive/src.tar&apos;, &apos;.gz&apos;)</span><br><span class="line">&gt;&gt;&gt; path.splitext(&apos;.bashrc&apos;)</span><br><span class="line">(&apos;.bashrc&apos;, &apos;&apos;)</span><br><span class="line"></span><br><span class="line">os.path.join(path1[, path2[, ...]])</span><br><span class="line"></span><br><span class="line">将一个或多个路径组分智能地连接起来。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; path.join(&apos;/home/user&apos;,&apos;archive&apos;,&apos;src.tar.gz&apos;)</span><br><span class="line">&apos;/home/user/archive/src.tar.gz&apos;</span><br><span class="line">&gt;&gt;&gt; path.join(&apos;/home/user&apos;,&apos;archive&apos;,&apos;&apos;)</span><br><span class="line">&apos;/home/user/archive/&apos;</span><br><span class="line">&gt;&gt;&gt; path.join(&apos;/home/user&apos;,&apos;archive&apos;)</span><br><span class="line">&apos;/home/user/archive&apos;</span><br><span class="line"></span><br><span class="line">os.path.commonprefix(list)</span><br><span class="line"></span><br><span class="line">返回列表 list 中所有路径的最长相同首部，因为是逐个字符进行比较，所以可能得到的不是一个有效的路径。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; path.commonprefix([&apos;/home/user/aabb.log&apos;,&apos;/home/user/abc.txt&apos;])</span><br><span class="line">&apos;/home/user/a&apos;</span><br><span class="line"></span><br><span class="line">os.path.relpath(path[, start])</span><br><span class="line"></span><br><span class="line">返回path对于当前工作目录或者start指定路径的相对路径。start的默认值就是os.curdir。仅适用于 Windows 和 Unix(Linux)。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; path.relpath(pathstr,&apos;/home/user/doc&apos;)</span><br><span class="line">&apos;../archive/src.tar.gz&apos;</span><br><span class="line"></span><br><span class="line">对路径进行扩展和标准化处理</span><br><span class="line">os.path.expanduser(path)</span><br><span class="line"></span><br><span class="line">将路径中的 ~ 或者 ~user 扩展成用户的主目录。如果扩展失败，或是 path 不是以波浪线开头，那么 path 会被原样返回。</span><br><span class="line">os.path.expandvars(path)</span><br><span class="line"></span><br><span class="line">将路径中的环境变量（$name 或 $&#123;name&#125;）扩展成该变量自身的值。无效和异常的变量名不会被处理。在 Windows 系统下，还支持 %name% 的形式。</span><br><span class="line">os.path.normcase(path)</span><br><span class="line"></span><br><span class="line">对路径进行大小写标准化处理。在对大小写不敏感的文件系统上，将路径全部转换成小写。在 Unix(Linux) 和 Mac OS X 系统上，不作修改。在 Windows 系统下，将路径中的斜杠（/）全部转换成反斜杠（\）。</span><br><span class="line">os.path.normpath(path)</span><br><span class="line"></span><br><span class="line">对路径进行标准化处理。去掉路径中冗余的分隔符和表示相对路径的点号，例如，将A//B, A/B/, A/./B 和 A/foo/../B 全部变成 A/B。在 Windows 系统下，将路径中的斜杠（/）全部转换成反斜杠（\）。</span><br><span class="line">os.path.abspath(path)</span><br><span class="line"></span><br><span class="line">返回将 path 标准化后的绝对路径，相当于 normpath(join(os.getcwd(), path))</span><br><span class="line">查询及检测路径</span><br><span class="line"></span><br><span class="line">os.path 还可以用于检测路径是否有效，以及查询文件的相关信息（metadata）。</span><br><span class="line"></span><br><span class="line">注意：在使用以下函数前，需要先将路径中的波浪线和环境变量扩展开。</span><br><span class="line">os.path.getatime(path)</span><br><span class="line"></span><br><span class="line">获取文件的最后访问时间。如果文件不存在或不可访问，抛出 os.error 异常。</span><br><span class="line">os.path.getmtime(path)</span><br><span class="line"></span><br><span class="line">获取文件的最后修改时间。如果文件不存在或不可访问，抛出 os.error 异常。</span><br><span class="line">os.path.getctime(path)</span><br><span class="line"></span><br><span class="line">获取文件的创建时间（需要系统自身支持，否则和最后修改时间一样，例如 Unix/Linux 系统）。如果文件不存在或不可访问，抛出 os.error 异常。</span><br><span class="line">os.path.getsize(path)</span><br><span class="line"></span><br><span class="line">获取文件的大小，以字节为单位。如果文件不存在或不可访问，抛出 os.error 异常。</span><br><span class="line">os.path.realpath(path)</span><br><span class="line"></span><br><span class="line">返回 path 实际指向的目标路径，即消除所有的符号链接（前提是系统支持）。</span><br><span class="line">os.path.isabs(path)</span><br><span class="line"></span><br><span class="line">path 是绝对路径时返回 True。这意味着，在 Unix/Linux 下，以 / 开头；在 Windows 下，以 \ 开头（需斩掉盘符）</span><br><span class="line">os.path.isfile(path)</span><br><span class="line"></span><br><span class="line">path 指向的是一个文件时返回 True。此函数跟踪符号链接。</span><br><span class="line">os.path.isdir(path)</span><br><span class="line"></span><br><span class="line">path 指向的是一个目录时返回 True。此函数跟踪符号链接。</span><br><span class="line">os.path.islink(path)</span><br><span class="line"></span><br><span class="line">path 指向的是一个符号链接时返回 True。如果不支持符号链接，那么返回 False</span><br><span class="line">os.path.exists(path)</span><br><span class="line"></span><br><span class="line">path 指向一个实际存在的路径时返回 True。对于坏掉的符号链接，它返回 False。</span><br><span class="line">os.path.lexists(path)</span><br><span class="line"></span><br><span class="line">path 指向一个实际存在的路径时返回 True。对于坏掉的符号链接，它返回 True。</span><br></pre></td></tr></table></figure></p>
<h5 id="python-id函数"><a href="#python-id函数" class="headerlink" title="python id函数"></a>python id函数</h5><p><a href="http://www.runoob.com/python/python-func-id.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-func-id.html</a><br><a href="http://blog.jobbole.com/49705/" target="_blank" rel="noopener">http://blog.jobbole.com/49705/</a><br><a href="http://blog.csdn.net/djskl/article/details/25886187" target="_blank" rel="noopener">http://blog.csdn.net/djskl/article/details/25886187</a><br><a href="http://pycoders-weekly-chinese.readthedocs.io/en/latest/issue15/python-built-in-functions-are-awesome-use-them.html" target="_blank" rel="noopener">http://pycoders-weekly-chinese.readthedocs.io/en/latest/issue15/python-built-in-functions-are-awesome-use-them.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">描述</span><br><span class="line"></span><br><span class="line">id() 函数用于获取对象的内存地址。</span><br><span class="line">语法</span><br><span class="line"></span><br><span class="line">id 语法：</span><br><span class="line"></span><br><span class="line">id([object])</span><br><span class="line"></span><br><span class="line">参数说明：</span><br><span class="line"></span><br><span class="line">    object -- 对象。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; a = &#123;&#125;</span><br><span class="line">&gt;&gt;&gt; id(a)</span><br><span class="line">140000777319912</span><br><span class="line">&gt;&gt;&gt; a=&#123;&#125;</span><br><span class="line">&gt;&gt;&gt; id(a)</span><br><span class="line">140000777755384</span><br><span class="line">&gt;&gt;&gt; a = &#123;&#125;</span><br><span class="line">&gt;&gt;&gt; b = a</span><br><span class="line">&gt;&gt;&gt; a[100] = 200</span><br><span class="line">&gt;&gt;&gt; b</span><br><span class="line">&#123;100: 200&#125;</span><br><span class="line">&gt;&gt;&gt; a = &#123;&#125;</span><br><span class="line">&gt;&gt;&gt; a[100] = 300</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">&#123;100: 300&#125;</span><br><span class="line">&gt;&gt;&gt; b</span><br><span class="line">&#123;100: 200&#125;</span><br><span class="line">&gt;&gt;&gt; a = &#123;&#125;</span><br><span class="line">&gt;&gt;&gt; hex(id(a))</span><br><span class="line">&apos;0x7f548dbea480&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(b))</span><br><span class="line">&apos;0x7f547899b5e8&apos;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="python内存管理"><a href="#python内存管理" class="headerlink" title="python内存管理"></a>python内存管理</h5><p><a href="https://chenrudan.github.io/blog/2016/04/23/pythonmemorycontrol.html" target="_blank" rel="noopener">https://chenrudan.github.io/blog/2016/04/23/pythonmemorycontrol.html</a><br><a href="http://www.cnblogs.com/vamei/p/3232088.html" target="_blank" rel="noopener">http://www.cnblogs.com/vamei/p/3232088.html</a><br><a href="http://www.cnblogs.com/Lvkun/archive/2012/03/01/python_object_memory_usage.html" target="_blank" rel="noopener">http://www.cnblogs.com/Lvkun/archive/2012/03/01/python_object_memory_usage.html</a><br><a href="http://blog.csdn.net/liweiblog/article/details/64128241" target="_blank" rel="noopener">http://blog.csdn.net/liweiblog/article/details/64128241</a><br><a href="https://www.zhihu.com/question/34895986" target="_blank" rel="noopener">https://www.zhihu.com/question/34895986</a><br><a href="http://liuliqiang.info/post/memory-manager-in-python/" target="_blank" rel="noopener">http://liuliqiang.info/post/memory-manager-in-python/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">1. Python变量、对象、引用、存储</span><br><span class="line"></span><br><span class="line">python语言是一种解释性的编程语言，它不同于一些传统的编译语言，不是先编译成汇编再编程机器码，而是在运行的过程中，逐句将指令解释成机器码，所以造就了python语言一些特别的地方。例如a=1，其中a是变量，1是对象。这里所谓的变量，它的意义类似一个指针，它本身是没有类型的，只有它指向的那个对象是什么类型，它才是什么类型，一旦把它指到别的地方，它的类型就变了，现在指向的是1，它的类型可以认为是int，假如接下来执行a=2.5，那么变量的类型就变了。甚至当先给a=1，a=a+1时，a的地址也会改变。而这里的1,2.5或者一个list一个dict就是一个被实例化的对象，对象拥有真正的资源与取值，当一个变量指向某个对象，被称为这个对象的产生了一个引用，一个对象可以有多个变量指向它，有多个引用。而一个变量可以随时指向另外的对象。同时一个变量可以指向另外一个变量，那么它们指向的那个对象的引用就增加了一个。</span><br><span class="line"></span><br><span class="line">Python有个特别的机制，它会在解释器启动的时候事先分配好一些缓冲区，这些缓冲区部分是固定好取值，例如整数[-5,256]的内存地址是固定的(这里的固定指这一次程序启动之后，这些数字在这个程序中的内存地址就不变了，但是启动新的python程序，两次的内存地址不一样)。有的缓冲区就可以重复利用。这样的机制就使得不需要python频繁的调用内存malloc和free。下面的id是取内存地址，hex是转成16进制表示。</span><br><span class="line"></span><br><span class="line">#第一次启动解释器</span><br><span class="line">&gt;&gt;&gt; hex(id(1))</span><br><span class="line">&apos;0x14c5158&apos;</span><br><span class="line">#第二次启动解释器</span><br><span class="line">&gt;&gt;&gt; hex(id(1))</span><br><span class="line">&apos;0xe17158&apos;</span><br><span class="line"></span><br><span class="line">#缓冲区被重复利用</span><br><span class="line">&gt;&gt;&gt; hex(id(100000))</span><br><span class="line">&apos;0xe5be00&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(1000000))</span><br><span class="line">&apos;0xe5be00&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(10000000))</span><br><span class="line">&apos;0xe5be00&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(100000000))</span><br><span class="line">&apos;0xe5be00&apos;</span><br><span class="line"></span><br><span class="line">针对整数对象，它的内存区域似乎是一个单独的区域，跟string、dict等的内存空间都不一样，从实验结果来看，它的地址大小只有’0xe5be00’，其他的是’0x7fe7e03c7698’。而存储整数对象的这块区域，有一块内存区域是事先分配好的，即[-5,256]范围内的整数。这块称为小整数缓冲池，静态分配，对某个变量赋值就是直接从里面取就行了，在python初始化时被创建。而另外的整数缓冲池称为大整数缓冲池，这块内存也是已经分配好了，只是要用的时候再赋值。可以从下面的例子中看到，针对257这个数字，虽然给a和b赋了相同的值，但是解释器实际上是先分配了不同的地址，再把这个地址给两个变量。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; a = 1</span><br><span class="line">&gt;&gt;&gt; b = 1</span><br><span class="line">&gt;&gt;&gt; hex(id(a))</span><br><span class="line">&apos;0xe17158&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(b))</span><br><span class="line">&apos;0xe17158&apos;</span><br><span class="line">&gt;&gt;&gt; b = 257</span><br><span class="line">&gt;&gt;&gt; a = 257</span><br><span class="line">&gt;&gt;&gt; hex(id(a))</span><br><span class="line">&apos;0xe5be00&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(b))</span><br><span class="line">&apos;0xe5bdd0&apos;</span><br><span class="line"></span><br><span class="line">针对string类型，它也有自己的缓冲区，也是分为固定缓冲区和可重复缓冲区，固定的是256个ASCII码字符。还发现一个有意思的现象，string中只要不出现除了字母和数字其他字符，那么对a和b赋同样的值，它们的内存地址都相同。但是如果string对象中有其他字符，那么对两个变量赋相同的string值，它们的内存地址还是不一样的。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; b = &apos;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(b))</span><br><span class="line">&apos;0x7fe7e03af848&apos;</span><br><span class="line">&gt;&gt;&gt; a = &apos;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(a))</span><br><span class="line">&apos;0x7fe7e03af848&apos;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; a = &apos;abcd%&apos;</span><br><span class="line">&gt;&gt;&gt; b = &apos;abcd%&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(a))</span><br><span class="line">&apos;0x7fe7e02d4900&apos;</span><br><span class="line">&gt;&gt;&gt; hex(id(b))</span><br><span class="line">&apos;0x7fe7e02d48d0&apos;</span><br><span class="line"></span><br><span class="line">而另外的dict和list的缓冲区也是事先分配好，大小为80个对象。</span><br><span class="line"></span><br><span class="line">因此变量的存储有三个区域，事先分配的静态内存、事先分配的可重复利用内存以及需要通过malloc和free来控制的自由内存。</span><br></pre></td></tr></table></figure></p>
<h5 id="python利用dis模块进行代码层次的性能剖析"><a href="#python利用dis模块进行代码层次的性能剖析" class="headerlink" title="python利用dis模块进行代码层次的性能剖析"></a>python利用dis模块进行代码层次的性能剖析</h5><p><a href="http://hyry.dip.jp/tech/book/page/python/variable_scope_dis.html" target="_blank" rel="noopener">http://hyry.dip.jp/tech/book/page/python/variable_scope_dis.html</a><br><a href="http://blog.csdn.net/handsomekang/article/details/41479597" target="_blank" rel="noopener">http://blog.csdn.net/handsomekang/article/details/41479597</a><br><a href="http://tinyweb.blog.51cto.com/2462673/982585" target="_blank" rel="noopener">http://tinyweb.blog.51cto.com/2462673/982585</a><br><a href="http://program.dengshilong.org/2017/03/02/Python%E4%B9%8Bdis%E6%A8%A1%E5%9D%97/" target="_blank" rel="noopener">http://program.dengshilong.org/2017/03/02/Python%E4%B9%8Bdis%E6%A8%A1%E5%9D%97/</a><br><a href="http://www.cweye.net/python/2014/08/18/python-bytecode.html" target="_blank" rel="noopener">http://www.cweye.net/python/2014/08/18/python-bytecode.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import dis</span><br><span class="line">&gt;&gt;&gt; dis.dis(hex(id(a)))</span><br><span class="line">  1           0 LOAD_CONST               0 (140001160313888)</span><br><span class="line">              2 RETURN_VALUE</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="Python中给List添加元素的4种方法分享"><a href="#Python中给List添加元素的4种方法分享" class="headerlink" title="Python中给List添加元素的4种方法分享"></a>Python中给List添加元素的4种方法分享</h5><p><a href="http://www.jb51.net/article/57923.htm" target="_blank" rel="noopener">http://www.jb51.net/article/57923.htm</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">List 是 Python 中常用的数据类型，它一个有序集合，即其中的元素始终保持着初始时的定义的顺序（除非你对它们进行排序或其他修改操作）。</span><br><span class="line"></span><br><span class="line">在Python中，向List添加元素，方法有如下4种方法（append(),extend(),insert(), +加号）</span><br><span class="line"></span><br><span class="line">1. append() 追加单个元素到List的尾部，只接受一个参数，参数可以是任何数据类型，被追加的元素在List中保持着原结构类型。</span><br><span class="line"></span><br><span class="line">此元素如果是一个list，那么这个list将作为一个整体进行追加，注意append()和extend()的区别。</span><br><span class="line"></span><br><span class="line">复制代码 代码如下:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; list1=[&apos;a&apos;,&apos;b&apos;]</span><br><span class="line">&gt;&gt;&gt; list1.append(&apos;c&apos;)</span><br><span class="line">&gt;&gt;&gt; list1</span><br><span class="line">[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]</span><br><span class="line"></span><br><span class="line">2. extend() 将一个列表中每个元素分别添加到另一个列表中，只接受一个参数；extend()相当于是将list B 连接到list A上。</span><br><span class="line"></span><br><span class="line">复制代码 代码如下:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; list1</span><br><span class="line">[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;]</span><br><span class="line">&gt;&gt;&gt; list1.extend(&apos;d&apos;)</span><br><span class="line">&gt;&gt;&gt; list1</span><br><span class="line">[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;]</span><br><span class="line"></span><br><span class="line">3. insert() 将一个元素插入到列表中，但其参数有两个（如insert(1,”g”)），第一个参数是索引点，即插入的位置，第二个参数是插入的元素。</span><br><span class="line"></span><br><span class="line">复制代码 代码如下:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; list1</span><br><span class="line">[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;]</span><br><span class="line">&gt;&gt;&gt; list1.insert(1,&apos;x&apos;)</span><br><span class="line">&gt;&gt;&gt; list1</span><br><span class="line">[&apos;a&apos;, &apos;x&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;]</span><br><span class="line"></span><br><span class="line">4. + 加号，将两个list相加，会返回到一个新的list对象，注意与前三种的区别。前面三种方法（append, extend, insert）可对列表增加元素的操作，他们没有返回值，是直接修改了原数据对象。 注意：将两个list相加，需要创建新的list对象，从而需要消耗额外的内存，特别是当list较大时，尽量不要使用“+”来添加list，而应该尽可能使用List的append()方法。</span><br><span class="line"></span><br><span class="line">复制代码 代码如下:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; list1</span><br><span class="line">[&apos;a&apos;, &apos;x&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;]</span><br><span class="line">&gt;&gt;&gt; list2=[&apos;y&apos;,&apos;z&apos;]</span><br><span class="line">&gt;&gt;&gt; list3=list1+list2</span><br><span class="line">&gt;&gt;&gt; list3</span><br><span class="line">[&apos;a&apos;, &apos;x&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;y&apos;, &apos;z&apos;]</span><br></pre></td></tr></table></figure></p>
<h5 id="python浮点数精度截取"><a href="#python浮点数精度截取" class="headerlink" title="python浮点数精度截取"></a>python浮点数精度截取</h5><p><a href="http://python3-cookbook.readthedocs.io/zh_CN/latest/c03/p01_round_number.html" target="_blank" rel="noopener">http://python3-cookbook.readthedocs.io/zh_CN/latest/c03/p01_round_number.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">对于简单的舍入运算，使用内置的 round(value, ndigits) 函数即可。比如：</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; round(1.23, 1)</span><br><span class="line">1.2</span><br><span class="line">&gt;&gt;&gt; round(1.27, 1)</span><br><span class="line">1.3</span><br><span class="line">&gt;&gt;&gt; round(-1.27, 1)</span><br><span class="line">-1.3</span><br><span class="line">&gt;&gt;&gt; round(1.25361,3)</span><br><span class="line">1.254</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">当一个值刚好在两个边界的中间的时候， round 函数返回离它最近的偶数。 也就是说，对1.5或者2.5的舍入运算都会得到2。</span><br><span class="line"></span><br><span class="line">传给 round() 函数的 ndigits 参数可以是负数，这种情况下， 舍入运算会作用在十位、百位、千位等上面。比如：</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; a = 1627731</span><br><span class="line">&gt;&gt;&gt; round(a, -1)</span><br><span class="line">1627730</span><br><span class="line">&gt;&gt;&gt; round(a, -2)</span><br><span class="line">1627700</span><br><span class="line">&gt;&gt;&gt; round(a, -3)</span><br><span class="line">1628000</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="使用logging分级打印日志"><a href="#使用logging分级打印日志" class="headerlink" title="使用logging分级打印日志"></a>使用logging分级打印日志</h5><p><a href="http://www.vimer.cn/archives/1883.html" target="_blank" rel="noopener">http://www.vimer.cn/archives/1883.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">LOGGING_LEVEL = logging.DEBUG</span><br><span class="line"></span><br><span class="line">def logging_config():</span><br><span class="line">    # log_format = &quot;%(asctime)s [line: %(lineno)d] - %(levelname)s - %(message)s&quot;</span><br><span class="line">    log_format = &quot;[line: %(lineno)d] - %(levelname)s - %(message)s&quot;</span><br><span class="line">    logging.basicConfig(level=LOGGING_LEVEL, format=log_format)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    time_start = time.time()</span><br><span class="line">    logging_config()</span><br><span class="line">    main()</span><br><span class="line">    logging.info(&quot;\n\nTotal Elapsed Time: %s seconds\n&quot; % (time.time() - time_start))</span><br></pre></td></tr></table></figure></p>
<h5 id="sleep的用法"><a href="#sleep的用法" class="headerlink" title="sleep的用法"></a>sleep的用法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">time.sleep(value)，value支持小数，即可进行毫秒级的延时</span><br><span class="line">time_data = &apos;30.3m&apos;</span><br><span class="line">match_obj = re.match(r&apos;^([\d.]+)([smhSMH]*)$&apos;, time_data)</span><br><span class="line"></span><br><span class="line">if match_obj:</span><br><span class="line">    sleep_value = float(match_obj.group(1))</span><br><span class="line">    sleep_type = match_obj.group(2)</span><br><span class="line"></span><br><span class="line">    if &apos;&apos; == sleep_type or sleep_type.lower() == &apos;s&apos;:</span><br><span class="line">        time.sleep(sleep_value)</span><br><span class="line">    elif sleep_type.lower() == &apos;m&apos;:</span><br><span class="line">        time.sleep(sleep_value * 60)</span><br><span class="line">    elif sleep_type.lower() == &apos;h&apos;:</span><br><span class="line">        time.sleep(sleep_value * 3600)</span><br><span class="line">    else:</span><br><span class="line">        pass</span><br></pre></td></tr></table></figure>
<h5 id="Python字符串合并与格式化"><a href="#Python字符串合并与格式化" class="headerlink" title="Python字符串合并与格式化"></a>Python字符串合并与格式化</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = &apos;19991110&apos;</span><br><span class="line">xx = x[0:4]+&apos;-&apos;+x[4:6]+&apos;-&apos;+x[6:]</span><br><span class="line">xx = &apos;%s-%s-%s&apos; % (x[0:4], x[4:6], x[6:])</span><br><span class="line">xx = &apos;&#123;0&#125;-&#123;1&#125;-&#123;2&#125;&apos;.format(x[0:4], x[4:6], x[6:])</span><br><span class="line"></span><br><span class="line">参考：</span><br><span class="line">python学习手册第四版--第七章</span><br></pre></td></tr></table></figure>
<h5 id="String类中format函数的用法"><a href="#String类中format函数的用法" class="headerlink" title="String类中format函数的用法"></a>String类中format函数的用法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">6.1.3.2. Format examples</span><br><span class="line">This section contains examples of the str.format() syntax and comparison with the old %-formatting.</span><br><span class="line"></span><br><span class="line">In most of the cases the syntax is similar to the old %-formatting, with the addition of the &#123;&#125; and with : used instead of %. For example, &apos;%03.2f&apos; can be translated to &apos;&#123;:03.2f&#125;&apos;.</span><br><span class="line"></span><br><span class="line">The new format syntax also supports new and different options, shown in the follow examples.</span><br><span class="line"></span><br><span class="line">Accessing arguments by position:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; &apos;&#123;0&#125;, &#123;1&#125;, &#123;2&#125;&apos;.format(&apos;a&apos;, &apos;b&apos;, &apos;c&apos;)</span><br><span class="line">&apos;a, b, c&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;&#125;, &#123;&#125;, &#123;&#125;&apos;.format(&apos;a&apos;, &apos;b&apos;, &apos;c&apos;)  # 3.1+ only</span><br><span class="line">&apos;a, b, c&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;2&#125;, &#123;1&#125;, &#123;0&#125;&apos;.format(&apos;a&apos;, &apos;b&apos;, &apos;c&apos;)</span><br><span class="line">&apos;c, b, a&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;2&#125;, &#123;1&#125;, &#123;0&#125;&apos;.format(*&apos;abc&apos;)      # unpacking argument sequence</span><br><span class="line">&apos;c, b, a&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;0&#125;&#123;1&#125;&#123;0&#125;&apos;.format(&apos;abra&apos;, &apos;cad&apos;)   # arguments&apos; indices can be repeated</span><br><span class="line">&apos;abracadabra&apos;</span><br><span class="line">Accessing arguments by name:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; &apos;Coordinates: &#123;latitude&#125;, &#123;longitude&#125;&apos;.format(latitude=&apos;37.24N&apos;, longitude=&apos;-115.81W&apos;)</span><br><span class="line">&apos;Coordinates: 37.24N, -115.81W&apos;</span><br><span class="line">&gt;&gt;&gt; coord = &#123;&apos;latitude&apos;: &apos;37.24N&apos;, &apos;longitude&apos;: &apos;-115.81W&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; &apos;Coordinates: &#123;latitude&#125;, &#123;longitude&#125;&apos;.format(**coord)</span><br><span class="line">&apos;Coordinates: 37.24N, -115.81W&apos;</span><br><span class="line">Accessing arguments’ attributes:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; c = 3-5j</span><br><span class="line">&gt;&gt;&gt; (&apos;The complex number &#123;0&#125; is formed from the real part &#123;0.real&#125; &apos;</span><br><span class="line">...  &apos;and the imaginary part &#123;0.imag&#125;.&apos;).format(c)</span><br><span class="line">&apos;The complex number (3-5j) is formed from the real part 3.0 and the imaginary part -5.0.&apos;</span><br><span class="line">&gt;&gt;&gt; class Point:</span><br><span class="line">...     def __init__(self, x, y):</span><br><span class="line">...         self.x, self.y = x, y</span><br><span class="line">...     def __str__(self):</span><br><span class="line">...         return &apos;Point(&#123;self.x&#125;, &#123;self.y&#125;)&apos;.format(self=self)</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; str(Point(4, 2))</span><br><span class="line">&apos;Point(4, 2)&apos;</span><br><span class="line">Accessing arguments’ items:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; coord = (3, 5)</span><br><span class="line">&gt;&gt;&gt; &apos;X: &#123;0[0]&#125;;  Y: &#123;0[1]&#125;&apos;.format(coord)</span><br><span class="line">&apos;X: 3;  Y: 5&apos;</span><br><span class="line">Replacing %s and %r:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; &quot;repr() shows quotes: &#123;!r&#125;; str() doesn&apos;t: &#123;!s&#125;&quot;.format(&apos;test1&apos;, &apos;test2&apos;)</span><br><span class="line">&quot;repr() shows quotes: &apos;test1&apos;; str() doesn&apos;t: test2&quot;</span><br><span class="line">Aligning the text and specifying a width:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; &apos;&#123;:&lt;30&#125;&apos;.format(&apos;left aligned&apos;)</span><br><span class="line">&apos;left aligned                  &apos;</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;:&gt;30&#125;&apos;.format(&apos;right aligned&apos;)</span><br><span class="line">&apos;                 right aligned&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;:^30&#125;&apos;.format(&apos;centered&apos;)</span><br><span class="line">&apos;           centered           &apos;</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;:*^30&#125;&apos;.format(&apos;centered&apos;)  # use &apos;*&apos; as a fill char</span><br><span class="line">&apos;***********centered***********&apos;</span><br><span class="line">Replacing %+f, %-f, and % f and specifying a sign:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; &apos;&#123;:+f&#125;; &#123;:+f&#125;&apos;.format(3.14, -3.14)  # show it always</span><br><span class="line">&apos;+3.140000; -3.140000&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;: f&#125;; &#123;: f&#125;&apos;.format(3.14, -3.14)  # show a space for positive numbers</span><br><span class="line">&apos; 3.140000; -3.140000&apos;</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;:-f&#125;; &#123;:-f&#125;&apos;.format(3.14, -3.14)  # show only the minus -- same as &apos;&#123;:f&#125;; &#123;:f&#125;&apos;</span><br><span class="line">&apos;3.140000; -3.140000&apos;</span><br><span class="line">Replacing %x and %o and converting the value to different bases:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; # format also supports binary numbers</span><br><span class="line">&gt;&gt;&gt; &quot;int: &#123;0:d&#125;;  hex: &#123;0:x&#125;;  oct: &#123;0:o&#125;;  bin: &#123;0:b&#125;&quot;.format(42)</span><br><span class="line">&apos;int: 42;  hex: 2a;  oct: 52;  bin: 101010&apos;</span><br><span class="line">&gt;&gt;&gt; # with 0x, 0o, or 0b as prefix:</span><br><span class="line">&gt;&gt;&gt; &quot;int: &#123;0:d&#125;;  hex: &#123;0:#x&#125;;  oct: &#123;0:#o&#125;;  bin: &#123;0:#b&#125;&quot;.format(42)</span><br><span class="line">&apos;int: 42;  hex: 0x2a;  oct: 0o52;  bin: 0b101010&apos;</span><br><span class="line">Using the comma as a thousands separator:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; &apos;&#123;:,&#125;&apos;.format(1234567890)</span><br><span class="line">&apos;1,234,567,890&apos;</span><br><span class="line">Expressing a percentage:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; points = 19</span><br><span class="line">&gt;&gt;&gt; total = 22</span><br><span class="line">&gt;&gt;&gt; &apos;Correct answers: &#123;:.2%&#125;&apos;.format(points/total)</span><br><span class="line">&apos;Correct answers: 86.36%&apos;</span><br><span class="line">Using type-specific formatting:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; import datetime</span><br><span class="line">&gt;&gt;&gt; d = datetime.datetime(2010, 7, 4, 12, 15, 58)</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;:%Y-%m-%d %H:%M:%S&#125;&apos;.format(d)</span><br><span class="line">&apos;2010-07-04 12:15:58&apos;</span><br><span class="line">Nesting arguments and more complex examples:</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; for align, text in zip(&apos;&lt;^&gt;&apos;, [&apos;left&apos;, &apos;center&apos;, &apos;right&apos;]):</span><br><span class="line">...     &apos;&#123;0:&#123;fill&#125;&#123;align&#125;16&#125;&apos;.format(text, fill=align, align=align)</span><br><span class="line">...</span><br><span class="line">&apos;left&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&apos;</span><br><span class="line">&apos;^^^^^center^^^^^&apos;</span><br><span class="line">&apos;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;right&apos;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; octets = [192, 168, 0, 1]</span><br><span class="line">&gt;&gt;&gt; &apos;&#123;:02X&#125;&#123;:02X&#125;&#123;:02X&#125;&#123;:02X&#125;&apos;.format(*octets)</span><br><span class="line">&apos;C0A80001&apos;</span><br><span class="line">&gt;&gt;&gt; int(_, 16)</span><br><span class="line">3232235521</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; width = 5</span><br><span class="line">&gt;&gt;&gt; for num in range(5,12):</span><br><span class="line">...     for base in &apos;dXob&apos;:</span><br><span class="line">...         print(&apos;&#123;0:&#123;width&#125;&#123;base&#125;&#125;&apos;.format(num, base=base, width=width), end=&apos; &apos;)</span><br><span class="line">...     print()</span><br><span class="line">...</span><br><span class="line">    5     5     5   101</span><br><span class="line">    6     6     6   110</span><br><span class="line">    7     7     7   111</span><br><span class="line">    8     8    10  1000</span><br><span class="line">    9     9    11  1001</span><br><span class="line">   10     A    12  1010</span><br><span class="line">   11     B    13  1011</span><br><span class="line"></span><br><span class="line">来源：</span><br><span class="line">python362.chm--string chapter</span><br></pre></td></tr></table></figure>
<h5 id="Python字符串间隔固定位置插入分割符号"><a href="#Python字符串间隔固定位置插入分割符号" class="headerlink" title="Python字符串间隔固定位置插入分割符号"></a>Python字符串间隔固定位置插入分割符号</h5><p><a href="https://stackoverflow.com/questions/10055631/how-do-i-insert-spaces-into-a-string-using-the-range-function" target="_blank" rel="noopener">https://stackoverflow.com/questions/10055631/how-do-i-insert-spaces-into-a-string-using-the-range-function</a><br><a href="https://stackoverflow.com/questions/2657693/insert-a-newline-character-every-64-characters-using-python" target="_blank" rel="noopener">https://stackoverflow.com/questions/2657693/insert-a-newline-character-every-64-characters-using-python</a><br><a href="https://stackoverflow.com/questions/9475241/split-string-every-nth-character" target="_blank" rel="noopener">https://stackoverflow.com/questions/9475241/split-string-every-nth-character</a><br><a href="https://stackoverflow.com/questions/35662526/python-3-4-inserting-spaces-at-regular-intervals" target="_blank" rel="noopener">https://stackoverflow.com/questions/35662526/python-3-4-inserting-spaces-at-regular-intervals</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; b</span><br><span class="line">&apos;043E1301001600010028AAE050A000070000000A0001&apos;</span><br><span class="line">&gt;&gt;&gt; &quot; &quot;.join(b[i:i+2] for i in range(0, len(b), 2))</span><br><span class="line">&apos;04 3E 13 01 00 16 00 01 00 28 AA E0 50 A0 00 07 00 00 00 0A 00 01&apos;</span><br><span class="line">&gt;&gt;&gt; s = &apos;Hello how are you today Joe&apos;</span><br><span class="line">&gt;&gt;&gt; &quot; &quot;.join(b[i:i+2] for i in range(0, len(b), 2))</span><br><span class="line">&apos;04 3E 13 01 00 16 00 01 00 28 AA E0 50 A0 00 07 00 00 00 0A 00 01&apos;</span><br><span class="line">&gt;&gt;&gt; &apos; &apos;.join(s[i:i+2] for i in range(0, len(s), 2)).split()</span><br><span class="line">[&apos;He&apos;, &apos;ll&apos;, &apos;o&apos;, &apos;ho&apos;, &apos;w&apos;, &apos;ar&apos;, &apos;e&apos;, &apos;yo&apos;, &apos;u&apos;, &apos;to&apos;, &apos;da&apos;, &apos;y&apos;, &apos;Jo&apos;, &apos;e&apos;]</span><br><span class="line">&gt;&gt;&gt; &apos; &apos;.join(&apos; &apos;.join(s[i:i+2] for i in range(0, len(s), 2)).split())</span><br><span class="line">&apos;He ll o ho w ar e yo u to da y Jo e&apos;</span><br><span class="line"></span><br><span class="line">def insert_spaces(text, s_range):</span><br><span class="line">...     return &apos; &apos;.join(text[start:end] for start, end in</span><br><span class="line">...         zip([0] + list(s_range), list(s_range) + [len(text)])).strip()</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; s_range = range(5, 20, 4)</span><br><span class="line">&gt;&gt;&gt; text = &apos;Hello how are you today Joe&apos;</span><br><span class="line">&gt;&gt;&gt; lst = [0] + list(s_range), list(s_range) + [len(text)]</span><br><span class="line">&gt;&gt;&gt; lst</span><br><span class="line">([0, 5, 9, 13, 17], [5, 9, 13, 17, 27])</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; b</span><br><span class="line">&apos;043E1301001600010028AAE050A000070000000A0001&apos;</span><br><span class="line">&gt;&gt;&gt; &apos; &apos;.join(re.findall(r&apos;.&#123;1,2&#125;&apos;, b))</span><br><span class="line">&apos;04 3E 13 01 00 16 00 01 00 28 AA E0 50 A0 00 07 00 00 00 0A 00 01&apos;</span><br><span class="line">&gt;&gt;&gt; &apos; &apos;.join(re.findall(r&apos;.&#123;2&#125;&apos;, b))</span><br><span class="line">&apos;04 3E 13 01 00 16 00 01 00 28 AA E0 50 A0 00 07 00 00 00 0A 00 01&apos;</span><br></pre></td></tr></table></figure>
<h5 id="Python字符串转日期"><a href="#Python字符串转日期" class="headerlink" title="Python字符串转日期"></a>Python字符串转日期</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; timestr = &apos;2017-09-20 16:20:30&apos;</span><br><span class="line">&gt;&gt;&gt; timeinst = datetime.datetime.strptime(timestr, &apos;%Y-%m-%d %H:%M:%S&apos;)</span><br><span class="line">&gt;&gt;&gt; timeinst</span><br><span class="line">datetime.datetime(2017, 9, 20, 16, 20, 30)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; dt = datetime.strptime(&quot;21/11/06 16:30&quot;, &quot;%d/%m/%y %H:%M&quot;)</span><br><span class="line">&gt;&gt;&gt; dt</span><br><span class="line">datetime.datetime(2006, 11, 21, 16, 30)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; timestr = datetime.datetime(year=2010, month=12, day=11, hour=16, minute=31, second=45, microsecond=23)</span><br><span class="line">&gt;&gt;&gt; timestr</span><br><span class="line">datetime.datetime(2010, 12, 11, 16, 31, 45, 23)</span><br><span class="line">&gt;&gt;&gt; timestr.year</span><br><span class="line">2010</span><br><span class="line">&gt;&gt;&gt; timestr.month</span><br><span class="line">12</span><br><span class="line">&gt;&gt;&gt; timestr.day</span><br><span class="line">11</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">%m Month as a zero-padded decimal number. 01, 02, ..., 12</span><br><span class="line">%y Year without century as a zero-padded decimal number. 00, 01, ..., 99</span><br><span class="line">%Y Year with century as a decimal number. 0001, 0002, ..., 2013, 2014, ..., 9998, 9999</span><br><span class="line">%H Hour (24-hour clock) as a zero-padded decimal number. 00, 01, ..., 23</span><br><span class="line">%I Hour (12-hour clock) as a zero-padded decimal number. 01, 02, ..., 12</span><br><span class="line">%p Locale’s equivalent of either AM or PM. AM, PM (en_US); am, pm (de_DE)</span><br><span class="line">%M Minute as a zero-padded decimal number. 00, 01, ..., 59</span><br><span class="line">%S Second as a zero-padded decimal number. 00, 01, ..., 59</span><br><span class="line">%f Microsecond as a decimal number, zero-padded on the left. 000000, 000001, ..., 999999</span><br></pre></td></tr></table></figure>
<h5 id="datetime显示开始执行时间和结束执行时间"><a href="#datetime显示开始执行时间和结束执行时间" class="headerlink" title="datetime显示开始执行时间和结束执行时间"></a>datetime显示开始执行时间和结束执行时间</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    print(&quot;Script start execution at %s\n\n&quot; % str(datetime.datetime.now()))</span><br><span class="line">    time_start = time.time()</span><br><span class="line">    main()</span><br><span class="line">    print(&quot;\n\nScript end execution at %s&quot; % str(datetime.datetime.now()))</span><br><span class="line">    print(&quot;Total Elapsed Time: %s seconds\n&quot; % (time.time() - time_start))</span><br></pre></td></tr></table></figure>
<h5 id="判断字符串是否为空"><a href="#判断字符串是否为空" class="headerlink" title="判断字符串是否为空"></a>判断字符串是否为空</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if len(str):</span><br><span class="line">    print(&apos;string not null&apos;)</span><br><span class="line"></span><br><span class="line">if str.strip():</span><br><span class="line">    print(&apos;string not null&apos;)</span><br><span class="line"></span><br><span class="line">if str != &apos;&apos;:</span><br><span class="line">    print(&apos;string not null&apos;)</span><br></pre></td></tr></table></figure>
<h5 id="获取指定路径下所有指定后缀的文件"><a href="#获取指定路径下所有指定后缀的文件" class="headerlink" title="获取指定路径下所有指定后缀的文件"></a>获取指定路径下所有指定后缀的文件</h5><p><a href="http://outofmemory.cn/code-snippet/7194/python-get-specify-path-suo-exist-specify-houzhui-file" target="_blank" rel="noopener">http://outofmemory.cn/code-snippet/7194/python-get-specify-path-suo-exist-specify-houzhui-file</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"># 获取指定路径下所有指定后缀的文件</span><br><span class="line"># dir 指定路径</span><br><span class="line"># ext 指定后缀，链表&amp;不需要带点 或者不指定。例子：[&apos;xml&apos;, &apos;java&apos;]</span><br><span class="line">def GetFileFromThisRootDir(dir,ext = None):</span><br><span class="line">    allfiles = []</span><br><span class="line">    needExtFilter = (ext != None)</span><br><span class="line">    for root,dirs,files in os.walk(dir):</span><br><span class="line">        for filespath in files:</span><br><span class="line">            filepath = os.path.join(root, filespath)</span><br><span class="line">            extension = os.path.splitext(filepath)[1][1:]</span><br><span class="line">            if needExtFilter and extension in ext:</span><br><span class="line">                allfiles.append(filepath)</span><br><span class="line">            elif not needExtFilter:</span><br><span class="line">                allfiles.append(filepath)</span><br><span class="line">    return allfiles</span><br><span class="line"></span><br><span class="line">递归调用，同时支持字符串，列表，元组等方式过滤文件</span><br><span class="line">@staticmethod</span><br><span class="line">def get_all_log_files(dir_path, suffix=None):</span><br><span class="line">    if os.path.exists(dir_path):</span><br><span class="line">        if os.path.isdir(dir_path):</span><br><span class="line">            file_list = os.listdir(dir_path)</span><br><span class="line"></span><br><span class="line">            for file in file_list:</span><br><span class="line">                file_path = os.path.join(dir_path, file)</span><br><span class="line"></span><br><span class="line">                if os.path.isdir(file_path):</span><br><span class="line">                    LogHandleClass.get_all_log_files(file_path, suffix)</span><br><span class="line">                else:</span><br><span class="line">                    if suffix is None:</span><br><span class="line">                        LogHandleClass.log_file_list.append(file_path)</span><br><span class="line">                    else:</span><br><span class="line">                        # suffix = [&apos;log&apos;, &apos;xml&apos;]</span><br><span class="line">                        if isinstance(suffix, list) or isinstance(suffix, tuple):</span><br><span class="line">                            if os.path.splitext(os.path.split(file_path)[1])[1][1:] in suffix:</span><br><span class="line">                                LogHandleClass.log_file_list.append(file_path)</span><br><span class="line">                        elif isinstance(suffix, str):</span><br><span class="line">                            # suffix = &apos;*.log&apos;</span><br><span class="line">                            # if &apos;*.&apos; in suffix:  # abc*.log will match this condition</span><br><span class="line">                            if 0 == suffix.find(r&apos;*.&apos;):</span><br><span class="line">                                if fnmatch.fnmatch(file_path, suffix):</span><br><span class="line">                                    LogHandleClass.log_file_list.append(file_path)</span><br><span class="line">                            else:</span><br><span class="line">                                # abc*d.log ==&gt; log</span><br><span class="line">                                suffix = re.sub(r&apos;^.*\.&apos;, &apos;&apos;, suffix)</span><br><span class="line">                                if os.path.splitext(os.path.split(file_path)[1])[1][1:] == suffix:</span><br><span class="line">                                    LogHandleClass.log_file_list.append(file_path)</span><br><span class="line">                        else:</span><br><span class="line">                            raise SuffixFormatError(&apos;Unsupported suffix format, &apos;</span><br><span class="line">                                                    &apos;must be str, list or tuple, not %s &apos; % type(suffix))</span><br><span class="line"></span><br><span class="line">    return LogHandleClass.log_file_list</span><br><span class="line"></span><br><span class="line">使用glob模块，可以设置文件过滤</span><br><span class="line">import glob</span><br><span class="line">for filename in glob.glob(r&apos;c:\windows\*.exe&apos;):</span><br><span class="line">    print filename</span><br></pre></td></tr></table></figure></p>
<h5 id="Python文件遍历"><a href="#Python文件遍历" class="headerlink" title="Python文件遍历"></a>Python文件遍历</h5><p><a href="http://laocao.blog.51cto.com/480714/525140" target="_blank" rel="noopener">http://laocao.blog.51cto.com/480714/525140</a><br><a href="http://hackerxu.com/2014/07/09/file-contrl.html" target="_blank" rel="noopener">http://hackerxu.com/2014/07/09/file-contrl.html</a><br><a href="http://gohom.win/2016/01/14/py-oswalk/" target="_blank" rel="noopener">http://gohom.win/2016/01/14/py-oswalk/</a><br><a href="https://hexo2hexo.github.io/traverse-in-python/" target="_blank" rel="noopener">https://hexo2hexo.github.io/traverse-in-python/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">1. os.walk</span><br><span class="line">os.walk可以自顶向下或者自底向上遍历整个文件树，然后返回一个含有3个元素的tuple，(dirpath, dirnames, filenames)，要注意的是，os.walk()会返回一个generater，所以调用的时候一定要放到for循环中。</span><br><span class="line">    # -*- coding: utf-8 -*-</span><br><span class="line">    import os</span><br><span class="line">    def Test1(rootDir):</span><br><span class="line">        list_dirs = os.walk(rootDir)</span><br><span class="line">        for root, dirs, files in list_dirs:</span><br><span class="line">            for d in dirs:</span><br><span class="line">                print os.path.join(root, d)</span><br><span class="line">            for f in files:</span><br><span class="line">                print os.path.join(root, f)</span><br><span class="line"></span><br><span class="line">2. os.listdir</span><br><span class="line">    # -*- coding: utf-8 -*-</span><br><span class="line">    import os</span><br><span class="line">    def Test2(rootDir):</span><br><span class="line">        for lists in os.listdir(rootDir):</span><br><span class="line">            path = os.path.join(rootDir, lists)</span><br><span class="line">            print path</span><br><span class="line">            if os.path.isdir(path):</span><br><span class="line">                Test2(path)</span><br><span class="line"></span><br><span class="line">3. 区别如下：</span><br><span class="line">    E:\TEST</span><br><span class="line">    │--A</span><br><span class="line">    │  │--A-A</span><br><span class="line">    │  │  │--A-A-A.txt</span><br><span class="line">    │  │--A-B.txt</span><br><span class="line">    │  │--A-C</span><br><span class="line">    │  │  │--A-B-A.txt</span><br><span class="line">    │  │--A-D.txt</span><br><span class="line">    │--B.txt</span><br><span class="line">    │--C</span><br><span class="line">    │  │--C-A.txt</span><br><span class="line">    │  │--C-B.txt</span><br><span class="line">    │--D.txt</span><br><span class="line">    │--E</span><br><span class="line"></span><br><span class="line">    Test1(&apos;E:\TEST&apos;)</span><br><span class="line">    print &apos;=======================================&apos;</span><br><span class="line">    Test2(&apos;E:\TEST&apos;)</span><br><span class="line"></span><br><span class="line">    &gt;&gt;&gt;</span><br><span class="line">    E:\TEST\A</span><br><span class="line">    E:\TEST\C</span><br><span class="line">    E:\TEST\E</span><br><span class="line">    E:\TEST\B.txt</span><br><span class="line">    E:\TEST\D.txt</span><br><span class="line">    E:\TEST\A\A-A</span><br><span class="line">    E:\TEST\A\A-C</span><br><span class="line">    E:\TEST\A\A-B.txt</span><br><span class="line">    E:\TEST\A\A-D.txt</span><br><span class="line">    E:\TEST\A\A-A\A-A-A.txt</span><br><span class="line">    E:\TEST\A\A-C\A-B-A.txt</span><br><span class="line">    E:\TEST\C\C-A.txt</span><br><span class="line">    E:\TEST\C\C-B.txt</span><br><span class="line">    =======================================</span><br><span class="line">    E:\TEST\A</span><br><span class="line">    E:\TEST\A\A-A</span><br><span class="line">    E:\TEST\A\A-A\A-A-A.txt</span><br><span class="line">    E:\TEST\A\A-B.txt</span><br><span class="line">    E:\TEST\A\A-C</span><br><span class="line">    E:\TEST\A\A-C\A-B-A.txt</span><br><span class="line">    E:\TEST\A\A-D.txt</span><br><span class="line">    E:\TEST\B.txt</span><br><span class="line">    E:\TEST\C</span><br><span class="line">    E:\TEST\C\C-A.txt</span><br><span class="line">    E:\TEST\C\C-B.txt</span><br><span class="line">    E:\TEST\D.txt</span><br><span class="line">    E:\TEST\E</span><br><span class="line"></span><br><span class="line">4. 打印目录树</span><br><span class="line">    def Test3(rootDir, level=1):</span><br><span class="line">        if level==1: print rootDir</span><br><span class="line">        for lists in os.listdir(rootDir):</span><br><span class="line">            path = os.path.join(rootDir, lists)</span><br><span class="line">            print &apos;│  &apos;*(level-1)+&apos;│--&apos;+lists</span><br><span class="line">            if os.path.isdir(path):</span><br><span class="line">                Test3(path, level+1)</span><br></pre></td></tr></table></figure></p>
<h5 id="python遍历某个文件夹下的全部文件"><a href="#python遍历某个文件夹下的全部文件" class="headerlink" title="python遍历某个文件夹下的全部文件"></a>python遍历某个文件夹下的全部文件</h5><p><a href="http://www.huqi.tk/index.php/2017/04/22/python_os_path/" target="_blank" rel="noopener">http://www.huqi.tk/index.php/2017/04/22/python_os_path/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line">在前面的一小节中，我们谈到了对文件的读写操作，这一节我们谈谈使用python遍历某个文件夹下的全部文件，因为在实际的项目场景中这种情况非常常见，如在apk的逆向工程中可能需要在把dex文件反编译后产生的smali文件中查找某一特定的字符串，然后进行替换操作。这个场景很显然就涉及到了对某一文件夹下所有文件进行遍历的过程。这个过程很显然是对文件，目录，路径进行操作，而这些很显然是属于操作系统管理的范畴，因此这些功能被定义在了python中的os模块和os.path模块，使用前需要import相应的模块。这一小节就讲讲python中这两个模块常用的和文件操作相关的重要函数。</span><br><span class="line"></span><br><span class="line">os模块</span><br><span class="line"></span><br><span class="line">os.listdir(path)</span><br><span class="line"></span><br><span class="line">该函数的功能是返回一个列表，该列表是path路径下的全部文件或者文件夹的名称，注意：返回的列表中是不会包含该path路径下的某个文件夹包含的子文件或者子文件夹，只会包含该路径下的文件夹与文件。path是传入的路径，通常是一个字符串。另外需要注意的是如果path不存在，会出现错误：WindowsError: [Error 3]，系统找不到指定路径，因此使用该函数之前一定要对路径是否存在进行判断，代码如下：</span><br><span class="line">if os.path.exists(dirPath):</span><br><span class="line">    file_list=os.listdir(dirPath)</span><br><span class="line"></span><br><span class="line">os.walk(top, topdown=True, onerror=None, followlinks=False)</span><br><span class="line"></span><br><span class="line">该函数的功能是通过遍历top路径以生成一个目录树的文件名(Generate the file names in a directory tree by walking the tree)。该函数参数很多，但是后面几个参数都是带默认值参数，通常我们只需要关心第一个参数top，表示的是传入的top目录的路径。该函数返回一个三元组tuple(dirpath, dirnames, filenames),其中dirpath表示top路径下的全部目录的路径名称，通常是一个字符串，第二个参数表示的是dirpath目录下的全部子文件夹的名称列表(dirnames is a list of the names of the subdirectories in dirpath)，filenames表示的是dirpath目录下的非文件夹文件的列表（filenames is a list of the names of the non-directory files in dirpath），需要注意的是第二个参数子目录名和第三个参数文件名都是没带根路径的，因此如果要得到完整的目录名或者文件名需要加上根路径dirpath。遍历某个文件夹下的全部文件的代码如下：</span><br><span class="line">import os</span><br><span class="line">dirPath=&apos;C:/Users/htq/Desktop/test&apos;</span><br><span class="line">for dirpath,dirnames,filenames in os.walk(dirPath):</span><br><span class="line">    for file in filenames:</span><br><span class="line">        print os.path.join(dirpath, file)#将dirpath和file连接起来得到完整的文件名</span><br><span class="line"></span><br><span class="line">os.sep/os.linesep</span><br><span class="line"></span><br><span class="line">    os.sep 表示的是系统路径分隔符，在不同平台上表示不同，如windows平台上用’\\’表示而linux平台用’/’表示，因此为了保证我们所写的代码能够跨平台运行，请不要在程序中使用’\\’或者’/’来连接路径，而是使用os.sep</span><br><span class="line">    os.linesep表示的是行结束符，在不同的平台表示不同，如Windows使用’\r\n’，Linux使用’\n’而Mac使用’\r’。另外在上一小节python文件操作中我们也提到了，write()和writelines()写入文件时是不包含行结束符的，因此如果需要在写入文件时插入行结束符的话需要我们要自己处理这些情况</span><br><span class="line"></span><br><span class="line">os.path模块</span><br><span class="line"></span><br><span class="line">os.path.exists(path)</span><br><span class="line"></span><br><span class="line">该函数用来判断path路径指向的文件或者目录是否存在，如果不存在返回false</span><br><span class="line"></span><br><span class="line">os.path.isdir(path)/os.path.isfile(path)</span><br><span class="line"></span><br><span class="line">    os.path.isdir(path)判断path是否为目录，如果是返回true否则返回false</span><br><span class="line">    os.path.isfile(path)判断path是否为文件，如果是返回true否则返回false</span><br><span class="line"></span><br><span class="line">那么讲到这里，然后在根据前面我们提到的os模块的os.listdir(path),我们自然可以想到一种递归的方式来遍历某一路径下的全部文件，首先通过os.listdir(path)得到path路径下的全部文件，然后使用os.path.isdir(path)/os.path.isfile(path)来判断，如果该文件为目录那么我们递归调用，否则如果为文件，那么遍历输出，这样就可以实现和前面walk一样的效果。代码如下：</span><br><span class="line">import os</span><br><span class="line">def listDir(rootDir):</span><br><span class="line">    if not os.path.exists(rootDir):</span><br><span class="line">        return</span><br><span class="line">    for dirname in os.listdir(rootDir):</span><br><span class="line">        filename = os.path.join(rootDir, dirname)</span><br><span class="line">        if (os.path.isfile(filename)):</span><br><span class="line">            print filename</span><br><span class="line">        else:</span><br><span class="line">            listDir(filename)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">虽然这中方式也可以实现遍历文件夹下的全部文件，但是因为使用的是递归的方式，效率应该比walk要低一些，另外从代码量上看也比使用walk要麻烦一些，唯一的好处就是从逻辑上理解起来比使用walk要清晰明了，因此尽量使用os.walk(path)的方式来替代这种方式。</span><br><span class="line"></span><br><span class="line">os.path.join(path, *paths)</span><br><span class="line"></span><br><span class="line">用来连接一个或多个目录与文件名/目录，前面说过在不同的平台上路径分隔符不同，因此为了做到跨平台，不要直接使用’\\’或者’/’的方式来连接目录与文件，应该使用os.sep的方式或者使用该函数，这样如果需要连接的字符串很多的时候会更简单</span><br><span class="line"></span><br><span class="line">os.path.split(path)</span><br><span class="line"></span><br><span class="line">该函数用来分割文件名和目录，如果path是目录，它会将最后一级目录作为文件名而分离，返回的是一个二元祖pair(head,tail)，注意该函数不会判断路径是否存在，如果不存在也不会出错，但返回的结果可能不是我们预期的结果</span><br><span class="line"></span><br><span class="line">os.path.splitext(path)</span><br><span class="line"></span><br><span class="line">该函数用来分离文件名和扩展名，返回的是一个二元组pair(root,ext)，其中root+ext==path,因此如果我们要得到一个文件的后缀类型需要这么使用：</span><br><span class="line">ext=os.path.splitext(dirPath)[1]</span><br><span class="line"></span><br><span class="line">这个函数的使用场景很多，如在遍历某一个文件夹下的某一特定类型的文件如.txt，.smali文件。</span><br><span class="line"></span><br><span class="line">os.path.basename(path)</span><br><span class="line"></span><br><span class="line">该函数用来得到path路径的文件名（如果path为目录则为目录名），如：path=’C:/Users/htq/Desktop’ 则返回’Desktop’,path=’C:/Users/htq/Desktop/test.py’则返回’test.py’，如果path是以路径分隔符结尾，那么返回一个空字符串，如path=’C:/Users/htq/Desktop/’ ，则返回空字符串”。</span><br><span class="line"></span><br><span class="line">os.getcwd()</span><br><span class="line"></span><br><span class="line">获取当前目录</span><br><span class="line">&gt;&gt;&gt; os.getcwd()</span><br><span class="line">&apos;/home/hogan&apos;</span><br><span class="line"></span><br><span class="line">In[5]: os.getcwd()</span><br><span class="line">Out[5]: &apos;C:\\Users\\hogan\\Documents&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">os.path.dirname(path)</span><br><span class="line"></span><br><span class="line">返回当前目录的父目录</span><br><span class="line">&gt;&gt;&gt; os.path.dirname(&apos;/home/hogan/test.txt&apos;)</span><br><span class="line">&apos;/home/hogan&apos;</span><br><span class="line"></span><br><span class="line">In[7]: os.path.dirname(os.getcwd())</span><br><span class="line">Out[7]: &apos;C:\\Users\\hogan&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">os.stat()</span><br><span class="line"></span><br><span class="line">获取文件属性</span><br><span class="line"></span><br><span class="line">检查文件是否为空</span><br><span class="line">&gt;&gt;&gt; import os</span><br><span class="line">&gt;&gt;&gt; os.stat(&quot;file&quot;).st_size == 0</span><br><span class="line">True</span><br><span class="line"></span><br><span class="line">判断目录是否为空</span><br><span class="line">if 0 == len(os.listdir(WVT_LOG_FOLDER)):</span><br><span class="line">    continue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">os.path.relpath(path[, start])</span><br><span class="line"></span><br><span class="line">返回自当前目录或者可选的start 目录的 path相对文件路径。这只是单纯的路径计算：不会访问文件系统以确认path 或者 start 的存在性或者属性。</span><br><span class="line"></span><br><span class="line">http://blog.csdn.net/use_my_heart/article/details/52239169</span><br><span class="line"></span><br><span class="line">    # 将每次运行的KS值存入一个文件，每次运行时加入文件，再读取文件画出连续一些天数的ks曲线图</span><br><span class="line">    if os.path.exists(&apos;./ks_accumulate.csv&apos;):</span><br><span class="line">        if os.path.getsize(&apos;./ks_accumulate.csv&apos;):</span><br><span class="line">            print(&apos;文件存在且不为空&apos;)</span><br><span class="line">            ks_temp.to_csv(&apos;./ks_accumulate.csv&apos;, mode=&apos;a&apos;, header=False, index=False)</span><br><span class="line">        else:</span><br><span class="line">            print(&apos;文件存在且为空&apos;)</span><br><span class="line">            ks_temp.to_csv(&apos;./ks_accumulate.csv&apos;, mode=&apos;a&apos;, index=False)</span><br><span class="line">    else:</span><br><span class="line">        print(&apos;文件不存在&apos;)</span><br><span class="line">        ks_temp.to_csv(&apos;./ks_accumulate.csv&apos;, mode=&apos;a&apos;, index=False)</span><br><span class="line"></span><br><span class="line">    ks_acc = pd.read_csv(&apos;./ks_accumulate.csv&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">代码实例</span><br><span class="line"></span><br><span class="line">应用场景：将某一文件夹及其子文件夹下的全部的txt文件中的某个字符串替换为指定的字符串，这个实例综合了上一节和这一节的内容，在实际项目的文件操作中很常见。</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">dirPath=&apos;C:/Users/htq/Desktop/test&apos;</span><br><span class="line">for dirpath,dirnames,filenames in os.walk(dirPath):</span><br><span class="line">    for file in filenames:</span><br><span class="line">        filename=os.path.join(dirpath, file)#将dirpath和file连接起来得到完整的文件名</span><br><span class="line">        print filename</span><br><span class="line">        if os.path.splitext(filename)[1]==&apos;.txt&apos;:</span><br><span class="line">            print filename</span><br><span class="line">            try:</span><br><span class="line">                with open(filename, &apos;r+&apos;) as fileObject:</span><br><span class="line">                    lines = fileObject.readlines()</span><br><span class="line">                    &apos;&apos;&apos;</span><br><span class="line">                    for line in lines:#这中方式不能修改lines中的值，使用索引访问的方式才可以</span><br><span class="line">                        line=line.replace(&apos;alibaba&apos;,&apos;tencent&apos;)</span><br><span class="line">                        print line</span><br><span class="line">                    &apos;&apos;&apos;</span><br><span class="line">                    for index in range(len(lines)):  # 此处使用索引的方式访问，才可以修改原来的值</span><br><span class="line">                        lines[index] = lines[index].replace(&apos;alibaba&apos;, &apos;tencent&apos;)</span><br><span class="line">                    fileObject.seek(0)  # 让文件指针移动到文件开始位置，然后写入处理后的数据</span><br><span class="line">                    fileObject.writelines(lines)</span><br><span class="line">            except IOError, e:</span><br><span class="line">                print &apos;could not open file:&apos;, e</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line">os.path.splitext(&apos;./hello.py&apos;)</span><br><span class="line">Out[5]: (&apos;./hello&apos;, &apos;.py&apos;)</span><br><span class="line"></span><br><span class="line">os.path.basename(&apos;./hello.py&apos;)</span><br><span class="line">Out[7]: &apos;hello.py&apos;</span><br><span class="line"></span><br><span class="line">os.path.dirname(&apos;./hello.py&apos;)</span><br><span class="line">Out[8]: &apos;.&apos;</span><br><span class="line"></span><br><span class="line">os.path.split(&apos;./hello.py&apos;)</span><br><span class="line">Out[9]: (&apos;.&apos;, &apos;hello.py&apos;)</span><br></pre></td></tr></table></figure></p>
<h5 id="Python删除文件和目录"><a href="#Python删除文件和目录" class="headerlink" title="Python删除文件和目录"></a>Python删除文件和目录</h5><p><a href="http://www.manongjc.com/article/975.html" target="_blank" rel="noopener">http://www.manongjc.com/article/975.html</a><br><a href="https://zhiwei.li/text/2010/11/08/python%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95/" target="_blank" rel="noopener">https://zhiwei.li/text/2010/11/08/python%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">下面来看一下python里面是如何删除一个文件及文件夹的~~</span><br><span class="line"></span><br><span class="line">首先引入OS模块</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">删除文件：</span><br><span class="line"></span><br><span class="line">os.remove()</span><br><span class="line"></span><br><span class="line">删除空目录：</span><br><span class="line"></span><br><span class="line">os.rmdir()</span><br><span class="line"></span><br><span class="line">递归删除空目录：</span><br><span class="line"></span><br><span class="line">os.removedirs()</span><br><span class="line"></span><br><span class="line">递归删除目录和文件（类似DOS命令DeleteTree）：</span><br><span class="line"></span><br><span class="line">方法1：</span><br><span class="line"></span><br><span class="line"># Delete everything reachable from the directory named in &apos;top&apos;,</span><br><span class="line"># assuming there are no symbolic links.</span><br><span class="line"># CAUTION:  This is dangerous!  For example, if top == &apos;/&apos;, it</span><br><span class="line"># could delete all your disk files.</span><br><span class="line">import os</span><br><span class="line">for root, dirs, files in os.walk(top, topdown=False):</span><br><span class="line">    for name in files:</span><br><span class="line">        os.remove(os.path.join(root, name))</span><br><span class="line">    for name in dirs:</span><br><span class="line">        os.rmdir(os.path.join(root, name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">方法2：利用python的成熟的模块</span><br><span class="line"></span><br><span class="line">import shutil</span><br><span class="line">shutil.rmtree()</span><br><span class="line"></span><br><span class="line">一行搞定 __import__(&apos;shutil&apos;).rmtree()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">os.remove(path)</span><br><span class="line">删除文件 path. 如果path是一个目录， 抛出 OSError错误。如果要删除目录，请使用rmdir().</span><br><span class="line">remove() 同 unlink() 的功能是一样的</span><br><span class="line">在Windows系统中，删除一个正在使用的文件，将抛出异常。在Unix中，目录表中的记录被删除，但文件的存储还在。</span><br><span class="line"></span><br><span class="line">os.removedirs(path)</span><br><span class="line">递归地删除目录。类似于rmdir(), 如果子目录被成功删除， removedirs() 将会删除父目录；但子目录没有成功删除，将抛出错误。</span><br><span class="line">举个例子， os.removedirs(“foo/bar/baz”) 将首先删除 “foo/bar/ba”目录，然后再删除foo/bar 和 foo, 如果他们是空的话</span><br><span class="line">如果子目录不能成功删除，将 抛出 OSError异常</span><br><span class="line"></span><br><span class="line">os.rmdir(path)</span><br><span class="line">删除目录 path，要求path必须是个空目录，否则抛出OSError错误</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">清空一个目录</span><br><span class="line">def clean_folder(folder_path):</span><br><span class="line">    if os.path.exists(folder_path):</span><br><span class="line">        if os.path.isfile(folder_path):</span><br><span class="line">            os.remove(folder_path)</span><br><span class="line">            os.makedirs(folder_path)</span><br><span class="line">        elif os.path.isdir(folder_path):</span><br><span class="line">            file_list = os.listdir(folder_path)</span><br><span class="line"></span><br><span class="line">            for file_name in file_list:</span><br><span class="line">                file_path = os.path.join(folder_path, file_name)</span><br><span class="line"></span><br><span class="line">                if os.path.isdir(file_path):</span><br><span class="line">                    shutil.rmtree(file_path)</span><br><span class="line">                elif os.path.isfile(file_path):</span><br><span class="line">                    os.remove(file_path)</span><br><span class="line">    else:</span><br><span class="line">        os.makedirs(folder_path)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">递归删除目录</span><br><span class="line">#! /usr/bin/python</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line">def del_dir_tree(path):</span><br><span class="line">    &apos;&apos;&apos; 递归删除目录及其子目录,　子文件&apos;&apos;&apos;</span><br><span class="line">    if os.path.isfile(path):</span><br><span class="line">        try:</span><br><span class="line">            os.remove(path)</span><br><span class="line">        except Exception, e:</span><br><span class="line">            #pass</span><br><span class="line">            print e</span><br><span class="line">    elif os.path.isdir(path):</span><br><span class="line">        for item in os.listdir(path):</span><br><span class="line">            itempath = os.path.join(path, item)</span><br><span class="line">            del_dir_tree(itempath)</span><br><span class="line">        try:</span><br><span class="line">            os.rmdir(path)   # 删除空目录</span><br><span class="line">        except Exception, e:</span><br><span class="line">            #pass</span><br><span class="line">            print e</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line"></span><br><span class="line">    dirname = &apos;/home/xx/log&apos;</span><br><span class="line">    del_dir_tree(dirname)</span><br></pre></td></tr></table></figure></p>
<h5 id="Python文件复制拷贝"><a href="#Python文件复制拷贝" class="headerlink" title="Python文件复制拷贝"></a>Python文件复制拷贝</h5><p><a href="http://python3-cookbook.readthedocs.io/zh_CN/latest/c13/p07_copy_move_files_and_directories.html" target="_blank" rel="noopener">http://python3-cookbook.readthedocs.io/zh_CN/latest/c13/p07_copy_move_files_and_directories.html</a><br><a href="https://www.zhukun.net/archives/6326" target="_blank" rel="noopener">https://www.zhukun.net/archives/6326</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">文件的复制</span><br><span class="line">file类中没有提供专门的文件复制函数，因此只能通过使用文件的读写函数来实现文件的复制。这里仅仅给出范例：</span><br><span class="line">src = file(&quot;myfile.txt&quot;, &quot;w+&quot;)</span><br><span class="line">temp = [&quot;hello world! \n&quot;]</span><br><span class="line">src.writelines(temp)</span><br><span class="line">src.close()</span><br><span class="line"></span><br><span class="line">src = file(&quot;myfile.txt&quot;, &quot;r+&quot;)</span><br><span class="line">des = file(&quot;myfile2.txt&quot;, &quot;w+&quot;)</span><br><span class="line">des.writelines(src.read())</span><br><span class="line">src.close()</span><br><span class="line">des.close()</span><br><span class="line"></span><br><span class="line">使用shutil来实现文件的拷贝</span><br><span class="line">shutil.copyfile(src, dst) #文件到文件的拷贝，其中dst必须是一个文件</span><br><span class="line">shutil.copy(src, dst) #文件拷贝，src必须是一个文件，dst可以是一个文件或者目录</span><br><span class="line">shutil.copy2(src, dst) #同上，但是拷贝的文件带着原有属性，类似于Linux系统里的cp -p命令</span><br><span class="line">shutil.move(src, dst) #移动一个文件或者目录到指定的位置，src和dst都可以是文件或者目录</span><br><span class="line">shutil.copytree(src, dst, symlinks=False, ignore=None) #目录的复制</span><br><span class="line"></span><br><span class="line">import shutil</span><br><span class="line">shutil.copyfile(&quot;myfile1.txt&quot;, &quot;myfile2.txt&quot;)</span><br><span class="line">shutil.move(&quot;myfile1.txt&quot;, &quot;../&quot;) #把myfile1.txt移动到当前目录的父目录，然后删除myfile1.txt</span><br><span class="line">shutil.move(&quot;myfile2.txt&quot;, &quot;myfile3.txt&quot;) #把myfile2.txt移动到当前目录并重命名myfile3.txt</span><br><span class="line">shutil.rmtree(&apos;c:\\test&apos;)  #删除整个文件夹（文件夹可以是非空的）</span><br><span class="line"></span><br><span class="line">更详细的shutil命令可以参考http://docs.python.org/2/library/shutil.html</span><br></pre></td></tr></table></figure></p>
<h5 id="os-mkdir与os-makedirs区别"><a href="#os-mkdir与os-makedirs区别" class="headerlink" title="os.mkdir与os.makedirs区别"></a>os.mkdir与os.makedirs区别</h5><p><a href="https://github.com/dokelung/Python-QA/blob/master/questions/standard_lib/os.mkdir%E5%92%8Cos.makedirs%E7%9A%84%E5%8D%80%E5%88%A5.md" target="_blank" rel="noopener">https://github.com/dokelung/Python-QA/blob/master/questions/standard_lib/os.mkdir%E5%92%8Cos.makedirs%E7%9A%84%E5%8D%80%E5%88%A5.md</a><br><a href="http://blog.csdn.net/ljl6158999/article/details/70807738" target="_blank" rel="noopener">http://blog.csdn.net/ljl6158999/article/details/70807738</a><br><a href="http://blog.csdn.net/l904126360/article/details/54944020" target="_blank" rel="noopener">http://blog.csdn.net/l904126360/article/details/54944020</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">os.mkdir 与 os.makedirs 的差別在于 os.makedirs 会递归地去建立目录，也就是说连同中继的目录也会一起建立，就类似於 Linux 中的 mkdir -p．</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; import os</span><br><span class="line">&gt;&gt;&gt; os.mkdir(&apos;foo/bar&apos;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">OSError: [Errno 2] No such file or directory: &apos;foo/bar&apos;</span><br><span class="line">&gt;&gt;&gt; os.makedirs(&apos;foo/bar&apos;)</span><br><span class="line"></span><br><span class="line">使用 os.mkdir 时，如果你给定的 path 参数是个多层的 path，如果某个中继的目录不存在(比如说上例中的 foo), Python 将会报错．</span><br><span class="line"></span><br><span class="line">但如果使用 os.makedirs 则 Python 会连同中间的目录一起建立．但有一点值得注意，当 path 末端的目录已经存在的话，os.makedirs 也是会引发例外．</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> 1.mkdir( path [,mode] )</span><br><span class="line">      作用：创建一个目录，可以是相对或者绝对路径，mode的默认模式是0777。</span><br><span class="line"></span><br><span class="line">      如果目录有多级，则创建最后一级。如果最后一级目录的上级目录有不存在的，则会抛出一个OSError。</span><br><span class="line"></span><br><span class="line"> 2.makedirs( path [,mode] )</span><br><span class="line">      作用： 创建递归的目录树，可以是相对或者绝对路径，mode的默认模式也是0777。</span><br><span class="line">      如果子目录创建失败或者已经存在，会抛出一个OSError的异常，Windows上Error 183即为目录已经存在的异常错误。如果path只有一级，与mkdir一样。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">很显然在创建多级目录且上级目录的存在未知时，使用makedirs比较方便，不容易出错。mark</span><br></pre></td></tr></table></figure></p>
<h5 id="Python文件操作"><a href="#Python文件操作" class="headerlink" title="Python文件操作"></a>Python文件操作</h5><p><a href="http://python.usyiyi.cn/translate/python_278/library/os.path.html" target="_blank" rel="noopener">http://python.usyiyi.cn/translate/python_278/library/os.path.html</a><br><a href="http://www.cnblogs.com/rollenholt/archive/2012/04/23/2466179.html" target="_blank" rel="noopener">http://www.cnblogs.com/rollenholt/archive/2012/04/23/2466179.html</a><br><a href="http://blog.csdn.net/longshenlmj/article/details/13294871" target="_blank" rel="noopener">http://blog.csdn.net/longshenlmj/article/details/13294871</a><br><a href="http://www.runoob.com/python/python-files-io.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-files-io.html</a><br><a href="http://www.runoob.com/python/os-file-methods.html" target="_blank" rel="noopener">http://www.runoob.com/python/os-file-methods.html</a><br><a href="http://wiki.jikexueyuan.com/project/explore-python/File-Directory/os.html" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/project/explore-python/File-Directory/os.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line">总是记不住API。昨晚写的时候用到了这些，但是没记住，于是就索性整理一下吧：</span><br><span class="line"></span><br><span class="line">python中对文件、文件夹（文件操作函数）的操作需要涉及到os模块和shutil模块。</span><br><span class="line"></span><br><span class="line">得到当前工作目录，即当前Python脚本工作的目录路径: os.getcwd()</span><br><span class="line"></span><br><span class="line">返回指定目录下的所有文件和目录名:os.listdir()</span><br><span class="line"></span><br><span class="line">函数用来删除一个文件:os.remove()</span><br><span class="line"></span><br><span class="line">删除多个目录：os.removedirs（r“c：\python”）</span><br><span class="line"></span><br><span class="line">检验给出的路径是否是一个文件：os.path.isfile()</span><br><span class="line"></span><br><span class="line">检验给出的路径是否是一个目录：os.path.isdir()</span><br><span class="line"></span><br><span class="line">判断是否是绝对路径：os.path.isabs()</span><br><span class="line"></span><br><span class="line">检验给出的路径是否真地存:os.path.exists()</span><br><span class="line"></span><br><span class="line">返回一个路径的目录名和文件名:os.path.split()     eg os.path.split(&apos;/home/swaroop/byte/code/poem.txt&apos;) 结果：(&apos;/home/swaroop/byte/code&apos;, &apos;poem.txt&apos;)</span><br><span class="line"></span><br><span class="line">分离扩展名：os.path.splitext()</span><br><span class="line"></span><br><span class="line">获取路径名：os.path.dirname()</span><br><span class="line"></span><br><span class="line">获取文件名：os.path.basename()</span><br><span class="line"></span><br><span class="line">运行shell命令: os.system()</span><br><span class="line"></span><br><span class="line">读取和设置环境变量:os.getenv() 与os.putenv()</span><br><span class="line"></span><br><span class="line">给出当前平台使用的行终止符:os.linesep    Windows使用&apos;\r\n&apos;，Linux使用&apos;\n&apos;而Mac使用&apos;\r&apos;</span><br><span class="line"></span><br><span class="line">指示你正在使用的平台：os.name       对于Windows，它是&apos;nt&apos;，而对于Linux/Unix用户，它是&apos;posix&apos;</span><br><span class="line"></span><br><span class="line">重命名：os.rename（old， new）</span><br><span class="line"></span><br><span class="line">创建多级目录：os.makedirs（r“c：\python\test”）</span><br><span class="line"></span><br><span class="line">创建单个目录：os.mkdir（“test”）</span><br><span class="line"></span><br><span class="line">获取文件属性：os.stat（file）</span><br><span class="line"></span><br><span class="line">修改文件权限与时间戳：os.chmod（file）</span><br><span class="line"></span><br><span class="line">终止当前进程：os.exit（）</span><br><span class="line"></span><br><span class="line">获取文件大小：os.path.getsize（filename）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">文件操作：</span><br><span class="line">os.mknod(&quot;test.txt&quot;)        创建空文件</span><br><span class="line">fp = open(&quot;test.txt&quot;,w)     直接打开一个文件，如果文件不存在则创建文件</span><br><span class="line"></span><br><span class="line">关于open 模式：</span><br><span class="line"></span><br><span class="line">w     以写方式打开，</span><br><span class="line">a     以追加模式打开 (从 EOF 开始, 必要时创建新文件)</span><br><span class="line">r+     以读写模式打开</span><br><span class="line">w+     以读写模式打开 (参见 w )</span><br><span class="line">a+     以读写模式打开 (参见 a )</span><br><span class="line">rb     以二进制读模式打开</span><br><span class="line">wb     以二进制写模式打开 (参见 w )</span><br><span class="line">ab     以二进制追加模式打开 (参见 a )</span><br><span class="line">rb+    以二进制读写模式打开 (参见 r+ )</span><br><span class="line">wb+    以二进制读写模式打开 (参见 w+ )</span><br><span class="line">ab+    以二进制读写模式打开 (参见 a+ )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fp.read([size])                     #size为读取的长度，以byte为单位</span><br><span class="line"></span><br><span class="line">fp.readline([size])                 #读一行，如果定义了size，有可能返回的只是一行的一部分</span><br><span class="line"></span><br><span class="line">fp.readlines([size])                #把文件每一行作为一个list的一个成员，并返回这个list。其实它的内部是通过循环调用readline()来实现的。如果提供size参数，size是表示读取内容的总长，也就是说可能只读到文件的一部分。</span><br><span class="line"></span><br><span class="line">fp.write(str)                      #把str写到文件中，write()并不会在str后加上一个换行符</span><br><span class="line"></span><br><span class="line">fp.writelines(seq)            #把seq的内容全部写到文件中(多行一次性写入)。这个函数也只是忠实地写入，不会在每行后面加上任何东西。</span><br><span class="line"></span><br><span class="line">fp.close()                        #关闭文件。python会在一个文件不用后自动关闭文件，不过这一功能没有保证，最好还是养成自己关闭的习惯。  如果一个文件在关闭后还对其进行操作会产生ValueError</span><br><span class="line"></span><br><span class="line">fp.flush()                                      #把缓冲区的内容写入硬盘</span><br><span class="line"></span><br><span class="line">fp.fileno()                                      #返回一个长整型的”文件标签“</span><br><span class="line"></span><br><span class="line">fp.isatty()                                      #文件是否是一个终端设备文件（unix系统中的）</span><br><span class="line"></span><br><span class="line">fp.tell()                                         #返回文件操作标记的当前位置，以文件的开头为原点</span><br><span class="line"></span><br><span class="line">fp.next()                                       #返回下一行，并将文件操作标记位移到下一行。把一个file用于for … in file这样的语句时，就是调用next()函数来实现遍历的。</span><br><span class="line"></span><br><span class="line">fp.seek(offset[,whence])              #将文件打操作标记移到offset的位置。这个offset一般是相对于文件的开头来计算的，一般为正数。但如果提供了whence参数就不一定了，whence可以为0表示从头开始计算，1表示以当前位置为原点计算。2表示以文件末尾为原点进行计算。需要注意，如果文件以a或a+的模式打开，每次进行写操作时，文件操作标记会自动返回到文件末尾。</span><br><span class="line"></span><br><span class="line">fp.truncate([size])                       #把文件裁成规定的大小，默认的是裁到当前文件操作标记的位置。如果size比文件的大小还要大，依据系统的不同可能是不改变文件，也可能是用0把文件补到相应的大小，也可能是以一些随机的内容加上去。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">目录操作：</span><br><span class="line">os.mkdir(&quot;file&quot;)                   创建目录</span><br><span class="line">复制文件：</span><br><span class="line">shutil.copyfile(&quot;oldfile&quot;,&quot;newfile&quot;)       oldfile和newfile都只能是文件</span><br><span class="line">shutil.copy(&quot;oldfile&quot;,&quot;newfile&quot;)            oldfile只能是文件夹，newfile可以是文件，也可以是目标目录</span><br><span class="line">复制文件夹：</span><br><span class="line">shutil.copytree(&quot;olddir&quot;,&quot;newdir&quot;)        olddir和newdir都只能是目录，且newdir必须不存在</span><br><span class="line">重命名文件（目录）</span><br><span class="line">os.rename(&quot;oldname&quot;,&quot;newname&quot;)       文件或目录都是使用这条命令</span><br><span class="line">移动文件（目录）</span><br><span class="line">shutil.move(&quot;oldpos&quot;,&quot;newpos&quot;)</span><br><span class="line">删除文件</span><br><span class="line">os.remove(&quot;file&quot;)</span><br><span class="line">删除目录</span><br><span class="line">os.rmdir(&quot;dir&quot;)只能删除空目录</span><br><span class="line">shutil.rmtree(&quot;dir&quot;)    空目录、有内容的目录都可以删</span><br><span class="line">转换目录</span><br><span class="line">os.chdir(&quot;path&quot;)   换路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">相关例子</span><br><span class="line"></span><br><span class="line"> 1 将文件夹下所有图片名称加上&apos;_fc&apos;</span><br><span class="line"></span><br><span class="line">python代码:</span><br><span class="line"></span><br><span class="line"># -*- coding:utf-8 -*-</span><br><span class="line">import re</span><br><span class="line">import os</span><br><span class="line">import time</span><br><span class="line">#str.split(string)分割字符串</span><br><span class="line">#&apos;连接符&apos;.join(list) 将列表组成字符串</span><br><span class="line">def change_name(path):</span><br><span class="line">    global i</span><br><span class="line">    if not os.path.isdir(path) and not os.path.isfile(path):</span><br><span class="line">        return False</span><br><span class="line">    if os.path.isfile(path):</span><br><span class="line">        file_path = os.path.split(path) #分割出目录与文件</span><br><span class="line">        lists = file_path[1].split(&apos;.&apos;) #分割出文件与文件扩展名</span><br><span class="line">        file_ext = lists[-1] #取出后缀名(列表切片操作)</span><br><span class="line">        img_ext = [&apos;bmp&apos;,&apos;jpeg&apos;,&apos;gif&apos;,&apos;psd&apos;,&apos;png&apos;,&apos;jpg&apos;]</span><br><span class="line">        if file_ext in img_ext:</span><br><span class="line">            os.rename(path,file_path[0]+&apos;/&apos;+lists[0]+&apos;_fc.&apos;+file_ext)</span><br><span class="line">            i+=1 #注意这里的i是一个陷阱</span><br><span class="line">        #或者</span><br><span class="line">        #img_ext = &apos;bmp|jpeg|gif|psd|png|jpg&apos;</span><br><span class="line">        #if file_ext in img_ext:</span><br><span class="line">        #    print(&apos;ok---&apos;+file_ext)</span><br><span class="line">    elif os.path.isdir(path):</span><br><span class="line">        for x in os.listdir(path):</span><br><span class="line">            change_name(os.path.join(path,x)) #os.path.join()在路径处理上很有用</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">img_dir = &apos;D:\\xx\\xx\\images&apos;</span><br><span class="line">img_dir = img_dir.replace(&apos;\\&apos;,&apos;/&apos;)</span><br><span class="line">start = time.time()</span><br><span class="line">i = 0</span><br><span class="line">change_name(img_dir)</span><br><span class="line">c = time.time() - start</span><br><span class="line">print(&apos;程序运行耗时:%0.2f&apos;%(c))</span><br><span class="line">print(&apos;总共处理了 %s 张图片&apos;%(i))</span><br><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line"></span><br><span class="line">程序运行耗时:0.11</span><br><span class="line">总共处理了 109 张图片</span><br></pre></td></tr></table></figure></p>
<h5 id="Python压缩解压模块"><a href="#Python压缩解压模块" class="headerlink" title="Python压缩解压模块"></a>Python压缩解压模块</h5><p><a href="http://python3-cookbook.readthedocs.io/zh_CN/latest/c05/p07_read_write_compressed_datafiles.html" target="_blank" rel="noopener">http://python3-cookbook.readthedocs.io/zh_CN/latest/c05/p07_read_write_compressed_datafiles.html</a><br><a href="http://blog.csdn.net/luoshengkim/article/details/46647423" target="_blank" rel="noopener">http://blog.csdn.net/luoshengkim/article/details/46647423</a><br><a href="http://www.jianshu.com/p/0c7b3365eec0" target="_blank" rel="noopener">http://www.jianshu.com/p/0c7b3365eec0</a><br><a href="http://www.cnblogs.com/PandaBamboo/p/3254449.html" target="_blank" rel="noopener">http://www.cnblogs.com/PandaBamboo/p/3254449.html</a><br><a href="http://blog.csdn.net/ekeuy/article/details/18303555" target="_blank" rel="noopener">http://blog.csdn.net/ekeuy/article/details/18303555</a><br><a href="http://m.xf166.com/share/201703/508681.html" target="_blank" rel="noopener">http://m.xf166.com/share/201703/508681.html</a><br><a href="http://blog.51cto.com/wangwei007/1045577" target="_blank" rel="noopener">http://blog.51cto.com/wangwei007/1045577</a><br><a href="http://blog.csdn.net/liyuan_669/article/details/27125287" target="_blank" rel="noopener">http://blog.csdn.net/liyuan_669/article/details/27125287</a><br><a href="http://blog.sina.com.cn/s/blog_8db5baf9010138q4.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_8db5baf9010138q4.html</a></p>
<p><a href="https://python.freelycode.com/contribution/detail/568" target="_blank" rel="noopener">https://python.freelycode.com/contribution/detail/568</a></p>
<p>如果你已经使用计算机一段时间，你可能遇到了.zip扩展名的文件。它们是可以保存许多其他文件，文件夹和子文件夹的压缩内容的特殊文件。这种类型的文件在使用互联网传输文件时非常有用。Python也可以用来压缩或解压文件，你知道吗？</p>
<p>本教程将教你如何在Python中使用zipfile模块，同时提取或压缩单个或多个文件。</p>
<p>压缩单个文件</p>
<p>这很容易，而且只需很少的代码。我们先导入zipfile模块，然后通过指定第二个参数为“w”在写模式下打开ZipFile对象。第一个参数是文件本身的路径。代码如下：</p>
<p><img src="/upload_image/python-usage-example/zip_single_file.png" alt="zip_single_file.png"></p>
<p>请注意，我的所有代码片段中使用了Windows样式格式指定路径;如果您使用的是Linux或Mac，则需要进行相应的更改。</p>
<p>可以指定不同的压缩方法来压缩文件。在Python 3.3版本中添加了新的BZIP2和LZMA方法，但有一些工具还不支持这两种压缩方法。因此，比较安全的用法是使用DEFLATED方法。你仍然可以尝试这些方法来查看压缩文件大小的差异。</p>
<p>压缩多个文件</p>
<p>这稍微有点复杂，因为你需要遍历所有文件。下面的代码展示了如何压缩指定文件夹下的所有扩展名为pdf的文件：</p>
<p><img src="/upload_image/python-usage-example/zip_multiple_file.png" alt="zip_multiple_file.png"></p>
<p>这一次，我们导入了os模块，并使用它的walk（）方法来遍历所有文件和子文件夹，并且只压缩pdf文件。你可以使用if语句为每种格式创建不同的归档文件。</p>
<p>如果不想保留目录结构，可以使用以下行将所有文件放在一起：</p>
<p><img src="/upload_image/python-usage-example/zip_multiple_file_no_structure.png" alt="zip_multiple_file_no_structure.png"></p>
<p>write（）方法接受三个参数：第一个参数是我们要压缩的文件的名称；第二个参数是可选的，可以为压缩文件指定不同的文件名；如果未指定任何内容，则使用默认名称。</p>
<p>提取所有文件</p>
<p>你可以使用extractall（）方法将所有文件和文件夹从zip文件解压缩到当前目录。你还可以将文件夹名称传递给extractall（），以解压缩特定目录中的所有文件和文件夹。如果文件夹不存在，此方法将会自动创建。代码如下：</p>
<p><img src="/upload_image/python-usage-example/unzip_all_files.png" alt="unzip_all_files.png"></p>
<p>如果想提取其中的多个文件，需要提供包含文件名称的列表。</p>
<p>提取单个文件</p>
<p>和提取多个文件相似。区别是，这次你需要指定文件名和解压目录；需要使用extract（）方法，而不是extractall（）。下面是一个提取单个文件的代码片段：</p>
<p><img src="/upload_image/python-usage-example/unzip_single_file.png" alt="unzip_single_file.png"></p>
<p>读取Zip文件</p>
<p>考虑以下场景：你需要查看zip存档是否包含特定文件。到目前为止，你唯一的选择是通过解压所有文件。同样，你也可能只提取大于特定大小的文件。其实zipfile模块允许我们查询存档的内容，而不必提取它。</p>
<p>使用ZipFile对象的namelist（）方法将按名称返回归档的所有成员的列表。要获取档案中特定文件的信息，可以使用ZipFile对象的getinfo（）方法。这将允许您访问特定文件的信息，例如文件的压缩前后的大小或其上次修改时间。</p>
<p>当有很多文件需要处理时，对所有文件逐个调用getinfo（）方法可能是一个令人讨厌的过程。在这种情况下，可以使用infolist（）方法返回包含归档中每个成员的ZipInfo对象的列表。列表中这些对象的顺序与实际zip文件的顺序相同。</p>
<p>您还可以使用read（file）方法从归档中直接读取特定文件的内容，其中file是要读取的文件的名称。为此，必须以读取或追加模式打开归档。</p>
<p>要从归档中获取单个文件的压缩大小，可以使用compress_size属性。同样，要知道未压缩的大小，可以使用file_size属性。</p>
<p>以下代码使用刚才讨论的属性和方法来提取大小低于1MB的文件。</p>
<p><img src="/upload_image/python-usage-example/read_zip_file.png" alt="read_zip_file.png"></p>
<p>要知道归档中特定文件最后修改的时间和日期，可以使用date_time属性。这将返回一个包含六个值的元组，分别对应年、月、日、日、时、分、秒。年份总是大于或等于1980，时、分、秒是从零计算的。</p>
<p><img src="/upload_image/python-usage-example/read_zip_file_02.png" alt="read_zip_file_02.png"></p>
<p>有关原始文件大小和压缩文件大小的信息可以帮助您决定是否值得压缩文件。我相信它可以用于其他一些场景。</p>
<p>最后的想法</p>
<p>从本教程中能看到，使用zipfile模块来压缩文件有很大的灵活性。可以根据类型、名称或大小将目录中的不同文件压缩到不同的归档。你还可以决定是否要保留目录结构。同样，在提取文件时，您可以根据自己的标准，如大小等，将它们提取到所需的位置。</p>
<p>实际上，通过编写我自己的代码来压缩和提取文件也是非常令人兴奋的。我希望你喜欢的教程，如果你有任何问题，请让我知道的意见。</p>
<p>英文原文：<a href="https://code.tutsplus.com/tutorials/compressing-and-extracting-files-in-python--cms-26816" target="_blank" rel="noopener">https://code.tutsplus.com/tutorials/compressing-and-extracting-files-in-python--cms-26816</a></p>
<h5 id="Python列表合并"><a href="#Python列表合并" class="headerlink" title="Python列表合并"></a>Python列表合并</h5><p><a href="https://taizilongxu.gitbooks.io/stackoverflow-about-python/content/65/README.html" target="_blank" rel="noopener">https://taizilongxu.gitbooks.io/stackoverflow-about-python/content/65/README.html</a><br><a href="http://www.cnblogs.com/NewZi/p/a-pythonic-method-to-merge-list.html" target="_blank" rel="noopener">http://www.cnblogs.com/NewZi/p/a-pythonic-method-to-merge-list.html</a><br><a href="http://tool.oschina.net/uploads/apidocs/python2.7.3/library/stdtypes.html#mutable-sequence-types" target="_blank" rel="noopener">http://tool.oschina.net/uploads/apidocs/python2.7.3/library/stdtypes.html#mutable-sequence-types</a><br><a href="https://zhidao.baidu.com/question/328728387.html" target="_blank" rel="noopener">https://zhidao.baidu.com/question/328728387.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; a = [1, 2, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; b = [6, 7, 8, 9, 0]</span><br><span class="line">&gt;&gt;&gt; c = a + b</span><br><span class="line">&gt;&gt;&gt; c</span><br><span class="line">[1, 2, 3, 4, 5, 6, 7, 8, 9, 0]</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; a[len(a):len(a)] = b</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[1, 2, 3, 4, 5, 6, 7, 8, 9, 0]</span><br><span class="line">&gt;&gt;&gt; b</span><br><span class="line">[6, 7, 8, 9, 0]</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; a</span><br><span class="line">[1, 2, 3, 4, 5, 6, 7, 8, 9, 0]</span><br><span class="line">&gt;&gt;&gt; b</span><br><span class="line">[6, 7, 8, 9, 0]</span><br><span class="line">&gt;&gt;&gt; a[2:2]</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; a[2:3]</span><br><span class="line">[3]</span><br><span class="line">&gt;&gt;&gt; a[0:1]</span><br><span class="line">[1]</span><br></pre></td></tr></table></figure></p>
<h5 id="Python随机字符串"><a href="#Python随机字符串" class="headerlink" title="Python随机字符串"></a>Python随机字符串</h5><p><a href="https://taizilongxu.gitbooks.io/stackoverflow-about-python/content/63/README.html" target="_blank" rel="noopener">https://taizilongxu.gitbooks.io/stackoverflow-about-python/content/63/README.html</a><br><a href="https://gist.github.com/hxer/9f03c978ad1fe8ccde26" target="_blank" rel="noopener">https://gist.github.com/hxer/9f03c978ad1fe8ccde26</a><br><a href="https://steemit.com/cn-programming/@oflyhigh/python" target="_blank" rel="noopener">https://steemit.com/cn-programming/@oflyhigh/python</a><br><a href="http://blog.csdn.net/heybob/article/details/45341241" target="_blank" rel="noopener">http://blog.csdn.net/heybob/article/details/45341241</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"># 生成字母列表</span><br><span class="line">https://zh.wikipedia.org/wiki/ASCII</span><br><span class="line">[chr(i) for i in range(97,123)]</span><br><span class="line">[chr(i) for i in range(33,126)]</span><br><span class="line"></span><br><span class="line"># 将n修改为字符串长度</span><br><span class="line">import os</span><br><span class="line">print((&apos;&apos;.join(map(lambda xx:(hex(ord(xx))[2:]),os.urandom(n))))[0:16])</span><br><span class="line">&gt;&gt;&gt; print((&apos;&apos;.join(map(lambda xx:(hex(ord(xx))[2:]),os.urandom(16))))[0:16])</span><br><span class="line">d057995f3a83db1d</span><br><span class="line">&gt;&gt;&gt; print((&apos;&apos;.join(map(lambda xx:(hex(ord(xx))[2:]),os.urandom(16))))[0:16])</span><br><span class="line">499cdae9842d8cca</span><br><span class="line"></span><br><span class="line">import random</span><br><span class="line">import string</span><br><span class="line">print(&apos;&apos;.join(random.choice(string.ascii_uppercase + string.digits) for _ in range(N)))</span><br><span class="line">&gt;&gt;&gt; print(&apos;&apos;.join(random.choice(string.ascii_uppercase + string.digits) for _ in range(16)))</span><br><span class="line">MMIF4UEK4FGPHT2R</span><br><span class="line">&gt;&gt;&gt; print(&apos;&apos;.join(random.choice(string.ascii_uppercase + string.digits) for _ in range(16)))</span><br><span class="line">24EO93YC3CHD5TL3</span><br><span class="line"></span><br><span class="line"># 随机所有可显示字符</span><br><span class="line">&gt;&gt;&gt; print(&apos;&apos;.join(random.choice([chr(i) for i in range(33,126)]) for _ in range(16)))</span><br><span class="line">52k&lt;gDs9WJW-C5J1</span><br><span class="line">&gt;&gt;&gt; print(&apos;&apos;.join(random.choice([chr(i) for i in range(33,126)]) for _ in range(16)))</span><br><span class="line">\vGsX*dq=NZ&apos;RklM</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">https://www.v2ex.com/t/394944</span><br><span class="line"></span><br><span class="line">感谢楼下提出的method 3使用的random.choices()函数。 写了一段代码来测试速度，生成一个100W长的随机字符串，最后发现速度method 3&gt;method 1&gt;method 2。</span><br><span class="line"></span><br><span class="line">import time, random, string</span><br><span class="line"></span><br><span class="line">time_s_1 = time.time()</span><br><span class="line">s1=&apos;&apos;.join(random.choice(string.ascii_letters + string.digits) for _ in range(10**7))</span><br><span class="line">time_e_1 = time.time()</span><br><span class="line">print(&apos;method 1:&apos;, str(time_e_1 - time_s_1))</span><br><span class="line"></span><br><span class="line">s2=&apos;&apos;</span><br><span class="line">time_s_2 = time.time()</span><br><span class="line">for _ in range(10**7):</span><br><span class="line">    s2 += random.choice(string.ascii_letters + string.digits)</span><br><span class="line">time_e_2 = time.time()</span><br><span class="line">print(&apos;method 2:&apos;, str(time_e_2 - time_s_2))</span><br><span class="line"></span><br><span class="line">time_s_3 = time.time()</span><br><span class="line">s3=&apos;&apos;.join(random.choices(string.ascii_letters + string.digits, k=10**7))</span><br><span class="line">time_e_3 = time.time()</span><br><span class="line">print(&apos;method 3:&apos;, str(time_e_3 - time_s_3))</span><br><span class="line"></span><br><span class="line"># output</span><br><span class="line"># method 1: 12.540435075759888</span><br><span class="line"># method 2: 14.365357160568237</span><br><span class="line"># method 3: 3.15765118598938</span><br><span class="line"></span><br><span class="line">最后测试是用系统内置函数random.choices速度最快，学习了。</span><br><span class="line"></span><br><span class="line">可以对比一下 choice 和 choices 的源码</span><br><span class="line">https://hg.python.org/cpython/file/tip/Lib/random.py#l252</span><br><span class="line">https://hg.python.org/cpython/file/tip/Lib/random.py#l340</span><br><span class="line">choice 是生成一个随机的整数索引</span><br><span class="line">choices 是把分布比重（默认等比重）转换成 0-1 的数轴，然后 random()生成 0-1 小数，对应到数轴上</span><br><span class="line">大家底层都是用的 random()，choices 更复杂，理应更慢才对</span><br><span class="line"></span><br><span class="line">使用 cProfile 测试</span><br><span class="line">&gt;&gt;&gt; cProfile.run(&apos;&quot;&quot;.join(random.choice(string.ascii_letters + string.digits) for _ in range(10**7))&apos;)</span><br><span class="line">60321941 function calls in 21.869 seconds</span><br><span class="line"></span><br><span class="line">Ordered by: standard name</span><br><span class="line"></span><br><span class="line">ncalls tottime percall cumtime percall filename:lineno(function)</span><br><span class="line">10000001 5.516 0.000 20.772 0.000 &lt;string&gt;:1(&lt;genexpr&gt;)</span><br><span class="line">1 0.000 0.000 21.869 21.869 &lt;string&gt;:1(&lt;module&gt;)</span><br><span class="line">10000000 6.283 0.000 8.918 0.000 random.py:222(_randbelow)</span><br><span class="line">10000000 5.381 0.000 15.256 0.000 random.py:252(choice)</span><br><span class="line">1 0.000 0.000 21.869 21.869 &#123;built-in method builtins.exec&#125;</span><br><span class="line">10000000 0.956 0.000 0.956 0.000 &#123;built-in method builtins.len&#125;</span><br><span class="line">10000000 0.785 0.000 0.785 0.000 &#123;method &apos;bit_length&apos; of &apos;int&apos; objects&#125;</span><br><span class="line">1 0.000 0.000 0.000 0.000 &#123;method &apos;disable&apos; of &apos;_lsprof.Profiler&apos; objects&#125;</span><br><span class="line">10321936 1.851 0.000 1.851 0.000 &#123;method &apos;getrandbits&apos; of &apos;_random.Random&apos; objects&#125;</span><br><span class="line">1 1.097 1.097 21.869 21.869 &#123;method &apos;join&apos; of &apos;str&apos; objects&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; cProfile.run(&apos;&quot;&quot;.join(random.choices(string.ascii_letters + string.digits, k=10**7))&apos;)</span><br><span class="line">10000007 function calls in 3.463 seconds</span><br><span class="line"></span><br><span class="line">Ordered by: standard name</span><br><span class="line"></span><br><span class="line">ncalls tottime percall cumtime percall filename:lineno(function)</span><br><span class="line">1 0.014 0.014 3.463 3.463 &lt;string&gt;:1(&lt;module&gt;)</span><br><span class="line">1 0.000 0.000 3.374 3.374 random.py:340(choices)</span><br><span class="line">1 2.780 2.780 3.374 3.374 random.py:352(&lt;listcomp&gt;)</span><br><span class="line">1 0.000 0.000 3.463 3.463 &#123;built-in method builtins.exec&#125;</span><br><span class="line">1 0.000 0.000 0.000 0.000 &#123;built-in method builtins.len&#125;</span><br><span class="line">1 0.000 0.000 0.000 0.000 &#123;method &apos;disable&apos; of &apos;_lsprof.Profiler&apos; objects&#125;</span><br><span class="line">1 0.075 0.075 0.075 0.075 &#123;method &apos;join&apos; of &apos;str&apos; objects&#125;</span><br><span class="line">10000000 0.594 0.000 0.594 0.000 &#123;method &apos;random&apos; of &apos;_random.Random&apos; objects&#125;</span><br><span class="line"></span><br><span class="line">可以看到：</span><br><span class="line">1. choice 法到底层用的是 getrandbits</span><br><span class="line"># Only call self.getrandbits if the original random() builtin method</span><br><span class="line"># has not been overridden or if a new getrandbits() was supplied.</span><br><span class="line">说明 getrandbits 应该是比 random 更快的，否则官方不会这么用</span><br><span class="line"></span><br><span class="line">2. choice 法的 function calls 是 choices 法的 6 倍，而正好时间也是将近 6 倍，很可能这两者是有关联的</span><br><span class="line"></span><br><span class="line">3.看 tottime，choices 的时间主要是在 random.py:352</span><br><span class="line">return [population[_int(random() * total)] for i in range(k)]</span><br><span class="line">这里构建 list 消耗大可以理解</span><br><span class="line"></span><br><span class="line">choice 的时间主要是在&lt;string&gt;:1，random.py:222，random.py:252 上</span><br><span class="line">choice 一个 5 行的函数，吃这么多时间，很难理解</span><br></pre></td></tr></table></figure></p>
<h5 id="Python字符串操作"><a href="#Python字符串操作" class="headerlink" title="Python字符串操作"></a>Python字符串操作</h5><p><a href="http://blog.csdn.net/ataraxia2010/article/details/6907907" target="_blank" rel="noopener">http://blog.csdn.net/ataraxia2010/article/details/6907907</a><br><a href="http://www.cnpythoner.com/wiki/string.html" target="_blank" rel="noopener">http://www.cnpythoner.com/wiki/string.html</a><br><a href="http://www.cnblogs.com/zhongbin/p/3273048.html" target="_blank" rel="noopener">http://www.cnblogs.com/zhongbin/p/3273048.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br></pre></td><td class="code"><pre><span class="line">python实现的字符串操作</span><br><span class="line">1.复制字符串</span><br><span class="line"></span><br><span class="line">#strcpy(sStr1,sStr2)</span><br><span class="line">sStr1 = &apos;strcpy&apos;</span><br><span class="line">sStr2 = sStr1</span><br><span class="line">sStr1 = &apos;strcpy2&apos;</span><br><span class="line">print sStr2</span><br><span class="line"></span><br><span class="line">2.连接字符串</span><br><span class="line"></span><br><span class="line">#strcat(sStr1,sStr2)</span><br><span class="line">sStr1 = &apos;strcat&apos;</span><br><span class="line">sStr2 = &apos;append&apos;</span><br><span class="line">sStr1 += sStr2</span><br><span class="line">print sStr1</span><br><span class="line"></span><br><span class="line">3.查找字符</span><br><span class="line"></span><br><span class="line">#strchr(sStr1,sStr2)</span><br><span class="line">sStr1 = &apos;strchr&apos;</span><br><span class="line">sStr2 = &apos;r&apos;</span><br><span class="line">nPos = sStr1.index(sStr2)</span><br><span class="line">print nPos</span><br><span class="line"></span><br><span class="line">4.比较字符串</span><br><span class="line"></span><br><span class="line">#strcmp(sStr1,sStr2)</span><br><span class="line">sStr1 = &apos;strchr&apos;</span><br><span class="line">sStr2 = &apos;strch&apos;</span><br><span class="line">print cmp(sStr1,sStr2)</span><br><span class="line"></span><br><span class="line">5.扫描字符串是否包含指定的字符</span><br><span class="line"></span><br><span class="line">#strspn(sStr1,sStr2)</span><br><span class="line">sStr1 = &apos;12345678&apos;</span><br><span class="line">sStr2 = &apos;456&apos;</span><br><span class="line">#sStr1 and chars both in sStr1 and sStr2</span><br><span class="line">print len(sStr1 and sStr2)</span><br><span class="line"></span><br><span class="line">6.字符串长度</span><br><span class="line"></span><br><span class="line">#strlen(sStr1)</span><br><span class="line">sStr1 = &apos;strlen&apos;</span><br><span class="line">print len(sStr1)</span><br><span class="line"></span><br><span class="line">7.将字符串中的小写字符转换为大写字符</span><br><span class="line"></span><br><span class="line">#strlwr(sStr1)</span><br><span class="line">sStr1 = &apos;JCstrlwr&apos;</span><br><span class="line">sStr1 = sStr1.upper()</span><br><span class="line">print sStr1</span><br><span class="line"></span><br><span class="line">8.追加指定长度的字符串</span><br><span class="line"></span><br><span class="line">#strncat(sStr1,sStr2,n)</span><br><span class="line">sStr1 = &apos;12345&apos;</span><br><span class="line">sStr2 = &apos;abcdef&apos;</span><br><span class="line">n = 3</span><br><span class="line">sStr1 += sStr2[0:n]</span><br><span class="line">print sStr1</span><br><span class="line"></span><br><span class="line">9.字符串指定长度比较</span><br><span class="line"></span><br><span class="line">#strncmp(sStr1,sStr2,n)</span><br><span class="line">sStr1 = &apos;12345&apos;</span><br><span class="line">sStr2 = &apos;123bc&apos;</span><br><span class="line">n = 3</span><br><span class="line">print cmp(sStr1[0:n],sStr2[0:n])</span><br><span class="line"></span><br><span class="line">10.复制指定长度的字符</span><br><span class="line"></span><br><span class="line">#strncpy(sStr1,sStr2,n)</span><br><span class="line">sStr1 = &apos;&apos;</span><br><span class="line">sStr2 = &apos;12345&apos;</span><br><span class="line">n = 3</span><br><span class="line">sStr1 = sStr2[0:n]</span><br><span class="line">print sStr1</span><br><span class="line"></span><br><span class="line">11.字符串比较，不区分大小写</span><br><span class="line"></span><br><span class="line">#stricmp(sStr1,sStr2)</span><br><span class="line">sStr1 = &apos;abcefg&apos;</span><br><span class="line">sStr2 = &apos;ABCEFG&apos;</span><br><span class="line">print cmp(sStr1.upper(),sStr2.upper())</span><br><span class="line"></span><br><span class="line">12.将字符串前n个字符替换为指定的字符</span><br><span class="line"></span><br><span class="line">#strnset(sStr1,ch,n)</span><br><span class="line">sStr1 = &apos;12345&apos;</span><br><span class="line">ch = &apos;r&apos;</span><br><span class="line">n = 3</span><br><span class="line">sStr1 = n * ch + sStr1[3:]</span><br><span class="line">print sStr1</span><br><span class="line"></span><br><span class="line">13.扫描字符串</span><br><span class="line"></span><br><span class="line">#strpbrk(sStr1,sStr2)</span><br><span class="line">sStr1 = &apos;cekjgdklab&apos;</span><br><span class="line">sStr2 = &apos;gka&apos;</span><br><span class="line">nPos = -1</span><br><span class="line">for c in sStr1:</span><br><span class="line">    if c in sStr2:</span><br><span class="line">        nPos = sStr1.index(c)</span><br><span class="line">        break</span><br><span class="line">print nPos</span><br><span class="line"></span><br><span class="line">14.翻转字符串</span><br><span class="line"></span><br><span class="line">#strrev(sStr1)</span><br><span class="line">sStr1 = &apos;abcdefg&apos;</span><br><span class="line">sStr1 = sStr1[::-1]</span><br><span class="line">print sStr1</span><br><span class="line"></span><br><span class="line">15.查找字符串</span><br><span class="line"></span><br><span class="line">python strstr</span><br><span class="line"></span><br><span class="line">#strstr(sStr1,sStr2)</span><br><span class="line">sStr1 = &apos;abcdefg&apos;</span><br><span class="line">sStr2 = &apos;cde&apos;</span><br><span class="line">print sStr1.find(sStr2)</span><br><span class="line"></span><br><span class="line">16.分割字符串</span><br><span class="line"></span><br><span class="line">#strtok(sStr1,sStr2)</span><br><span class="line">sStr1 = &apos;ab,cde,fgh,ijk&apos;</span><br><span class="line">sStr2 = &apos;,&apos;</span><br><span class="line">sStr1 = sStr1[sStr1.find(sStr2) + 1:]</span><br><span class="line">print sStr1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http://blog.csdn.net/ataraxia2010/article/details/6907907</span><br><span class="line">s.strip() .lstrip() .rstrip(&apos;,&apos;) 去空格及特殊符号</span><br><span class="line"></span><br><span class="line">复制字符串</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strcpy(sStr1,sStr2)</span><br><span class="line">2 	sStr1 = &apos;strcpy&apos;</span><br><span class="line">3 	sStr2 = sStr1</span><br><span class="line">4 	sStr1 = &apos;strcpy2&apos;</span><br><span class="line">5 	print sStr2</span><br><span class="line">连接字符串</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strcat(sStr1,sStr2)</span><br><span class="line">2 	sStr1 = &apos;strcat&apos;</span><br><span class="line">3 	sStr2 = &apos;append&apos;</span><br><span class="line">4 	sStr1 += sStr2</span><br><span class="line">5 	print sStr1</span><br><span class="line">查找字符</span><br><span class="line"></span><br><span class="line">&lt; 0 未找到</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strchr(sStr1,sStr2)</span><br><span class="line">2 	sStr1 = &apos;strchr&apos;</span><br><span class="line">3 	sStr2 = &apos;s&apos;</span><br><span class="line">4 	nPos = sStr1.index(sStr2)</span><br><span class="line">5 	print nPos</span><br><span class="line">比较字符串</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strcmp(sStr1,sStr2)</span><br><span class="line">2 	sStr1 = &apos;strchr&apos;</span><br><span class="line">3 	sStr2 = &apos;strch&apos;</span><br><span class="line">4 	print cmp(sStr1,sStr2)</span><br><span class="line">扫描字符串是否包含指定的字符</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strspn(sStr1,sStr2)</span><br><span class="line">2 	sStr1 = &apos;12345678&apos;</span><br><span class="line">3 	sStr2 = &apos;456&apos;</span><br><span class="line">4 	#sStr1 and chars both in sStr1 and sStr2</span><br><span class="line">5 	print len(sStr1 and sStr2)</span><br><span class="line">字符串长度</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strlen(sStr1)</span><br><span class="line">2 	sStr1 = &apos;strlen&apos;</span><br><span class="line">3 	print len(sStr1)</span><br><span class="line">将字符串中的大小写转换</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strlwr(sStr1)</span><br><span class="line">2 	sStr1 = &apos;JCstrlwr&apos;</span><br><span class="line">3 	sStr1 = sStr1.upper()</span><br><span class="line">4 	#sStr1 = sStr1.lower()</span><br><span class="line">5 	print sStr1</span><br><span class="line">追加指定长度的字符串</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strncat(sStr1,sStr2,n)</span><br><span class="line">2 	sStr1 = &apos;12345&apos;</span><br><span class="line">3 	sStr2 = &apos;abcdef&apos;</span><br><span class="line">4 	n = 3</span><br><span class="line">5 	sStr1 += sStr2[0:n]</span><br><span class="line">6 	print sStr1</span><br><span class="line">字符串指定长度比较</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strncmp(sStr1,sStr2,n)</span><br><span class="line">2 	sStr1 = &apos;12345&apos;</span><br><span class="line">3 	sStr2 = &apos;123bc&apos;</span><br><span class="line">4 	n = 3</span><br><span class="line">5 	print cmp(sStr1[0:n],sStr2[0:n])</span><br><span class="line">复制指定长度的字符</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strncpy(sStr1,sStr2,n)</span><br><span class="line">2 	sStr1 = &apos;&apos;</span><br><span class="line">3 	sStr2 = &apos;12345&apos;</span><br><span class="line">4 	n = 3</span><br><span class="line">5 	sStr1 = sStr2[0:n]</span><br><span class="line">6 	print sStr1</span><br><span class="line">将字符串前n个字符替换为指定的字符</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strnset(sStr1,ch,n)</span><br><span class="line">2 	sStr1 = &apos;12345&apos;</span><br><span class="line">3 	ch = &apos;r&apos;</span><br><span class="line">4 	n = 3</span><br><span class="line">5 	sStr1 = n * ch + sStr1[3:]</span><br><span class="line">6 	print sStr1</span><br><span class="line">扫描字符串</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strpbrk(sStr1,sStr2)</span><br><span class="line">2 	sStr1 = &apos;cekjgdklab&apos;</span><br><span class="line">3 	sStr2 = &apos;gka&apos;</span><br><span class="line">4 	nPos = -1</span><br><span class="line">5 	for c in sStr1:</span><br><span class="line">6 	    if c in sStr2:</span><br><span class="line">7 	        nPos = sStr1.index(c)</span><br><span class="line">8 	        break</span><br><span class="line">9 	print nPos</span><br><span class="line">翻转字符串</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strrev(sStr1)</span><br><span class="line">2 	sStr1 = &apos;abcdefg&apos;</span><br><span class="line">3 	sStr1 = sStr1[::-1]</span><br><span class="line">4 	print sStr1</span><br><span class="line">查找字符串</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strstr(sStr1,sStr2)</span><br><span class="line">2 	sStr1 = &apos;abcdefg&apos;</span><br><span class="line">3 	sStr2 = &apos;cde&apos;</span><br><span class="line">4 	print sStr1.find(sStr2)</span><br><span class="line">分割字符串</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	#strtok(sStr1,sStr2)</span><br><span class="line">2 	sStr1 = &apos;ab,cde,fgh,ijk&apos;</span><br><span class="line">3 	sStr2 = &apos;,&apos;</span><br><span class="line">4 	sStr1 = sStr1[sStr1.find(sStr2) + 1:]</span><br><span class="line">5 	print sStr1</span><br><span class="line">6 	或者</span><br><span class="line">7 	s = &apos;ab,cde,fgh,ijk&apos;</span><br><span class="line">8 	print(s.split(&apos;,&apos;))</span><br><span class="line">连接字符串</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	delimiter = &apos;,&apos;</span><br><span class="line">2 	mylist = [&apos;Brazil&apos;, &apos;Russia&apos;, &apos;India&apos;, &apos;China&apos;]</span><br><span class="line">3 	print delimiter.join(mylist)</span><br><span class="line">PHP 中 addslashes 的实现</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	def addslashes(s):</span><br><span class="line">2 	    d = &#123;&apos;&quot;&apos;:&apos;\\&quot;&apos;, &quot;&apos;&quot;:&quot;\\&apos;&quot;, &quot;\0&quot;:&quot;\\\0&quot;, &quot;\\&quot;:&quot;\\\\&quot;&#125;</span><br><span class="line">3 	    return &apos;&apos;.join(d.get(c, c) for c in s)</span><br><span class="line">4</span><br><span class="line">5 	s = &quot;John &apos;Johny&apos; Doe (a.k.a. \&quot;Super Joe\&quot;)\\\0&quot;</span><br><span class="line">6 	print s</span><br><span class="line">7 	print addslashes(s)</span><br><span class="line">只显示字母与数字</span><br><span class="line"></span><br><span class="line">Python</span><br><span class="line">1 	def OnlyCharNum(s,oth=&apos;&apos;):</span><br><span class="line">2 	    s2 = s.lower();</span><br><span class="line">3 	    fomart = &apos;abcdefghijklmnopqrstuvwxyz0123456789&apos;</span><br><span class="line">4 	    for c in s2:</span><br><span class="line">5 	        if not c in fomart:</span><br><span class="line">6 	            s = s.replace(c,&apos;&apos;);</span><br><span class="line">7 	    return s;</span><br><span class="line">8</span><br><span class="line">9 	print(OnlyStr(&quot;a000 aa-b&quot;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http://www.cnpythoner.com/wiki/string.html</span><br><span class="line">字符串连接</span><br><span class="line"></span><br><span class="line">方法1： 用字符串的join方法</span><br><span class="line"></span><br><span class="line">a = [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;]</span><br><span class="line">content = &apos;&apos;</span><br><span class="line">content = &apos;&apos;.join(a)</span><br><span class="line">print content</span><br><span class="line"></span><br><span class="line">方法2： 用字符串的替换占位符替换</span><br><span class="line"></span><br><span class="line">a = [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;]</span><br><span class="line">content = &apos;&apos;</span><br><span class="line">content = &apos;%s%s%s%s&apos; % tuple(a)</span><br><span class="line">print content</span><br><span class="line"></span><br><span class="line">想要了解更多,请看python字符串连接</span><br><span class="line">字符串截取</span><br><span class="line"></span><br><span class="line">我们可以通过索引来提取想要获取的字符，可以把python的字符串也做为字符串的列表就更好理解</span><br><span class="line"></span><br><span class="line">python的字串列表有2种取值顺序</span><br><span class="line">1是从左到右索引默认0开始的，最大范围是字符串长度少1</span><br><span class="line">s = &apos;ilovepython&apos;</span><br><span class="line">s[0]的结果是i</span><br><span class="line"></span><br><span class="line">2是从右到左索引默认-1开始的，最大范围是字符串开头</span><br><span class="line">s = &apos;ilovepython&apos;</span><br><span class="line">s[-1]的结果是n</span><br><span class="line"></span><br><span class="line">上面这个是取得一个字符，如果你的实际要取得一段子串的话，可以用到变量[头下标:尾下标]，就可以截取相应的字符串，其中下标是从0开始算起，可以是正数或负数，下标可以为空表示取到头或尾。</span><br><span class="line"></span><br><span class="line">比如</span><br><span class="line">s = &apos;ilovepython&apos;</span><br><span class="line">s[1:5]的结果是love</span><br><span class="line">当使用以冒号分隔的字符串，python返回一个新的对象，结果包含了以这对偏移标识的连续的内容，左边的开始是包含了下边界，比如</span><br><span class="line">上面的结果包含了s[1]的值l，而取到的最大范围不包括上边界，就是s[5]的值p</span><br><span class="line"></span><br><span class="line">想要了解更多,请看python字符串截取</span><br><span class="line">字符串替换</span><br><span class="line"></span><br><span class="line">字符串替换可以用内置的方法和正则表达式完成。</span><br><span class="line">1用字符串本身的replace方法:</span><br><span class="line"></span><br><span class="line">a = &apos;hello word&apos;</span><br><span class="line">b = a.replace(&apos;word&apos;,&apos;python&apos;)</span><br><span class="line">print b</span><br><span class="line"></span><br><span class="line">2用正则表达式来完成替换:</span><br><span class="line">import re</span><br><span class="line">a = &apos;hello word&apos;</span><br><span class="line">strinfo = re.compile(&apos;word&apos;)</span><br><span class="line">b = strinfo.sub(&apos;python&apos;,a)</span><br><span class="line">print b</span><br><span class="line">想要了解更多,请看python 字符串替换</span><br><span class="line">字符串比较</span><br><span class="line"></span><br><span class="line">cmp方法比较两个对象，并根据结果返回一个整数。cmp(x,y)如果X&lt; Y,返回值是负数 如果X&gt;Y 返回的值为正数。</span><br><span class="line"></span><br><span class="line">sStr1 = &apos;strch&apos;</span><br><span class="line">sStr2 = &apos;strchr&apos;</span><br><span class="line">print cmp(sStr1,sStr2)##-1</span><br><span class="line"></span><br><span class="line">字符串相加</span><br><span class="line"></span><br><span class="line">我们通过操作符号+来进行字符串的相加，不过建议还是用其他的方式来进行字符串的拼接，这样效率高点。</span><br><span class="line"></span><br><span class="line">原因：在循环连接字符串的时候，他每次连接一次，就要重新开辟空间，然后把字符串连接起来，再放入新的空间，再一次循环，又要开辟新的空间，把字符串连接起来放入新的空间，如此反复，内存操作比较频繁，每次都要计算内存空间，然后开辟内存空间，再释放内存空间，效率非常低。</span><br><span class="line"></span><br><span class="line">sStr1 = &apos;strch&apos;</span><br><span class="line">sStr2 = &apos;strchr&apos;</span><br><span class="line">newstr = sStr1 + sStr2</span><br><span class="line">print newstr</span><br><span class="line"></span><br><span class="line">字符串查找</span><br><span class="line"></span><br><span class="line">python 字符串查找有4个方法，1 find,2 index方法，3 rfind方法,4 rindex方法。</span><br><span class="line"></span><br><span class="line">1 find()方法：</span><br><span class="line">info = &apos;abca&apos;</span><br><span class="line">print info.find(&apos;a&apos;)##从下标0开始，查找在字符串里第一个出现的子串，返回结果：0</span><br><span class="line"></span><br><span class="line">info = &apos;abca&apos;</span><br><span class="line">print info.find(&apos;a&apos;,1)##从下标1开始，查找在字符串里第一个出现的子串：返回结果3</span><br><span class="line"></span><br><span class="line">info = &apos;abca&apos;</span><br><span class="line">print info.find(&apos;333&apos;)##返回-1,查找不到返回-1</span><br><span class="line"></span><br><span class="line">2 index()方法：</span><br><span class="line"></span><br><span class="line">python 的index方法是在字符串里查找子串第一次出现的位置，类似字符串的find方法，不过比find方法更好的是，如果查找不到子串，会抛出异常，而不是返回-1</span><br><span class="line"></span><br><span class="line">info = &apos;abca&apos;</span><br><span class="line">print info.index(&apos;a&apos;)</span><br><span class="line">print info.index(&apos;33&apos;)</span><br><span class="line"></span><br><span class="line">字符串分割</span><br><span class="line"></span><br><span class="line">字符串分割，可以用split,rsplit方法，通过相应的规则来切割成生成列表对象</span><br><span class="line"></span><br><span class="line">info = &apos;name:haha,age:20$name:python,age:30$name:fef,age:55&apos;</span><br><span class="line">content = info.split(&apos;$&apos;)</span><br><span class="line">print content</span><br><span class="line"></span><br><span class="line">字符串翻转</span><br><span class="line"></span><br><span class="line">通过步进反转[::-1]</span><br><span class="line"></span><br><span class="line">a = &apos;abcd&apos;</span><br><span class="line">b = a[::-1]##[::-1]通过步进反转</span><br><span class="line">print b</span><br><span class="line"></span><br><span class="line">字符串编码</span><br><span class="line"></span><br><span class="line">通过字符串的decode和encode方法</span><br><span class="line"></span><br><span class="line">1 encode([encoding,[errors]])</span><br><span class="line">#其中encoding可以有多种值，比如gb2312 gbk gb18030 bz2 zlib big5 bzse64等都支持。errors默认值为&quot;strict&quot;，意思是UnicodeError。可能的值还有&apos;ignore&apos;, &apos;replace&apos;, &apos;xmlcharrefreplace&apos;, &apos;backslashreplace&apos; 和所有的通过codecs.register_error注册的值。</span><br><span class="line"></span><br><span class="line">S.decode([encoding,[errors]]) 下面是字符串编码应用:</span><br><span class="line">a = &apos;你好&apos;</span><br><span class="line">b = &apos;python&apos;</span><br><span class="line">print a.decode(&apos;utf-8&apos;).encode(&apos;gbk&apos;)##decode方法把字符串转换为unicode对象，然后通过encode方法转换为指定的编码字符串对象</span><br><span class="line">print b.decode(&apos;utf-8&apos;)##decode方法把字符串转换为unicode对象</span><br><span class="line"></span><br><span class="line">字符串追加和拼接</span><br><span class="line"></span><br><span class="line">通过字符串的占位符来进行字符串的拼接</span><br><span class="line"></span><br><span class="line">#1 元组拼接</span><br><span class="line">m = &apos;python&apos;</span><br><span class="line">astr = &apos;i love %s&apos; % m</span><br><span class="line">print astr</span><br><span class="line"></span><br><span class="line">#2 字符串的format方法</span><br><span class="line">m = &apos;python&apos;</span><br><span class="line">astr = &quot;i love &#123;python&#125;&quot;.format(python=m)</span><br><span class="line">print astr</span><br><span class="line"></span><br><span class="line">#3 字典格式化字符串</span><br><span class="line">m = &apos;python&apos;</span><br><span class="line">astr = &quot;i love %(python)s &quot; % &#123;&apos;python&apos;:m&#125;</span><br><span class="line">print astr</span><br><span class="line"></span><br><span class="line">字符串复制</span><br><span class="line"></span><br><span class="line">通过变量来进行赋值</span><br><span class="line"></span><br><span class="line">fstr = &apos;strcpy&apos;</span><br><span class="line">sstr = fstr</span><br><span class="line">fstr = &apos;strcpy2&apos;</span><br><span class="line">print sstr</span><br><span class="line"></span><br><span class="line">字符串长度</span><br><span class="line"></span><br><span class="line">通过内置方法len()来计算字符串的长度，注意这个计算的是字符的长度。</span><br><span class="line"></span><br><span class="line">aa = &apos;afebb&apos;</span><br><span class="line">bb = &apos;你&apos;</span><br><span class="line">print len(aa)</span><br><span class="line">print len(bb)</span><br><span class="line"></span><br><span class="line">字符串大小写</span><br><span class="line"></span><br><span class="line">通过下面的upper(),lower()等方法来转换大小写</span><br><span class="line"></span><br><span class="line">S.upper()#S中的字母大写</span><br><span class="line">S.lower() #S中的字母小写</span><br><span class="line">S.capitalize() #首字母大写</span><br><span class="line">S.istitle() #S是否是首字母大写的</span><br><span class="line">S.isupper() #S中的字母是否便是大写</span><br><span class="line">S.islower() #S中的字母是否全是小写</span><br><span class="line">字符串去空格</span><br><span class="line"></span><br><span class="line">通过strip(),lstrip(),rstrip()方法去除字符串的空格</span><br><span class="line"></span><br><span class="line">S.strip()去掉字符串的左右空格</span><br><span class="line">S.lstrip()去掉字符串的左边空格</span><br><span class="line">S.rstrip()去掉字符串的右边空格</span><br><span class="line">字符串其他方法</span><br><span class="line"></span><br><span class="line">字符串相关的其他方法:count(),join()方法等。</span><br><span class="line"></span><br><span class="line">S.center(width, [fillchar]) #中间对齐</span><br><span class="line">S.count(substr, [start, [end]]) #计算substr在S中出现的次数</span><br><span class="line">S.expandtabs([tabsize]) #把S中的tab字符替换没空格，每个tab替换为tabsize个空格，默认是8个</span><br><span class="line">S.isalnum() #是否全是字母和数字，并至少有一个字符</span><br><span class="line">S.isalpha() #是否全是字母，并至少有一个字符</span><br><span class="line">S.isspace() #是否全是空白字符，并至少有一个字符</span><br><span class="line">S.join()#S中的join，把列表生成一个字符串对象</span><br><span class="line">S.ljust(width,[fillchar]) #输出width个字符，S左对齐，不足部分用fillchar填充，默认的为空格。</span><br><span class="line">S.rjust(width,[fillchar]) #右对齐</span><br><span class="line">S.splitlines([keepends]) #把S按照行分割符分为一个list，keepends是一个bool值，如果为真每行后而会保留行分割符。</span><br><span class="line">S.swapcase() #大小写互换</span><br></pre></td></tr></table></figure></p>
<h5 id="python3中替换python2中cmp函数的新函数分析-lt、le、eq、ne、ge、gt"><a href="#python3中替换python2中cmp函数的新函数分析-lt、le、eq、ne、ge、gt" class="headerlink" title="python3中替换python2中cmp函数的新函数分析(lt、le、eq、ne、ge、gt)"></a>python3中替换python2中cmp函数的新函数分析(lt、le、eq、ne、ge、gt)</h5><p><a href="http://blog.csdn.net/sushengmiyan/article/details/11332589" target="_blank" rel="noopener">http://blog.csdn.net/sushengmiyan/article/details/11332589</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">在python2中我们经常会使用cmp函数来比较一些东西，但是在python3中，你再来使用这个函数的时候，发现就报错了，提示找不到这个函数，这是为啥呢？嗯，新版的python已经舍弃之。</span><br><span class="line"></span><br><span class="line">在python3中使用时报错信息如下:</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    Syntax Error: if cmp(os.getcwd(), os.path.dirname(os.sys.argv[0])) &lt;&gt; 0:: Test.py, line 34055</span><br><span class="line"></span><br><span class="line">提示找不到cmp函数了，那么在python3中该如何使用这个函数呢？</span><br><span class="line"></span><br><span class="line">看python的帮助文档，在oprater这个模块中有了这么几个函数</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    operator.lt(a, b)</span><br><span class="line">    operator.le(a, b)</span><br><span class="line">    operator.eq(a, b)</span><br><span class="line">    operator.ne(a, b)</span><br><span class="line">    operator.ge(a, b)</span><br><span class="line">    operator.gt(a, b)</span><br><span class="line">    operator.__lt__(a, b)</span><br><span class="line">    operator.__le__(a, b)</span><br><span class="line">    operator.__eq__(a, b)</span><br><span class="line">    operator.__ne__(a, b)</span><br><span class="line">    operator.__ge__(a, b)</span><br><span class="line">    operator.__gt__(a, b)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">这几个函数就是用来替换之前的cmp的，之前使用cmp的同胞们，咱们以后就换上面这些函数咯。</span><br><span class="line"></span><br><span class="line">先简单说下这几个函数的意思吧。</span><br><span class="line"></span><br><span class="line">lt(a, b) 相当于 a &lt; b</span><br><span class="line"></span><br><span class="line">le(a,b) 相当于 a &lt;= b</span><br><span class="line"></span><br><span class="line">eq(a,b) 相当于 a == b</span><br><span class="line"></span><br><span class="line">ne(a,b) 相当于 a != b</span><br><span class="line"></span><br><span class="line">gt(a,b) 相当于 a &gt; b</span><br><span class="line">ge(a, b)相当于 a&gt;= b</span><br><span class="line"></span><br><span class="line">函数的返回值不是布尔哦。这点需要注意，还是跟cmp一样返回的是数值哦。</span><br></pre></td></tr></table></figure></p>
<h5 id="Python字符串比较"><a href="#Python字符串比较" class="headerlink" title="Python字符串比较"></a>Python字符串比较</h5><p><a href="https://www.liurongxing.com/python-is-cmp-compare-operator.html" target="_blank" rel="noopener">https://www.liurongxing.com/python-is-cmp-compare-operator.html</a><br><a href="http://www.pythonclub.org/python-basic/string-compare" target="_blank" rel="noopener">http://www.pythonclub.org/python-basic/string-compare</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">python中的is、==和cmp()比较字符串</span><br><span class="line"></span><br><span class="line">python is 主要是判断 2 个变量是否引用的是同一个对象，如果是的话，则返回 true，否则返回 false。</span><br><span class="line">== 用来判断两个对象的值是否相等</span><br><span class="line">cmp() 函数则是相当于 &lt;, ==, &gt; 但是在 Python3 中，cmp() 函数被移除了，所以我以后还是避免少用这个函数。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">简单比较是用内置函数 cmp() 来比较两个字符串</span><br><span class="line"></span><br><span class="line">Python字符串比较忽略大小写</span><br><span class="line">正则表达式，使用IGNORECASE标志</span><br><span class="line"></span><br><span class="line">&gt;</span><br><span class="line">&gt;&gt;&gt; import re</span><br><span class="line">&gt;&gt;&gt; m = re.search(&apos;multi&apos;, &apos;A mUltiCased string&apos;, re.IGNORECASE)</span><br><span class="line">&gt;&gt;&gt; bool(m)</span><br><span class="line">True</span><br><span class="line"></span><br><span class="line">在比较前把2个字符串转换成同样大写</span><br><span class="line">在比较前把2个字符串转换成同样大写，用upper()方法，或小写,lower()</span><br><span class="line">&gt;&gt;&gt; s = &apos;A mUltiCased string&apos;.lower()</span><br><span class="line">&gt;&gt;&gt; s</span><br><span class="line">&apos;a multicased string&apos;</span><br><span class="line">&gt;&gt;&gt; s.find(&apos;multi&apos;)</span><br><span class="line">2</span><br></pre></td></tr></table></figure></p>
<h5 id="利用Python在一个文件的头部插入数据"><a href="#利用Python在一个文件的头部插入数据" class="headerlink" title="利用Python在一个文件的头部插入数据"></a>利用Python在一个文件的头部插入数据</h5><p><a href="http://blog.csdn.net/junbujianwpl/article/details/73194846" target="_blank" rel="noopener">http://blog.csdn.net/junbujianwpl/article/details/73194846</a><br><a href="https://www.zhihu.com/question/50986375" target="_blank" rel="noopener">https://www.zhihu.com/question/50986375</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">在一个文件的末尾追加数据是很常用的。在使用过程中应该都比较熟悉不会出现什么错误。但是往一个文件头部插入数据可能或多或少会碰到一些问题。</span><br><span class="line">看似正确的错误代码</span><br><span class="line"></span><br><span class="line">很多代码看似正确，但是其实都是错的。一起来看下这些代码</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1、看似正确的错误代码1</span><br><span class="line"></span><br><span class="line">with open(path, &quot;r+&quot;) as f:</span><br><span class="line">     f.seek(0)</span><br><span class="line">     f.write(data)</span><br><span class="line"></span><br><span class="line">确实是从头写了，而且有些原有数据确实在，但是数据有问题。。。。</span><br><span class="line">因为”r+”方式写文件操作没有插入的语义，只有写文件的含义，原来位置如果有数据，不会后移的，是覆盖掉了。。。。所以，你可能会看到一些老的数据。不仔细辨别可能就天真地以为成功了。。。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2、看似正确的错误代码2</span><br><span class="line"></span><br><span class="line">with open(path, &quot;w+&quot;) as f:</span><br><span class="line">     old = f.read()</span><br><span class="line">     f.seek(0)</span><br><span class="line">     f.write(data)</span><br><span class="line">     f.write(old)</span><br><span class="line"></span><br><span class="line">你读取到的数据永远为空。。。。</span><br><span class="line">因为”w+”的含义就是截取长度为0然后写入文件。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3、看似正确的错误代码3</span><br><span class="line"></span><br><span class="line">with open(path, &quot;a+&quot;) as f:</span><br><span class="line">     old = f.read()</span><br><span class="line">     #f.truncate(0)           #取消掉注释成正确代码</span><br><span class="line">     f.seek(0)</span><br><span class="line">     f.write(data)</span><br><span class="line"></span><br><span class="line">写入的数据永远出现在文件末尾。。。。。</span><br><span class="line">要打破魔咒的话要先将文件截断成0字节。。。。</span><br><span class="line"></span><br><span class="line">snack:想要”a+”的效果变”r+”，在读之前先seek(0)，在写之前要truncate一下，确保要写入的位置是文件的末尾。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4. 正确的代码</span><br><span class="line"></span><br><span class="line">with open(path, &quot;r+&quot;) as f:</span><br><span class="line">     old = f.read()</span><br><span class="line">     f.seek(0)</span><br><span class="line">     f.write(data)</span><br><span class="line">     f.write(old)</span><br><span class="line"></span><br><span class="line">原理思路：读出原有文件内容，移动索引到开始，写入新的数据，然后写入旧的数据。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">以下方法皆可用</span><br><span class="line">file_name = &apos;a.txt&apos;</span><br><span class="line">with open(file_name, &apos;r&apos;) as f:</span><br><span class="line">    lines = f.readlines()</span><br><span class="line">with open(file_name, &apos;w&apos;) as n:</span><br><span class="line">    n.write(&apos;something new&apos;)</span><br><span class="line">    n.writelines(lines)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">with open (&apos;filename&apos;, &apos;r&apos;) as original:</span><br><span class="line">	data = original.read ()</span><br><span class="line">with open (&apos;filename&apos;, &apos;w&apos;) as modified:</span><br><span class="line">	modified.write (&quot;new first line\n&quot; + data )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def check_and_change_path_file():</span><br><span class="line">    if os.path.exists(WVT_PATH_FILE) and os.path.isfile(WVT_PATH_FILE):</span><br><span class="line">        with open(WVT_PATH_FILE, &apos;r+&apos;) as file_fd:</span><br><span class="line">            file_line = file_fd.readline().strip()</span><br><span class="line"></span><br><span class="line">            if file_line != WVT_PATH_FILE_COMMENT_STR:</span><br><span class="line">                file_fd.seek(0, 0)</span><br><span class="line">                origin_data = file_fd.read()</span><br><span class="line">                file_fd.seek(0, 0)</span><br><span class="line">                file_fd.writelines([WVT_PATH_FILE_COMMENT_STR, &apos;\n&apos;, WVT_PATH_FILE_PATH_STR, &apos;\n\n&apos;])</span><br><span class="line">                file_fd.write(origin_data)</span><br></pre></td></tr></table></figure></p>
<h5 id="Python文件读写"><a href="#Python文件读写" class="headerlink" title="Python文件读写"></a>Python文件读写</h5><p><a href="http://blog.csdn.net/XXKKFF/article/details/4421971" target="_blank" rel="noopener">http://blog.csdn.net/XXKKFF/article/details/4421971</a><br><a href="http://blog.csdn.net/ztf312/article/details/47259805" target="_blank" rel="noopener">http://blog.csdn.net/ztf312/article/details/47259805</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">r  以只读模式打开文件</span><br><span class="line"></span><br><span class="line">w  以只写模式打开文件，且先把文件内容清空（truncate the file first）</span><br><span class="line"></span><br><span class="line">a  以添加模式打开文件，写文件的时候总是写到文件末尾，用seek也无用。打开的文件也是不能读的</span><br><span class="line"></span><br><span class="line">r+ 以读写方式打开文件，文件可读可写，可写到文件的任何位置</span><br><span class="line"></span><br><span class="line">w+ 和r+不同的是，它会truncate the file first</span><br><span class="line"></span><br><span class="line">a+ 和r+不同的是，它只能写到文件末尾</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r只读，r+读写，不创建</span><br><span class="line"></span><br><span class="line">w新建只写，w+新建读写，二者都会将文件内容清零</span><br><span class="line"></span><br><span class="line">（以w方式打开，不能读出。w+可读写）</span><br><span class="line"></span><br><span class="line">w+与r+区别：</span><br><span class="line"></span><br><span class="line">r+：可读可写，若文件不存在，报错；w+: 可读可写，若文件不存在，创建</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">file.read([size])</span><br><span class="line">Read at most size bytes from the file (less if the read hits EOF before obtaining size bytes). If the size argument is negative or omitted, read all data until EOF is reached. The bytes are returned as a string object. An empty string is returned when EOF is encountered immediately. (For certain files, like ttys, it makes sense to continue reading after an EOF is hit.) Note that this method may call the underlying C function fread() more than once in an effort to acquire as close to size bytes as possible. Also note that when in non-blocking mode, less data than was requested may be returned, even if no size parameter was given.</span><br><span class="line"></span><br><span class="line">Note</span><br><span class="line">This function is simply a wrapper for the underlying fread() C function, and will behave the same in corner cases, such as whether the EOF value is cached.</span><br><span class="line"></span><br><span class="line">file.readline([size])</span><br><span class="line">Read one entire line from the file. A trailing newline character is kept in the string (but may be absent when a file ends with an incomplete line). [5] If the size argument is present and non-negative, it is a maximum byte count (including the trailing newline) and an incomplete line may be returned. An empty string is returned only when EOF is encountered immediately.</span><br><span class="line"></span><br><span class="line">Note</span><br><span class="line">Unlike stdio‘s fgets(), the returned string contains null characters (&apos;\0&apos;) if they occurred in the input.</span><br><span class="line"></span><br><span class="line">file.readlines([sizehint])</span><br><span class="line">Read until EOF using readline() and return a list containing the lines thus read. If the optional sizehint argument is present, instead of reading up to EOF, whole lines totalling approximately sizehint bytes (possibly after rounding up to an internal buffer size) are read. Objects implementing a file-like interface may choose to ignore sizehint if it cannot be implemented, or cannot be implemented efficiently.</span><br><span class="line"></span><br><span class="line">file.seek(offset[, whence])</span><br><span class="line">Set the file’s current position, like stdio‘s fseek(). The whence argument is optional and defaults to os.SEEK_SET or 0 (absolute file positioning); other values are os.SEEK_CUR or 1 (seek relative to the current position) and os.SEEK_END or 2 (seek relative to the file’s end). There is no return value.</span><br><span class="line"></span><br><span class="line">file.truncate([size])</span><br><span class="line">Truncate the file’s size. If the optional size argument is present, the file is truncated to (at most) that size. The size defaults to the current position. The current file position is not changed. Note that if a specified size exceeds the file’s current size, the result is platform-dependent: possibilities include that the file may remain unchanged, increase to the specified size as if zero-filled, or increase to the specified size with undefined new content. Availability: Windows, many Unix variants.</span><br><span class="line"></span><br><span class="line">file.write(str)</span><br><span class="line">Write a string to the file. There is no return value. Due to buffering, the string may not actually show up in the file until the flush() or close() method is called.</span><br><span class="line"></span><br><span class="line">file.writelines(sequence)</span><br><span class="line">Write a sequence of strings to the file. The sequence can be any iterable object producing strings, typically a list of strings. There is no return value. (The name is intended to match readlines(); writelines() does not add line separators.)</span><br><span class="line">Files support the iterator protocol. Each iteration returns the same result as file.readline(), and iteration ends when the readline() method returns an empty string.</span><br><span class="line"></span><br><span class="line">File objects also offer a number of other interesting attributes. These are not required for file-like objects, but should be implemented if they make sense for the particular object.</span><br><span class="line"></span><br><span class="line">file.closed</span><br><span class="line">bool indicating the current state of the file object. This is a read-only attribute; the close() method changes the value. It may not be available on all file-like objects.</span><br></pre></td></tr></table></figure></p>
<h5 id="Python文件读写时的换行符与回车符"><a href="#Python文件读写时的换行符与回车符" class="headerlink" title="Python文件读写时的换行符与回车符"></a>Python文件读写时的换行符与回车符</h5><p><a href="http://blog.csdn.net/mrknight/article/details/9717995" target="_blank" rel="noopener">http://blog.csdn.net/mrknight/article/details/9717995</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">1. 背景知识</span><br><span class="line"></span><br><span class="line">    ASCII码中的换行符与回车符：</span><br><span class="line"></span><br><span class="line">    换行符 10 LF &apos;\n&apos;</span><br><span class="line"></span><br><span class="line">    回车符 13 CR &apos;\r&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    在操作系统的历史中，有很多种方法来表示另起一行，但&apos;\n&apos;和&apos;\r&apos;是最常用的方式，目前主流操作系统的行结束符号如下所示：</span><br><span class="line"></span><br><span class="line">    操作系统 	字符组合</span><br><span class="line">    UNIX &amp; Mac OS X 	 &apos;\n&apos;</span><br><span class="line">    Mac(pre OS X) 	 &apos;\r&apos;</span><br><span class="line">    MS Windows 	 &apos;\r\n&apos;</span><br><span class="line"></span><br><span class="line">2. 测试程序（python2.7 +　win7）</span><br><span class="line"></span><br><span class="line">    （1） test1： &quot;w&quot;方式写时的&apos;\n&apos;会在被系统自动替换为&apos;\r\n&apos;</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line"># -*- coding: utf-8  -*-</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    try:</span><br><span class="line">        fout = open(&quot;test1.txt&quot;, &quot;w&quot;)</span><br><span class="line">    except IOError:</span><br><span class="line">        print &quot;Error: open file failed.&quot;</span><br><span class="line">        return</span><br><span class="line"></span><br><span class="line">    for i in range(5):</span><br><span class="line">        line = str(i) + &quot;\n&quot;</span><br><span class="line">        fout.write(line)</span><br><span class="line"></span><br><span class="line">    fout.close()</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    main()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    测试结果：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    （2） test2： &quot;wb&quot;方式写时的&apos;\n&apos;不会在被系统自动替换为&apos;\r\n&apos;</span><br><span class="line"></span><br><span class="line">    [python] view plain copy</span><br><span class="line"></span><br><span class="line">        fout = open(&quot;test2.txt&quot;, &quot;wb&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    测试结果：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    （3） test3: &quot;r&quot;方式读时，文件中的&apos;\r\n&apos;会被系统替换为&apos;\n&apos;</span><br><span class="line"></span><br><span class="line">    另外，python提到的通用新行格式（U修饰符），个人觉得是把&quot;r&quot;默认&quot;rU&quot;的，测试中两种方式读取结果一样。</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line"># -*- coding: utf-8  -*-</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    try:</span><br><span class="line">        fin = open(&quot;test1.txt&quot;, &quot;r&quot;)</span><br><span class="line">    except IOError:</span><br><span class="line">        print &quot;Error: open file failed.&quot;</span><br><span class="line">        return</span><br><span class="line"></span><br><span class="line">    for line in fin:</span><br><span class="line">        for i in range(len(line)):</span><br><span class="line">            print &quot;\t%d&quot; % ord(line[i]),</span><br><span class="line">        print &quot;&quot;</span><br><span class="line"></span><br><span class="line">    fin.close()</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    main()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    对于上述不同内容的两个文件输出为：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    （4） test4： &quot;rb&quot;方式读时，文件中的&apos;\r\n&apos;不会被系统替换为&apos;\n&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">３. 结论</span><br><span class="line"></span><br><span class="line">    上述问题实际上自己在文件处理中遇到，文件换行中的回车符和换行符挺容易弄混，总结了一下，共大家查阅。</span><br></pre></td></tr></table></figure></p>
<h5 id="Python的with语句"><a href="#Python的with语句" class="headerlink" title="Python的with语句"></a>Python的with语句</h5><p><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-pythonwith/index.html" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/opensource/os-cn-pythonwith/index.html</a><br><a href="http://blog.csdn.net/suwei19870312/article/details/23258495" target="_blank" rel="noopener">http://blog.csdn.net/suwei19870312/article/details/23258495</a><br><a href="http://www.jb51.net/article/51045.htm" target="_blank" rel="noopener">http://www.jb51.net/article/51045.htm</a><br><a href="https://yq.aliyun.com/ziliao/135889" target="_blank" rel="noopener">https://yq.aliyun.com/ziliao/135889</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">要使用 with 语句，首先要明白上下文管理器这一概念。有了上下文管理器，with 语句才能工作。</span><br><span class="line"></span><br><span class="line">下面是一组与上下文管理器和with 语句有关的概念。</span><br><span class="line"></span><br><span class="line">上下文管理协议（Context Management Protocol）：包含方法 __enter__() 和 __exit__()，支持</span><br><span class="line"></span><br><span class="line">该协议的对象要实现这两个方法。</span><br><span class="line"></span><br><span class="line">上下文管理器（Context Manager）：支持上下文管理协议的对象，这种对象实现了</span><br><span class="line"></span><br><span class="line">__enter__() 和 __exit__() 方法。上下文管理器定义执行 with 语句时要建立的运行时上下文，</span><br><span class="line"></span><br><span class="line">负责执行 with 语句块上下文中的进入与退出操作。通常使用 with 语句调用上下文管理器，</span><br><span class="line"></span><br><span class="line">也可以通过直接调用其方法来使用。</span><br><span class="line"></span><br><span class="line">运行时上下文（runtime context）：由上下文管理器创建，通过上下文管理器的 __enter__() 和</span><br><span class="line"></span><br><span class="line">__exit__() 方法实现，__enter__() 方法在语句体执行之前进入运行时上下文，__exit__() 在</span><br><span class="line"></span><br><span class="line">语句体执行完后从运行时上下文退出。with 语句支持运行时上下文这一概念。</span><br><span class="line"></span><br><span class="line">上下文表达式（Context Expression）：with 语句中跟在关键字 with 之后的表达式，该表达式</span><br><span class="line"></span><br><span class="line">要返回一个上下文管理器对象。</span><br><span class="line"></span><br><span class="line">语句体（with-body）：with 语句包裹起来的代码块，在执行语句体之前会调用上下文管</span><br><span class="line"></span><br><span class="line">理器的 __enter__() 方法，执行完语句体之后会执行 __exit__() 方法。</span><br><span class="line">基本语法和工作原理</span><br><span class="line"></span><br><span class="line">with 语句的语法格式如下：</span><br><span class="line">清单 1. with 语句的语法格式</span><br><span class="line"></span><br><span class="line">with context_expression [as target(s)]:</span><br><span class="line">    with-body</span><br><span class="line"></span><br><span class="line">这里 context_expression 要返回一个上下文管理器对象，该对象并不赋值给 as 子句中的 target(s) ，如果指定了 as 子句的话，会将上下文管理器的 __enter__() 方法的返回值赋值给 target(s)。target(s) 可以是单个变量，或者由“()”括起来的元组（不能是仅仅由“,”分隔的变量列表，必须加“()”）。</span><br><span class="line"></span><br><span class="line">Python 对一些内建对象进行改进，加入了对上下文管理器的支持，可以用于 with 语句中，比如可以自动关闭文件、线程锁的自动获取和释放等。假设要对一个文件进行操作，使用 with 语句可以有如下代码：</span><br><span class="line">清单 2. 使用 with 语句操作文件对象</span><br><span class="line"></span><br><span class="line">with open(r&apos;somefileName&apos;) as somefile:</span><br><span class="line">    for line in somefile:</span><br><span class="line">        print line</span><br><span class="line">        # ...more code</span><br><span class="line"></span><br><span class="line">这里使用了 with 语句，不管在处理文件过程中是否发生异常，都能保证 with 语句执行完毕后已经关闭了打开的文件句柄。如果使用传统的 try/finally 范式，则要使用类似如下代码：</span><br><span class="line">清单 3. try/finally 方式操作文件对象</span><br><span class="line"></span><br><span class="line">somefile = open(r&apos;somefileName&apos;)</span><br><span class="line">try:</span><br><span class="line">    for line in somefile:</span><br><span class="line">        print line</span><br><span class="line">        # ...more code</span><br><span class="line">finally:</span><br><span class="line">    somefile.close()</span><br><span class="line"></span><br><span class="line">比较起来，使用 with 语句可以减少编码量。已经加入对上下文管理协议支持的还有模块 threading、decimal 等。</span><br><span class="line"></span><br><span class="line">PEP 0343 对 with 语句的实现进行了描述。with 语句的执行过程类似如下代码块：</span><br><span class="line">清单 4. with 语句执行过程</span><br><span class="line"></span><br><span class="line">context_manager = context_expression</span><br><span class="line">exit = type(context_manager).__exit__</span><br><span class="line">value = type(context_manager).__enter__(context_manager)</span><br><span class="line">exc = True   # True 表示正常执行，即便有异常也忽略；False 表示重新抛出异常，需要对异常进行处理</span><br><span class="line">try:</span><br><span class="line">    try:</span><br><span class="line">        target = value  # 如果使用了 as 子句</span><br><span class="line">        with-body     # 执行 with-body</span><br><span class="line">    except:</span><br><span class="line">        # 执行过程中有异常发生</span><br><span class="line">        exc = False</span><br><span class="line">        # 如果 __exit__ 返回 True，则异常被忽略；如果返回 False，则重新抛出异常</span><br><span class="line">        # 由外层代码对异常进行处理</span><br><span class="line">        if not exit(context_manager, *sys.exc_info()):</span><br><span class="line">            raise</span><br><span class="line">finally:</span><br><span class="line">    # 正常退出，或者通过 statement-body 中的 break/continue/return 语句退出</span><br><span class="line">    # 或者忽略异常退出</span><br><span class="line">    if exc:</span><br><span class="line">        exit(context_manager, None, None, None)</span><br><span class="line">    # 缺省返回 None，None 在布尔上下文中看做是 False</span><br><span class="line"></span><br><span class="line">    执行 context_expression，生成上下文管理器 context_manager</span><br><span class="line">    调用上下文管理器的 __enter__() 方法；如果使用了 as 子句，则将 __enter__() 方法的返回值赋值给 as 子句中的 target(s)</span><br><span class="line">    执行语句体 with-body</span><br><span class="line">    不管是否执行过程中是否发生了异常，执行上下文管理器的 __exit__() 方法，__exit__() 方法负责执行“清理”工作，如释放资源等。如果执行过程中没有出现异常，或者语句体中执行了语句 break/continue/return，则以 None 作为参数调用 __exit__(None, None, None) ；如果执行过程中出现异常，则使用 sys.exc_info 得到的异常信息为参数调用 __exit__(exc_type, exc_value, exc_traceback)</span><br><span class="line">    出现异常时，如果 __exit__(type, value, traceback) 返回 False，则会重新抛出异常，让with 之外的语句逻辑来处理异常，这也是通用做法；如果返回 True，则忽略异常，不再对异常进行处理</span><br></pre></td></tr></table></figure></p>
<h5 id="Python升级模块"><a href="#Python升级模块" class="headerlink" title="Python升级模块"></a>Python升级模块</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pip 当前内建命令并不支持升级所有已安装的Python模块。</span><br><span class="line"></span><br><span class="line">列出当前安装的包：</span><br><span class="line">pip list</span><br><span class="line"></span><br><span class="line">列出可升级的包：</span><br><span class="line">pip list --outdate</span><br><span class="line"></span><br><span class="line">升级一个包：</span><br><span class="line">pip install --upgrade requests  // mac,linux,unix 在命令前加 sudo -H</span><br><span class="line"></span><br><span class="line">升级所有可升级的包：</span><br><span class="line">$ pip freeze --local | grep -v &apos;^-e&apos; | cut -d = -f 1  | xargs -n1 pip install -U</span><br><span class="line"></span><br><span class="line">$ for i in `pip list -o --format legacy|awk &apos;&#123;print $1&#125;&apos;` ; do pip install --upgrade $i; done</span><br></pre></td></tr></table></figure>
<h5 id="Python使用第三方源升级模块"><a href="#Python使用第三方源升级模块" class="headerlink" title="Python使用第三方源升级模块"></a>Python使用第三方源升级模块</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pip默认源由于墙，所以速度很慢，可使用第三源提高速度：</span><br><span class="line">vim ~/.pip/pip.conf</span><br><span class="line"></span><br><span class="line">[global]</span><br><span class="line">trusted-host = mirrors.aliyun.com</span><br><span class="line">index-url = http://mirrors.aliyun.com/pypi/simple</span><br></pre></td></tr></table></figure>
<h5 id="重新导入Python模块"><a href="#重新导入Python模块" class="headerlink" title="重新导入Python模块"></a>重新导入Python模块</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Python提供了reload()方法，它可以重新导入已import的模块。</span><br><span class="line"></span><br><span class="line">这个功能在Python交互式模式下非常有用，如果外部编辑器修改了源文件，你可以不退出交互式环境，直接重新导入被修改的模块即可。</span><br><span class="line"></span><br><span class="line">语法：</span><br><span class="line"># Python2.x</span><br><span class="line">reload(module)</span><br><span class="line"></span><br><span class="line"># Python 2.x-&gt;Python3.3</span><br><span class="line">import imp</span><br><span class="line">imp.reload(module)</span><br><span class="line"></span><br><span class="line"># Python3.4+</span><br><span class="line">import importlib</span><br><span class="line">importlib.reload(module)</span><br></pre></td></tr></table></figure>
<h5 id="Python查看模块版本"><a href="#Python查看模块版本" class="headerlink" title="Python查看模块版本"></a>Python查看模块版本</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; help(tushare)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; tushare.__version__</span><br><span class="line">&apos;0.8.2&apos;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; dir(tushare)</span><br><span class="line">[&apos;Bond&apos;, &apos;Equity&apos;, &apos;Fund&apos;, &apos;Fundamental&apos;, &apos;Future&apos;, &apos;HKequity&apos;, &apos;IV&apos;, &apos;Idx&apos;, &apos;Macro&apos;, &apos;MailMerge&apos;, &apos;Market&apos;, &apos;Master&apos;, &apos;Options&apos;, &apos;Subject&apos;, &apos;TraderAPI&apos;, &apos;__author__&apos;, &apos;__builtins__&apos;, &apos;__cached__&apos;, &apos;__doc__&apos;, &apos;__file__&apos;, &apos;__loader__&apos;, &apos;__name__&apos;, &apos;__package__&apos;, &apos;__path__&apos;, &apos;__spec__&apos;, &apos;__version__&apos;, &apos;broker_tops&apos;, &apos;cap_tops&apos;, &apos;datayes&apos;, &apos;day_boxoffice&apos;, &apos;day_cinema&apos;, &apos;forecast_data&apos;, &apos;fund&apos;, &apos;fund_holdings&apos;, &apos;futures&apos;, &apos;get_area_classified&apos;, &apos;get_balance_sheet&apos;, &apos;get_broker&apos;, &apos;get_cash_flow&apos;, &apos;get_cashflow_data&apos;, &apos;get_cffex_daily&apos;, &apos;get_concept_classified&apos;, &apos;get_cpi&apos;, &apos;get_czce_daily&apos;, &apos;get_dce_daily&apos;, &apos;get_debtpaying_data&apos;, &apos;get_deposit_rate&apos;, &apos;get_fund_info&apos;, &apos;get_future_daily&apos;, &apos;get_gdp_contrib&apos;, &apos;get_gdp_for&apos;, &apos;get_gdp_pull&apos;, &apos;get_gdp_quarter&apos;, &apos;get_gdp_year&apos;, &apos;get_gem_classified&apos;, &apos;get_gold_and_foreign_reserves&apos;, &apos;get_growth_data&apos;, &apos;get_h_data&apos;, &apos;get_hist_data&apos;, &apos;get_hists&apos;, &apos;get_hs300s&apos;, &apos;get_index&apos;, &apos;get_industry_classified&apos;, &apos;get_intlfuture&apos;, &apos;get_k_data&apos;, &apos;get_latest_news&apos;, &apos;get_loan_rate&apos;, &apos;get_money_supply&apos;, &apos;get_money_supply_bal&apos;, &apos;get_nav_close&apos;, &apos;get_nav_grading&apos;, &apos;get_nav_history&apos;, &apos;get_nav_open&apos;, &apos;get_notices&apos;, &apos;get_operation_data&apos;, &apos;get_ppi&apos;, &apos;get_profit_data&apos;, &apos;get_profit_statement&apos;, &apos;get_realtime_quotes&apos;, &apos;get_report_data&apos;, &apos;get_rrr&apos;, &apos;get_shfe_daily&apos;, &apos;get_shfe_vwap&apos;, &apos;get_sina_dd&apos;, &apos;get_sme_classified&apos;, &apos;get_st_classified&apos;, &apos;get_stock_basics&apos;, &apos;get_suspended&apos;, &apos;get_sz50s&apos;, &apos;get_terminated&apos;, &apos;get_tick_data&apos;, &apos;get_today_all&apos;, &apos;get_today_ticks&apos;, &apos;get_token&apos;, &apos;get_zz500s&apos;, &apos;global_realtime&apos;, &apos;guba_sina&apos;, &apos;inst_detail&apos;, &apos;inst_tops&apos;, &apos;internet&apos;, &apos;is_holiday&apos;, &apos;latest_content&apos;, &apos;lpr_data&apos;, &apos;lpr_ma_data&apos;, &apos;month_boxoffice&apos;, &apos;new_stocks&apos;, &apos;notice_content&apos;, &apos;profit_data&apos;, &apos;realtime_boxoffice&apos;, &apos;remove_broker&apos;, &apos;set_broker&apos;, &apos;set_token&apos;, &apos;sh_margin_details&apos;, &apos;sh_margins&apos;, &apos;shibor_data&apos;, &apos;shibor_ma_data&apos;, &apos;shibor_quote_data&apos;, &apos;stock&apos;, &apos;sz_margin_details&apos;, &apos;sz_margins&apos;, &apos;top10_holders&apos;, &apos;top_list&apos;, &apos;trade_cal&apos;, &apos;trader&apos;, &apos;util&apos;, &apos;xsg_data&apos;]</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h5 id="Python-socket编程"><a href="#Python-socket编程" class="headerlink" title="Python socket编程"></a>Python socket编程</h5><p><a href="https://gist.github.com/kevinkindom/108ffd675cb9253f8f71" target="_blank" rel="noopener">https://gist.github.com/kevinkindom/108ffd675cb9253f8f71</a><br><a href="https://gxnotes.com/article/80943.html" target="_blank" rel="noopener">https://gxnotes.com/article/80943.html</a><br><a href="https://stackoverflow.com/questions/6439790/sending-a-reset-in-tcp-ip-socket-connection" target="_blank" rel="noopener">https://stackoverflow.com/questions/6439790/sending-a-reset-in-tcp-ip-socket-connection</a><br><a href="https://stackoverflow.com/questions/19378809/how-to-stop-a-tcpserver-how-to-remove-time-wait-sockets" target="_blank" rel="noopener">https://stackoverflow.com/questions/19378809/how-to-stop-a-tcpserver-how-to-remove-time-wait-sockets</a><br><a href="https://stackoverflow.com/questions/6380057/python-binding-socket-address-already-in-use" target="_blank" rel="noopener">https://stackoverflow.com/questions/6380057/python-binding-socket-address-already-in-use</a><br><a href="http://hhtucode.blogspot.tw/2013/03/python-simple-socket-server.html" target="_blank" rel="noopener">http://hhtucode.blogspot.tw/2013/03/python-simple-socket-server.html</a><br><a href="https://brokenbad.com/address-reuse-in-pythons-socketserver/" target="_blank" rel="noopener">https://brokenbad.com/address-reuse-in-pythons-socketserver/</a><br><a href="https://www.tonylin.idv.tw/dokuwiki/doku.php/python:socket:time_wait_issue" target="_blank" rel="noopener">https://www.tonylin.idv.tw/dokuwiki/doku.php/python:socket:time_wait_issue</a><br><a href="https://stackoverflow.com/questions/17659334/connections-outlive-socketserver-tcpserver" target="_blank" rel="noopener">https://stackoverflow.com/questions/17659334/connections-outlive-socketserver-tcpserver</a><br><a href="https://stackoverflow.com/questions/15260558/python-tcpserver-address-already-in-use-but-i-close-the-server-and-i-use-allow" target="_blank" rel="noopener">https://stackoverflow.com/questions/15260558/python-tcpserver-address-already-in-use-but-i-close-the-server-and-i-use-allow</a><br><a href="https://stackoverflow.com/questions/6380057/python-binding-socket-address-already-in-use" target="_blank" rel="noopener">https://stackoverflow.com/questions/6380057/python-binding-socket-address-already-in-use</a><br><a href="https://stackoverflow.com/questions/19378809/how-to-stop-a-tcpserver-how-to-remove-time-wait-sockets" target="_blank" rel="noopener">https://stackoverflow.com/questions/19378809/how-to-stop-a-tcpserver-how-to-remove-time-wait-sockets</a><br><a href="http://hhtucode.blogspot.tw/2013/03/python-simple-socket-server.html" target="_blank" rel="noopener">http://hhtucode.blogspot.tw/2013/03/python-simple-socket-server.html</a><br><a href="http://wiki.jikexueyuan.com/project/java-socket/socket-tcp-bean.html" target="_blank" rel="noopener">http://wiki.jikexueyuan.com/project/java-socket/socket-tcp-bean.html</a></p>
<p>协议相关<br><a href="http://blog.csdn.net/wenqian1991/article/details/40110703" target="_blank" rel="noopener">http://blog.csdn.net/wenqian1991/article/details/40110703</a><br><a href="http://www.firefoxbug.com/index.php/archives/2796/" target="_blank" rel="noopener">http://www.firefoxbug.com/index.php/archives/2796/</a><br><a href="https://serverfault.com/questions/329845/how-to-forcibly-close-a-socket-in-time-wait" target="_blank" rel="noopener">https://serverfault.com/questions/329845/how-to-forcibly-close-a-socket-in-time-wait</a><br><a href="http://blog.csdn.net/tianmohust/article/details/7436157" target="_blank" rel="noopener">http://blog.csdn.net/tianmohust/article/details/7436157</a><br><a href="http://blog.csdn.net/xiaofei0859/article/details/6044694" target="_blank" rel="noopener">http://blog.csdn.net/xiaofei0859/article/details/6044694</a><br><a href="http://blog.csdn.net/overstack/article/details/8833894" target="_blank" rel="noopener">http://blog.csdn.net/overstack/article/details/8833894</a><br><a href="https://www.zhihu.com/question/50646354" target="_blank" rel="noopener">https://www.zhihu.com/question/50646354</a><br><a href="http://blog.davidvassallo.me/2010/07/13/time_wait-and-port-reuse/" target="_blank" rel="noopener">http://blog.davidvassallo.me/2010/07/13/time_wait-and-port-reuse/</a><br><a href="http://www.cnblogs.com/ggzss/archive/2011/09/25/2190404.html" target="_blank" rel="noopener">http://www.cnblogs.com/ggzss/archive/2011/09/25/2190404.html</a><br><a href="http://www.cnblogs.com/zhenjing/archive/2011/04/20/2021791.html" target="_blank" rel="noopener">http://www.cnblogs.com/zhenjing/archive/2011/04/20/2021791.html</a><br><a href="http://blog.163.com/xychenbaihu@yeah/blog/static/13222965520118139252103/" target="_blank" rel="noopener">http://blog.163.com/xychenbaihu@yeah/blog/static/13222965520118139252103/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">class ThreadedTCPRequestHandler(socketserver.BaseRequestHandler):</span><br><span class="line"></span><br><span class="line">    def handle(self):</span><br><span class="line">        data = str(self.request.recv(1024), &apos;ascii&apos;)</span><br><span class="line">        cur_thread = threading.current_thread()</span><br><span class="line">        response = bytes(&quot;&#123;&#125;: &#123;&#125;&quot;.format(cur_thread.name, data), &apos;ascii&apos;)</span><br><span class="line">        self.request.sendall(response)</span><br><span class="line"></span><br><span class="line">    def finish(self):</span><br><span class="line">        print(&quot;end socket connect with client ip: %s&quot; % str(self.client_address))</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line">    def setup(self):</span><br><span class="line">        print(&quot;start socket connect with client ip: %s&quot; % str(self.client_address))</span><br><span class="line">        pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class ThreadedTCPServer(socketserver.ThreadingMixIn, socketserver.TCPServer):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    This is because the previous execution has left the socket in a TIME_WAIT state, and can’t be immediately reused.</span><br><span class="line">    There is a socket flag to set, in order to prevent this, socket.SO_REUSEADDR:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    socketserver.TCPServer.allow_reuse_address = True</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def client(ip, port, message):</span><br><span class="line">    with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as sock:</span><br><span class="line">        # sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)</span><br><span class="line">        sock.connect((ip, port))</span><br><span class="line">        sock.sendall(bytes(message, &apos;ascii&apos;))</span><br><span class="line">        response = str(sock.recv(1024), &apos;ascii&apos;)</span><br><span class="line">        print(&quot;Received: &#123;&#125;&quot;.format(response))</span><br><span class="line">        print(socket.gethostbyname(socket.gethostname()), socket.gethostbyaddr(socket.gethostname()), socket.gethostname())</span><br><span class="line">        # sock.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    # Port 0 means to select an arbitrary unused port</span><br><span class="line">    # host, port = &quot;localhost&quot;, 0</span><br><span class="line">    host, port = &quot;localhost&quot;, 20000</span><br><span class="line"></span><br><span class="line">    server = ThreadedTCPServer((host, port), ThreadedTCPRequestHandler)</span><br><span class="line">    with server:</span><br><span class="line">        ip, port = server.server_address</span><br><span class="line"></span><br><span class="line">        print(ip, port)</span><br><span class="line"></span><br><span class="line">        # Start a thread with the server -- that thread will then start one</span><br><span class="line">        # more thread for each request</span><br><span class="line">        server_thread = threading.Thread(target=server.serve_forever)</span><br><span class="line">        # Exit the server thread when the main thread terminates</span><br><span class="line">        server_thread.daemon = True</span><br><span class="line">        server_thread.start()</span><br><span class="line">        print(&quot;Server loop running in thread:&quot;, server_thread.name)</span><br><span class="line"></span><br><span class="line">        client(ip, port, &quot;Hello World 1&quot;)</span><br><span class="line">        time.sleep(10)</span><br><span class="line">        client(ip, port, &quot;Hello World 2&quot;)</span><br><span class="line">        time.sleep(10)</span><br><span class="line">        client(ip, port, &quot;Hello World 3&quot;)</span><br><span class="line">        time.sleep(10)</span><br><span class="line"></span><br><span class="line">        server.server_close()</span><br><span class="line">        server.shutdown()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    time_start = time.time()</span><br><span class="line">    main()</span><br><span class="line">    print(&quot;\n\nTotal Elapsed Time: %s seconds\n&quot; % (time.time() - time_start))</span><br></pre></td></tr></table></figure>
<h5 id="Python多线程"><a href="#Python多线程" class="headerlink" title="Python多线程"></a>Python多线程</h5><p><a href="http://yangcongchufang.com/%E9%AB%98%E7%BA%A7python%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/python-process-thread.html" target="_blank" rel="noopener">http://yangcongchufang.com/%E9%AB%98%E7%BA%A7python%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/python-process-thread.html</a><br><a href="https://tracholar.github.io/wiki/python/python-multiprocessing-tutorial.html" target="_blank" rel="noopener">https://tracholar.github.io/wiki/python/python-multiprocessing-tutorial.html</a><br><a href="https://morvanzhou.github.io/tutorials/python-basic/multiprocessing/" target="_blank" rel="noopener">https://morvanzhou.github.io/tutorials/python-basic/multiprocessing/</a><br><a href="https://www.ibm.com/developerworks/cn/aix/library/au-multiprocessing/index.html" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/aix/library/au-multiprocessing/index.html</a><br><a href="https://zhuanlan.zhihu.com/p/20953544" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/20953544</a><br><a href="http://blackwolfsec.cc/2016/07/22/Python_mutithreading_mutiprocessing/" target="_blank" rel="noopener">http://blackwolfsec.cc/2016/07/22/Python_mutithreading_mutiprocessing/</a><br><a href="http://blog.csdn.net/zwan0518/article/details/38434567" target="_blank" rel="noopener">http://blog.csdn.net/zwan0518/article/details/38434567</a><br><a href="http://www.cnblogs.com/whatisfantasy/p/6440585.html" target="_blank" rel="noopener">http://www.cnblogs.com/whatisfantasy/p/6440585.html</a><br><a href="http://python3-cookbook.readthedocs.io/zh_CN/latest/c12/p01_start_stop_thread.html" target="_blank" rel="noopener">http://python3-cookbook.readthedocs.io/zh_CN/latest/c12/p01_start_stop_thread.html</a><br><a href="http://www.runoob.com/python/python-multithreading.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-multithreading.html</a></p>
<h5 id="list和dict的线程安全"><a href="#list和dict的线程安全" class="headerlink" title="list和dict的线程安全"></a>list和dict的线程安全</h5><p><a href="https://www.zoulei.net/2016/07/31/list_dict_threading_safe/" target="_blank" rel="noopener">https://www.zoulei.net/2016/07/31/list_dict_threading_safe/</a></p>
<h5 id="Python协程-异步编程"><a href="#Python协程-异步编程" class="headerlink" title="Python协程(异步编程)"></a>Python协程(异步编程)</h5><p><a href="https://python.freelycode.com/contribution/detail/57" target="_blank" rel="noopener">https://python.freelycode.com/contribution/detail/57</a><br><a href="https://python.freelycode.com/contribution/detail/858" target="_blank" rel="noopener">https://python.freelycode.com/contribution/detail/858</a><br><a href="https://zhuanlan.zhihu.com/p/27258289" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/27258289</a><br><a href="https://ipfans.github.io/2015/08/introduction-to-async-and-await/" target="_blank" rel="noopener">https://ipfans.github.io/2015/08/introduction-to-async-and-await/</a><br><a href="http://www.techug.com/post/playing-around.html" target="_blank" rel="noopener">http://www.techug.com/post/playing-around.html</a><br><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432090954004980bd351f2cd4cc18c9e6c06d855c498000" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432090954004980bd351f2cd4cc18c9e6c06d855c498000</a><br><a href="https://ipfans.github.io/2016/02/simple-implement-asyncio-to-understand-how-async-works/" target="_blank" rel="noopener">https://ipfans.github.io/2016/02/simple-implement-asyncio-to-understand-how-async-works/</a><br><a href="http://www.woola.net/detail/2016-10-18-python-coprocessor.html" target="_blank" rel="noopener">http://www.woola.net/detail/2016-10-18-python-coprocessor.html</a><br><a href="http://python.jobbole.com/88427/" target="_blank" rel="noopener">http://python.jobbole.com/88427/</a><br><a href="https://github.com/ictar/python-doc/blob/master/Python%20Common/Python%20async-await%E6%95%99%E7%A8%8B.md" target="_blank" rel="noopener">https://github.com/ictar/python-doc/blob/master/Python%20Common/Python%20async-await%E6%95%99%E7%A8%8B.md</a><br><a href="http://www.jianshu.com/p/b5e347b3a17c" target="_blank" rel="noopener">http://www.jianshu.com/p/b5e347b3a17c</a><br><a href="https://www.ziwenxie.site/2016/12/19/python-asyncio/" target="_blank" rel="noopener">https://www.ziwenxie.site/2016/12/19/python-asyncio/</a><br><a href="http://python.jobbole.com/87310/" target="_blank" rel="noopener">http://python.jobbole.com/87310/</a></p>
<h5 id="Python-subprocess超时问题解决集锦"><a href="#Python-subprocess超时问题解决集锦" class="headerlink" title="Python subprocess超时问题解决集锦"></a>Python subprocess超时问题解决集锦</h5><p><a href="http://www.jianshu.com/p/a58491d1abf8" target="_blank" rel="noopener">http://www.jianshu.com/p/a58491d1abf8</a><br><a href="http://everettjf.com/2016/01/29/python27-subprocess-timeout/" target="_blank" rel="noopener">http://everettjf.com/2016/01/29/python27-subprocess-timeout/</a><br><a href="https://stackoverflow.com/questions/1191374/using-module-subprocess-with-timeout" target="_blank" rel="noopener">https://stackoverflow.com/questions/1191374/using-module-subprocess-with-timeout</a><br><a href="https://stackoverflow.com/questions/4789837/how-to-terminate-a-python-subprocess-launched-with-shell-true" target="_blank" rel="noopener">https://stackoverflow.com/questions/4789837/how-to-terminate-a-python-subprocess-launched-with-shell-true</a><br><a href="https://stackoverflow.com/questions/16866602/kill-a-running-subprocess-call" target="_blank" rel="noopener">https://stackoverflow.com/questions/16866602/kill-a-running-subprocess-call</a><br><a href="https://stackoverflow.com/questions/4084322/killing-a-process-created-with-pythons-subprocess-popen" target="_blank" rel="noopener">https://stackoverflow.com/questions/4084322/killing-a-process-created-with-pythons-subprocess-popen</a><br><a href="http://python.usyiyi.cn/translate/python_278/library/subprocess.html#module-subprocess" target="_blank" rel="noopener">http://python.usyiyi.cn/translate/python_278/library/subprocess.html#module-subprocess</a><br><a href="http://usyiyi.cn/documents/python_278/library/subprocess.html" target="_blank" rel="noopener">http://usyiyi.cn/documents/python_278/library/subprocess.html</a></p>
<p><a href="http://blog.csdn.net/xhw88398569/article/details/48022967" target="_blank" rel="noopener">http://blog.csdn.net/xhw88398569/article/details/48022967</a><br><a href="http://blog.csdn.net/imzoer/article/details/8678029" target="_blank" rel="noopener">http://blog.csdn.net/imzoer/article/details/8678029</a><br><a href="http://www.firefoxbug.com/index.php/archives/1690/" target="_blank" rel="noopener">http://www.firefoxbug.com/index.php/archives/1690/</a><br><a href="http://python3-cookbook.readthedocs.io/zh_CN/latest/c13/p06_executing_external_command_and_get_its_output.html" target="_blank" rel="noopener">http://python3-cookbook.readthedocs.io/zh_CN/latest/c13/p06_executing_external_command_and_get_its_output.html</a><br><a href="http://www.voidcn.com/article/p-aobdgfcq-bad.html" target="_blank" rel="noopener">http://www.voidcn.com/article/p-aobdgfcq-bad.html</a><br><a href="https://python.freelycode.com/contribution/detail/244" target="_blank" rel="noopener">https://python.freelycode.com/contribution/detail/244</a><br><a href="http://codewenda.com/%E4%BD%BF%E7%94%A8%E6%A8%A1%E5%9D%97subprocess%E4%B8%8E%E8%B6%85%E6%97%B6/" target="_blank" rel="noopener">http://codewenda.com/%E4%BD%BF%E7%94%A8%E6%A8%A1%E5%9D%97subprocess%E4%B8%8E%E8%B6%85%E6%97%B6/</a><br><a href="http://blog.csdn.net/cenziboy/article/details/8298844" target="_blank" rel="noopener">http://blog.csdn.net/cenziboy/article/details/8298844</a><br><a href="http://outofmemory.cn/code-snippet/6725/python-subprocess-module-jiankong-zi-process-2-zhong-mode-mang-wait-directly-return-tongshi-setting" target="_blank" rel="noopener">http://outofmemory.cn/code-snippet/6725/python-subprocess-module-jiankong-zi-process-2-zhong-mode-mang-wait-directly-return-tongshi-setting</a><br><a href="http://www.cnblogs.com/Security-Darren/p/4733368.html" target="_blank" rel="noopener">http://www.cnblogs.com/Security-Darren/p/4733368.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">http://everettjf.com/2016/01/29/python27-subprocess-timeout/</span><br><span class="line">http://www.jianshu.com/p/a58491d1abf8</span><br><span class="line">https://stackoverflow.com/questions/1191374/using-module-subprocess-with-timeout</span><br><span class="line">https://stackoverflow.com/questions/4789837/how-to-terminate-a-python-subprocess-launched-with-shell-true</span><br><span class="line"></span><br><span class="line">import subprocess, threading</span><br><span class="line"></span><br><span class="line">class Command(object):</span><br><span class="line">    def __init__(self, cmd):</span><br><span class="line">        self.cmd = cmd</span><br><span class="line">        self.process = None</span><br><span class="line"></span><br><span class="line">    def run(self, timeout):</span><br><span class="line">        def target():</span><br><span class="line">            print &apos;Thread started&apos;</span><br><span class="line"></span><br><span class="line">            # As Sai said, the shell is the child, so signals are intercepted by it -- best way I&apos;ve found is to use shell=False and use shlex to split the command line</span><br><span class="line">            # 很快查到了问题所在，shell=True 参数会模拟在shell中执行，先是起了shell进程，再从shell起了phantomjs进程。解决方案（</span><br><span class="line">去掉了shell=True</span><br><span class="line">            # process.terminate() doesn&apos;t work when using shell=True. This answer will help you</span><br><span class="line">            # https://stackoverflow.com/questions/4084322/killing-a-process-created-with-pythons-subprocess-popen</span><br><span class="line"></span><br><span class="line">            # self.process = subprocess.Popen(self.cmd, shell=True)</span><br><span class="line">            self.process = subprocess.Popen(self.cmd, shell=False)</span><br><span class="line">            self.process.communicate()</span><br><span class="line">            print &apos;Thread finished&apos;</span><br><span class="line"></span><br><span class="line">        thread = threading.Thread(target=target)</span><br><span class="line">        thread.start()</span><br><span class="line"></span><br><span class="line">        thread.join(timeout)</span><br><span class="line">        if thread.is_alive():</span><br><span class="line">            print &apos;Terminating process&apos;</span><br><span class="line">            self.process.terminate()</span><br><span class="line">            thread.join()</span><br><span class="line">        print self.process.returncode</span><br><span class="line"></span><br><span class="line">command = Command(&quot;echo &apos;Process started&apos;; sleep 2; echo &apos;Process finished&apos;&quot;)</span><br><span class="line">command.run(timeout=3)</span><br><span class="line">command.run(timeout=1)</span><br></pre></td></tr></table></figure>
<h5 id="Python的logging模块"><a href="#Python的logging模块" class="headerlink" title="Python的logging模块"></a>Python的logging模块</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">def logging_config():</span><br><span class="line">    log_format = &quot;%(asctime)s [line: %(lineno)d] - %(levelname)s - %(message)s&quot;</span><br><span class="line">    # log_format = &quot;[line: %(lineno)d] - %(levelname)s - %(message)s&quot;</span><br><span class="line">    logging.basicConfig(level=LOGGING_LEVEL, format=log_format)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Format Description</span><br><span class="line">%(name)s					Name of the logger (logging channel).</span><br><span class="line">%(levelno)s					Numeric logging level for the message (DEBUG, INFO, WARNING, ERROR, CRITICAL).</span><br><span class="line">%(levelname)s				Text logging level for the message (&apos;DEBUG&apos;, &apos;INFO&apos;, &apos;WARNING&apos;, &apos;ERROR&apos;, &apos;CRITICAL&apos;).</span><br><span class="line">%(pathname)s				Full pathname of the source file where the logging call was issued (if available).</span><br><span class="line">%(filename)s				Filename portion of pathname.</span><br><span class="line">%(module)s					Module (name portion of filename).</span><br><span class="line">%(funcName)s				Name of function containing the logging call.</span><br><span class="line">%(lineno)d					Source line number where the logging call was issued (if available).</span><br><span class="line">%(created)f					Time when the LogRecord was created (as returned by time.time()).</span><br><span class="line">%(relativeCreated)d			Time in milliseconds when the LogRecord was created, relative to the time the logging module was loaded.</span><br><span class="line">%(asctime)s					Human-readable time when the LogRecord was created. By default this is of the form “2003-07-08 16:49:45,896” (the numbers after the comma are millisecond portion of the time).</span><br><span class="line">%(msecs)d					Millisecond portion of the time when the LogRecord was created.</span><br><span class="line">%(thread)d					Thread ID (if available).</span><br><span class="line">%(threadName)s				Thread name (if available).</span><br><span class="line">%(process)d					Process ID (if available).</span><br><span class="line">%(message)s					The logged message, computed as msg % args.</span><br></pre></td></tr></table></figure>
<h5 id="python-enumerate用法"><a href="#python-enumerate用法" class="headerlink" title="python enumerate用法"></a>python enumerate用法</h5><p><a href="http://blog.csdn.net/dcrmg/article/details/78148997" target="_blank" rel="noopener">http://blog.csdn.net/dcrmg/article/details/78148997</a><br><a href="http://blog.csdn.net/xyw_blog/article/details/18401237" target="_blank" rel="noopener">http://blog.csdn.net/xyw_blog/article/details/18401237</a><br><a href="http://blog.csdn.net/churximi/article/details/51648388" target="_blank" rel="noopener">http://blog.csdn.net/churximi/article/details/51648388</a><br><a href="http://www.runoob.com/python/python-func-enumerate.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-func-enumerate.html</a><br><a href="http://www.runoob.com/python3/python3-func-enumerate.html" target="_blank" rel="noopener">http://www.runoob.com/python3/python3-func-enumerate.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; list(enumerate([5,6,7,8,9]))</span><br><span class="line">[(0, 5), (1, 6), (2, 7), (3, 8), (4, 9)]</span><br><span class="line">&gt;&gt;&gt; lst = list(range(100, 200))</span><br><span class="line">&gt;&gt;&gt; lst</span><br><span class="line">[100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199]</span><br><span class="line">&gt;&gt;&gt; for index, value in enumerate(lst):</span><br><span class="line">...     print(&apos;&#123;&#125; -- &#123;&#125;&apos;.format(index, value))</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">eunmerate在英文中是列举、枚举的意思，在python中eunmerate()是一个内置的函数，用于在一个可迭代或可遍历的对象（如列表、字符串、数组、字典）中，将对象组成一个一个序列和索引，可以同时获得索引和索引值。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">enumerate函数原型：</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    enumerate(sequence, [start=0])</span><br><span class="line"></span><br><span class="line">功能：将可循环序列sequence以start开始分别列出序列数据和数据下标；</span><br><span class="line"></span><br><span class="line">即对一个可遍历的数据对象(如列表、元组或字符串)，enumerate会将该数据对象组合为一个索引序列，同时列出数据和数据下标；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">enumerate()使用</span><br><span class="line">对于一个列表list1，同时列出索引和每一个元素：</span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    list1 = [&apos;A&apos;,&apos;B&apos;,&apos;C&apos;,&apos;D&apos;,&apos;E&apos;]</span><br><span class="line">    for index, item in enumerate(list1):</span><br><span class="line">        print index, item</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    0 A</span><br><span class="line">    1 B</span><br><span class="line">    2 C</span><br><span class="line">    3 E</span><br><span class="line">    4 F</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">enumerate还可以接受第二个参数start，仍会从第一个索引值开始，遍历完所有的索引值，但列出来的索引起始值是从start开始（默认为0）：</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    list1 = [&apos;A&apos;,&apos;B&apos;,&apos;C&apos;,&apos;D&apos;,&apos;E&apos;]</span><br><span class="line">    for index, item in enumerate(list1，10):</span><br><span class="line">        print index, item</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    10 A</span><br><span class="line">    11 B</span><br><span class="line">    12 C</span><br><span class="line">    13 D</span><br><span class="line">    14 E</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">enumerate用于字符串：</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    str = &apos;ABCDE&apos;</span><br><span class="line">    for index , item in enumerate(str):</span><br><span class="line">        print index , item</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    0 A</span><br><span class="line">    1 B</span><br><span class="line">    2 C</span><br><span class="line">    3 E</span><br><span class="line">    4 F</span><br></pre></td></tr></table></figure></p>
<h5 id="repr-函数"><a href="#repr-函数" class="headerlink" title="repr() 函数"></a>repr() 函数</h5><p><a href="http://www.runoob.com/python/python-func-repr.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-func-repr.html</a><br><a href="http://www.jianshu.com/p/2a41315ca47e" target="_blank" rel="noopener">http://www.jianshu.com/p/2a41315ca47e</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">描述</span><br><span class="line"></span><br><span class="line">repr() 函数将对象转化为供解释器读取的形式。</span><br><span class="line">语法</span><br><span class="line"></span><br><span class="line">以下是 repr() 方法的语法:</span><br><span class="line"></span><br><span class="line">repr(object)</span><br><span class="line"></span><br><span class="line">参数</span><br><span class="line"></span><br><span class="line">    object -- 对象。</span><br><span class="line"></span><br><span class="line">返回值</span><br><span class="line"></span><br><span class="line">返回一个对象的 string 格式。</span><br><span class="line">实例</span><br><span class="line"></span><br><span class="line">以下展示了使用 repr() 方法的实例：</span><br><span class="line">&gt;&gt;&gt;s = &apos;RUNOOB&apos;</span><br><span class="line">&gt;&gt;&gt; repr(s)</span><br><span class="line">&quot;&apos;RUNOOB&apos;&quot;</span><br><span class="line">&gt;&gt;&gt; dict = &#123;&apos;runoob&apos;: &apos;runoob.com&apos;, &apos;google&apos;: &apos;google.com&apos;&#125;;</span><br><span class="line">&gt;&gt;&gt; repr(dict)</span><br><span class="line">&quot;&#123;&apos;google&apos;: &apos;google.com&apos;, &apos;runoob&apos;: &apos;runoob.com&apos;&#125;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在 Python 中要将某一类型的变量或者常量转换为字符串对象通常有两种方法，即 str() 或者 repr() 。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; a = 10</span><br><span class="line">&gt;&gt;&gt; type(str(a))</span><br><span class="line">&lt;class &apos;str&apos;&gt;</span><br><span class="line">&gt;&gt;&gt; type(repr(a))</span><br><span class="line">&lt;class &apos;str&apos;&gt;</span><br><span class="line"></span><br><span class="line">但是这二者之间有什么区别呢？因为提供两个功能完全相同的内建函数是没有意义的。先看一个例子。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; print(str(&apos;123&apos;))</span><br><span class="line">123</span><br><span class="line">&gt;&gt;&gt; print(str(123))</span><br><span class="line">123</span><br><span class="line">&gt;&gt;&gt; print(repr(&apos;123&apos;))</span><br><span class="line">&apos;123&apos;</span><br><span class="line">&gt;&gt;&gt; print(repr(123))</span><br><span class="line">123</span><br><span class="line"></span><br><span class="line">从例子中不难发现，当我们把一个字符串传给 str() 函数再打印到终端的时候，输出的字符不带引号。而将一个字符串传给 repr() 函数再打印到终端的时候，输出的字符带有引号。</span><br><span class="line"></span><br><span class="line">造成这两种输出形式不同的原因在于：</span><br><span class="line"></span><br><span class="line">    print 语句结合 str() 函数实际上是调用了对象的 __str__ 方法来输出结果。而 print 结合 repr() 实际上是调用对象的 __repr__ 方法输出结果。下例中我们用 str 对象直接调用这两个方法，输出结果的形式与前一个例子保持一致。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; print(&apos;123&apos;.__repr__())</span><br><span class="line">&apos;123&apos;</span><br><span class="line">&gt;&gt;&gt; print(&apos;123&apos;.__str__())</span><br><span class="line">123</span><br><span class="line"></span><br><span class="line">不过这个例子可能还是无法很好表达到底 str() 与 repr() 各有什么意义，我们再来看一个例子。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; from datetime import datetime</span><br><span class="line">&gt;&gt;&gt; now = datetime.now()</span><br><span class="line">&gt;&gt;&gt; print(str(now))</span><br><span class="line">2017-04-22 15:41:33.012917</span><br><span class="line">&gt;&gt;&gt; print(repr(now))</span><br><span class="line">datetime.datetime(2017, 4, 22, 15, 41, 33, 12917)</span><br><span class="line"></span><br><span class="line">通过 str() 的输出结果我们能很好地知道 now 实例的内容，但是却丢失了 now 实例的数据类型信息。而通过 repr() 的输出结果我们不仅能获得 now 实例的内容，还能知道 now 是 datetime.datetime 对象的实例。</span><br><span class="line"></span><br><span class="line">因此 str() 与 repr() 的不同在于：</span><br><span class="line"></span><br><span class="line">    str() 的输出追求可读性，输出格式要便于理解，适合用于输出内容到用户终端。</span><br><span class="line">    repr() 的输出追求明确性，除了对象内容，还需要展示出对象的数据类型信息，适合开发和调试阶段使用。</span><br><span class="line"></span><br><span class="line">另外如果想要自定义类的实例能够被 str() 和 repr() 所调用，那么就需要在自定义类中重载 __str__ 和 __repr__ 方法。</span><br><span class="line"></span><br><span class="line">作者：叶俊贤</span><br><span class="line">链接：http://www.jianshu.com/p/2a41315ca47e</span><br><span class="line">來源：简书</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure></p>
<h5 id="lambda函数"><a href="#lambda函数" class="headerlink" title="lambda函数"></a>lambda函数</h5><p><a href="http://blog.csdn.net/cc7756789w/article/details/46765391" target="_blank" rel="noopener">http://blog.csdn.net/cc7756789w/article/details/46765391</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">lambda 通常称为匿名函数，常用于定义一些很简单的函数。</span><br><span class="line">注意: lambda是一个表达式，lambda会创建一个函数对象，但不会把这个函数对象赋给一个标识符；而def是语句，def会把一个函数对象赋值给一个变量。</span><br><span class="line"></span><br><span class="line">表达式 Expressions：</span><br><span class="line">有值，所以可以写在赋值语句的右侧，而import，for等语句不能被用于赋值。</span><br><span class="line"></span><br><span class="line">语句 Statement：</span><br><span class="line">不一定有值。语句有简单语句和复合语句之分：简单语句是指一逻辑行的代码，例如表达式语句、赋值语句和return语句等。复合语句是指包含、影响或控制一组语句的代码。例如if、try和class语句等。</span><br><span class="line"></span><br><span class="line">因为lambda是表达式，所以可以直接作为list或dict的成员 [lambda x: x*x, lambda x: x+x] 但是def等语句无法直接放入其中。</span><br><span class="line"></span><br><span class="line">lambda用法：</span><br><span class="line"></span><br><span class="line">pord = lambda x: x*x</span><br><span class="line">print pord(2)</span><br><span class="line"># 4</span><br><span class="line"></span><br><span class="line">prod2 = lambda x,y: x*y</span><br><span class="line">print prod2(2,3)</span><br><span class="line"># 6</span><br><span class="line"></span><br><span class="line">lambda ： 后面只能有一个语句，就如def 的 return 一样用于返回值，所以无法在后面使用多余的语句如if等，并且这样返回也是错的：</span><br><span class="line"></span><br><span class="line">prod = lambda x,y: x,y</span><br><span class="line"># NameError: name &apos;y&apos; is not defined</span><br><span class="line"></span><br><span class="line">来看看 def 定义的函数会返回什么？</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; def y():</span><br><span class="line">...     x = 2</span><br><span class="line">...     y = 4</span><br><span class="line">...     return x,y</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; y()</span><br><span class="line">(2, 4)</span><br><span class="line">&gt;&gt;&gt; type(y())</span><br><span class="line">&lt;type &apos;tuple&apos;&gt;</span><br><span class="line"></span><br><span class="line">返回了一个元组，return并不能返回多个值，故而a, b 被语法糖元组给包裹了，但是很显然lambda并不支持这么做。</span><br><span class="line"></span><br><span class="line">lambda起到简化语句，并且不需要担心命名冲突。lambda 也可直接作为函数的返回语句，起到一个闭包Closure的作用：</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; def a(x, y):</span><br><span class="line">...     return lambda : x*x + y*y</span><br><span class="line">...</span><br><span class="line">&gt;&gt;&gt; a(2,3)</span><br><span class="line">&lt;function &lt;lambda&gt; at 0x7f2133346320&gt;</span><br><span class="line">&gt;&gt;&gt; a(2,3)()</span><br><span class="line">13</span><br><span class="line"></span><br><span class="line">你甚至可以配合reduce高阶函数利用一条代码就实现一个阶乘：</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; factorial = lambda x: reduce(int.__mul__, xrange(2,x+1))</span><br><span class="line">&gt;&gt;&gt; factorial(10)</span><br><span class="line">3628800</span><br></pre></td></tr></table></figure></p>
<h5 id="reduce函数"><a href="#reduce函数" class="headerlink" title="reduce函数"></a>reduce函数</h5><p><a href="http://blog.csdn.net/xxkkff/article/details/4411383" target="_blank" rel="noopener">http://blog.csdn.net/xxkkff/article/details/4411383</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">天在搜用python求阶乘的时候, 搜出来的最简单的是用reduce这个built-in function, 但是我在用reduce的时候, 却报NameError: name &apos;reduce&apos; is not defined. 于是又搜了一下,发现在python 3.0.0.0以后, reduce已经不在built-in function里了, 要用它就得from functools import reduce.</span><br><span class="line"></span><br><span class="line">详见The fate of reduce() in Python 3000</span><br><span class="line"></span><br><span class="line">reduce的用法</span><br><span class="line"></span><br><span class="line">reduce(function, sequence[, initial]) -&gt; value</span><br><span class="line"></span><br><span class="line">Apply a function of two arguments cumulatively to the items of a sequence,</span><br><span class="line">from left to right, so as to reduce the sequence to a single value.</span><br><span class="line">For example, reduce(lambda x, y: x+y, [1, 2, 3, 4, 5]) calculates</span><br><span class="line">((((1+2)+3)+4)+5).  If initial is present, it is placed before the items</span><br><span class="line">of the sequence in the calculation, and serves as a default when the</span><br><span class="line">sequence is empty.</span><br><span class="line"></span><br><span class="line">意思就是对sequence连续使用function, 如果不给出initial, 则第一次调用传递sequence的两个元素, 以后把前一次调用的结果和sequence的下一个元素传递给function. 如果给出initial, 则第一次传递initial和sequence的第一个元素给function.</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    &gt;&gt;&gt; from functools import reduce</span><br><span class="line">    &gt;&gt;&gt; reduce(lambda x,y: x+y, [1, 2, 3])</span><br><span class="line">    6</span><br><span class="line">    &gt;&gt;&gt; reduce(lambda x, y: x+y, [1,2,3], 9)</span><br><span class="line">    15</span><br><span class="line">    &gt;&gt;&gt; reduce(lambda x,y: x+y, [1, 2, 3], 7)</span><br><span class="line">    13</span><br><span class="line">    &gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="Python函数式编程"><a href="#Python函数式编程" class="headerlink" title="Python函数式编程"></a>Python函数式编程</h5><p><a href="http://blog.csdn.net/qq_26718271/article/details/72639510" target="_blank" rel="noopener">http://blog.csdn.net/qq_26718271/article/details/72639510</a><br><a href="http://blog.csdn.net/loveliuzz/article/details/77805198" target="_blank" rel="noopener">http://blog.csdn.net/loveliuzz/article/details/77805198</a></p>
<h5 id="map-reduce和filter的用法"><a href="#map-reduce和filter的用法" class="headerlink" title="map, reduce和filter的用法"></a>map, reduce和filter的用法</h5><p><a href="https://stackoverflow.com/questions/13638898/how-to-use-filter-map-and-reduce-in-python-3" target="_blank" rel="noopener">https://stackoverflow.com/questions/13638898/how-to-use-filter-map-and-reduce-in-python-3</a><br><a href="http://blog.csdn.net/damotiansheng/article/details/44139111" target="_blank" rel="noopener">http://blog.csdn.net/damotiansheng/article/details/44139111</a><br><a href="https://stackoverflow.com/questions/40015439/why-does-map-return-a-map-object-instead-of-a-list-in-python-3/40015480" target="_blank" rel="noopener">https://stackoverflow.com/questions/40015439/why-does-map-return-a-map-object-instead-of-a-list-in-python-3/40015480</a><br><a href="https://stackoverflow.com/questions/36486950/python-calling-list-on-a-map-object-twice" target="_blank" rel="noopener">https://stackoverflow.com/questions/36486950/python-calling-list-on-a-map-object-twice</a><br><a href="https://docs.python.org/3.0/whatsnew/3.0.html#views-and-iterators-instead-of-lists" target="_blank" rel="noopener">https://docs.python.org/3.0/whatsnew/3.0.html#views-and-iterators-instead-of-lists</a><br><a href="https://stackoverflow.com/questions/19017301/how-do-i-multiply-lists-together-using-a-function" target="_blank" rel="noopener">https://stackoverflow.com/questions/19017301/how-do-i-multiply-lists-together-using-a-function</a><br><a href="https://stackoverflow.com/questions/19777612/python-range-and-zip-object-type" target="_blank" rel="noopener">https://stackoverflow.com/questions/19777612/python-range-and-zip-object-type</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">https://segmentfault.com/a/1190000000322433</span><br><span class="line">在升级到python3的时候，发现了一个map函数的变化，害得我找了半天问题。</span><br><span class="line"></span><br><span class="line">在python2中，map会直接返回结果，比如说:</span><br><span class="line"></span><br><span class="line">map(lambda x: x, [1,2,3])</span><br><span class="line"></span><br><span class="line">可以直接返回</span><br><span class="line"></span><br><span class="line">[1,2,3]</span><br><span class="line"></span><br><span class="line">但是到了python3, 返回的就是一个map对象:</span><br><span class="line"></span><br><span class="line">&lt;map object at 0x7f381112ad50&gt;</span><br><span class="line"></span><br><span class="line">如果要得到结果，必须用list作用于这个map对象。</span><br><span class="line"></span><br><span class="line">如果说计算结果已经出来了，只是要用list来打印结果，那就算了。</span><br><span class="line"></span><br><span class="line">接下来就是我发现的python3下map坑爹货了：</span><br><span class="line">如果不在map前加上list，lambda函数根本就不会执行</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">这就是lazy evaluation，其实是个改进，但的确造成了不兼容。 那个2to3可以帮你找到大部分这一类问题，详情参见 http://docs.python.org/2/library/2to3.html</span><br><span class="line"></span><br><span class="line">谢谢！ 2to3上确实有： &gt; Wraps map() in a list call. It also changes map(None, x) to list(x). &gt; Using from future_builtins import map disables this fixer. 看来不用list对map对象，确实是不执行的。 我之所以觉得是个坑，是因为我把带副作用的函数放在了map里面，结果这个语句没有执行，搞得我一直找不到为什么变量的值没有改变。</span><br><span class="line"></span><br><span class="line">你可以用list comprehension，它直接返回list，不是一个类似iterator的对象，比如 [x*100 for x in [1,2,3]] 返回[100,200,300] 而且你还可以少写一个lambda</span><br><span class="line"></span><br><span class="line">不止是是map函数,python3很多改成返回iterator了. http://docs.python.org/3/whatsnew/3.0.html#views-and-iterators-instead-of-lists</span><br></pre></td></tr></table></figure></p>
<h5 id="python-非常有用的调试语句能打印内存"><a href="#python-非常有用的调试语句能打印内存" class="headerlink" title="python 非常有用的调试语句能打印内存"></a>python 非常有用的调试语句能打印内存</h5><p><a href="http://blog.sina.com.cn/s/blog_754e2e010102vem4.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_754e2e010102vem4.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">http://blog.csdn.net/ithomer/article/details/5974029</span><br><span class="line"></span><br><span class="line">    a = 20</span><br><span class="line">    b = 400</span><br><span class="line"></span><br><span class="line">    str = struct.pack(&quot;ii&quot;, a, b)</span><br><span class="line">    print &apos;length:&apos;, len(str) #length: 8</span><br><span class="line">    print str</span><br><span class="line">    print repr(str) # &apos;/x14/x00/x00/x00/x90/x01/x00/x00&apos;</span><br></pre></td></tr></table></figure></p>
<h5 id="struct模块"><a href="#struct模块" class="headerlink" title="struct模块"></a>struct模块</h5><p><a href="http://blog.csdn.net/ithomer/article/details/5974029" target="_blank" rel="noopener">http://blog.csdn.net/ithomer/article/details/5974029</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><span class="line">import struct</span><br><span class="line"></span><br><span class="line">pack、unpack、pack_into、unpack_from</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    # ref: http://blog.csdn.net/JGood/archive/2009/06/22/4290158.aspx</span><br><span class="line"></span><br><span class="line">    import struct</span><br><span class="line"></span><br><span class="line">    #pack - unpack</span><br><span class="line">    print</span><br><span class="line">    print &apos;===== pack - unpack =====&apos;</span><br><span class="line"></span><br><span class="line">    str = struct.pack(&quot;ii&quot;, 20, 400)</span><br><span class="line">    print &apos;str:&apos;, str</span><br><span class="line">    print &apos;len(str):&apos;, len(str) # len(str): 8</span><br><span class="line"></span><br><span class="line">    a1, a2 = struct.unpack(&quot;ii&quot;, str)</span><br><span class="line">    print &quot;a1:&quot;, a1  # a1: 20</span><br><span class="line">    print &quot;a2:&quot;, a2  # a2: 400</span><br><span class="line"></span><br><span class="line">    print &apos;struct.calcsize:&apos;, struct.calcsize(&quot;ii&quot;) # struct.calcsize: 8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    #unpack</span><br><span class="line">    print</span><br><span class="line">    print &apos;===== unpack =====&apos;</span><br><span class="line"></span><br><span class="line">    string = &apos;test astring&apos;</span><br><span class="line">    format = &apos;5s 4x 3s&apos;</span><br><span class="line">    print struct.unpack(format, string) # (&apos;test &apos;, &apos;ing&apos;)</span><br><span class="line"></span><br><span class="line">    string = &apos;he is not very happy&apos;</span><br><span class="line">    format = &apos;2s 1x 2s 5x 4s 1x 5s&apos;</span><br><span class="line">    print struct.unpack(format, string) # (&apos;he&apos;, &apos;is&apos;, &apos;very&apos;, &apos;happy&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    #pack</span><br><span class="line">    print</span><br><span class="line">    print &apos;===== pack =====&apos;</span><br><span class="line"></span><br><span class="line">    a = 20</span><br><span class="line">    b = 400</span><br><span class="line"></span><br><span class="line">    str = struct.pack(&quot;ii&quot;, a, b)</span><br><span class="line">    print &apos;length:&apos;, len(str) #length: 8</span><br><span class="line">    print str</span><br><span class="line">    print repr(str) # &apos;/x14/x00/x00/x00/x90/x01/x00/x00&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    #pack_into - unpack_from</span><br><span class="line">    print</span><br><span class="line">    print &apos;===== pack_into - unpack_from =====&apos;</span><br><span class="line">    from ctypes import create_string_buffer</span><br><span class="line"></span><br><span class="line">    buf = create_string_buffer(12)</span><br><span class="line">    print repr(buf.raw)</span><br><span class="line"></span><br><span class="line">    struct.pack_into(&quot;iii&quot;, buf, 0, 1, 2, -1)</span><br><span class="line">    print repr(buf.raw)</span><br><span class="line"></span><br><span class="line">    print struct.unpack_from(&quot;iii&quot;, buf, 0)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">运行结果：</span><br><span class="line"></span><br><span class="line">[work@db-testing-com06-vm3.db01.baidu.com python]$ python struct_pack.py</span><br><span class="line"></span><br><span class="line">===== pack - unpack =====</span><br><span class="line">str: ?</span><br><span class="line">len(str): 8</span><br><span class="line">a1: 20</span><br><span class="line">a2: 400</span><br><span class="line">struct.calcsize: 8</span><br><span class="line"></span><br><span class="line">===== unpack =====</span><br><span class="line">(&apos;test &apos;, &apos;ing&apos;)</span><br><span class="line">(&apos;he&apos;, &apos;is&apos;, &apos;very&apos;, &apos;happy&apos;)</span><br><span class="line"></span><br><span class="line">===== pack =====</span><br><span class="line">length: 8</span><br><span class="line">?</span><br><span class="line">&apos;/x14/x00/x00/x00/x90/x01/x00/x00&apos;</span><br><span class="line"></span><br><span class="line">===== pack_into - unpack_from =====</span><br><span class="line">&apos;/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00/x00&apos;</span><br><span class="line">&apos;/x01/x00/x00/x00/x02/x00/x00/x00/xff/xff/xff/xff&apos;</span><br><span class="line">(1, 2, -1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">==============================================================================</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python是一门非常简洁的语言，对于数据类型的表示，不像其他语言预定义了许多类型（如：在C#中，光整型就定义了8种）</span><br><span class="line"></span><br><span class="line">它只定义了六种基本类型：字符串，整数，浮点数，元组（set），列表（array），字典（key/value）</span><br><span class="line"></span><br><span class="line">通过这六种数据类型，我们可以完成大部分工作。但当Python需要通过网络与其他的平台进行交互的时候，必须考虑到将这些数据类型与其他平台或语言之间的类型进行互相转换问题。打个比方：C++写的客户端发送一个int型(4字节)变量的数据到Python写的服务器，Python接收到表示这个整数的4个字节数据，怎么解析成Python认识的整数呢？ Python的标准模块struct就用来解决这个问题。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">struct模块的内容不多，也不是太难，下面对其中最常用的方法进行介绍：</span><br><span class="line"></span><br><span class="line">1、 struct.pack</span><br><span class="line">struct.pack用于将Python的值根据格式符，转换为字符串（因为Python中没有字节(Byte)类型，可以把这里的字符串理解为字节流，或字节数组）。其函数原型为：struct.pack(fmt, v1, v2, ...)，参数fmt是格式字符串，关于格式字符串的相关信息在下面有所介绍。v1, v2, ...表示要转换的python值。下面的例子将两个整数转换为字符串（字节流）:</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    #!/usr/bin/env python</span><br><span class="line">    #encoding: utf8</span><br><span class="line"></span><br><span class="line">    import sys</span><br><span class="line">    reload(sys)</span><br><span class="line">    sys.setdefaultencoding(&quot;utf-8&quot;)</span><br><span class="line"></span><br><span class="line">    import struct</span><br><span class="line"></span><br><span class="line">    a = 20</span><br><span class="line">    b = 400</span><br><span class="line">    str = struct.pack(&quot;ii&quot;, a, b)</span><br><span class="line">    print &apos;length: &apos;, len(str)          # length:  8</span><br><span class="line">    print str                           # 乱码：</span><br><span class="line">    print repr(str)                     # &apos;\x14\x00\x00\x00\x90\x01\x00\x00&apos;</span><br><span class="line"></span><br><span class="line">格式符&quot;i&quot;表示转换为int，&apos;ii&apos;表示有两个int变量。</span><br><span class="line"></span><br><span class="line">进行转换后的结果长度为8个字节（int类型占用4个字节，两个int为8个字节）</span><br><span class="line"></span><br><span class="line">可以看到输出的结果是乱码，因为结果是二进制数据，所以显示为乱码。</span><br><span class="line"></span><br><span class="line">可以使用python的内置函数repr来获取可识别的字符串，其中十六进制的0x00000014, 0x00001009分别表示20和400。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2、 struct.unpack</span><br><span class="line">struct.unpack做的工作刚好与struct.pack相反，用于将字节流转换成python数据类型。它的函数原型为：struct.unpack(fmt, string)，该函数返回一个元组。</span><br><span class="line"></span><br><span class="line">下面是一个简单的例子：</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    #!/usr/bin/env python</span><br><span class="line">    #encoding: utf8</span><br><span class="line"></span><br><span class="line">    import sys</span><br><span class="line">    reload(sys)</span><br><span class="line">    sys.setdefaultencoding(&quot;utf-8&quot;)</span><br><span class="line"></span><br><span class="line">    import struct</span><br><span class="line"></span><br><span class="line">    a = 20</span><br><span class="line">    b = 400</span><br><span class="line"></span><br><span class="line">    # pack</span><br><span class="line">    str = struct.pack(&quot;ii&quot;, a, b)</span><br><span class="line">    print &apos;length: &apos;, len(str)          # length:  8</span><br><span class="line">    print str                           # 乱码：</span><br><span class="line">    print repr(str)                     # &apos;\x14\x00\x00\x00\x90\x01\x00\x00&apos;</span><br><span class="line"></span><br><span class="line">    # unpack</span><br><span class="line">    str2 = struct.unpack(&quot;ii&quot;, str)</span><br><span class="line">    print &apos;length: &apos;, len(str2)          # length:  2</span><br><span class="line">    print str2                           # (20, 400)</span><br><span class="line">    print repr(str2)                     # (20, 400)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3、 struct.calcsize</span><br><span class="line">struct.calcsize用于计算格式字符串所对应的结果的长度，如：struct.calcsize(&apos;ii&apos;)，返回8。因为两个int类型所占用的长度是8个字节。</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    import struct</span><br><span class="line">    print &quot;len: &quot;, struct.calcsize(&apos;i&apos;)       # len:  4</span><br><span class="line">    print &quot;len: &quot;, struct.calcsize(&apos;ii&apos;)      # len:  8</span><br><span class="line">    print &quot;len: &quot;, struct.calcsize(&apos;f&apos;)       # len:  4</span><br><span class="line">    print &quot;len: &quot;, struct.calcsize(&apos;ff&apos;)      # len:  8</span><br><span class="line">    print &quot;len: &quot;, struct.calcsize(&apos;s&apos;)       # len:  1</span><br><span class="line">    print &quot;len: &quot;, struct.calcsize(&apos;ss&apos;)      # len:  2</span><br><span class="line">    print &quot;len: &quot;, struct.calcsize(&apos;d&apos;)       # len:  8</span><br><span class="line">    print &quot;len: &quot;, struct.calcsize(&apos;dd&apos;)      # len:  16</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4、 struct.pack_into、 struct.unpack_from</span><br><span class="line">这两个函数在Python手册中有所介绍，但没有给出如何使用的例子。其实它们在实际应用中用的并不多。Google了很久，才找到一个例子，贴出来共享一下：</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    #!/usr/bin/env python</span><br><span class="line">    #encoding: utf8</span><br><span class="line"></span><br><span class="line">    import sys</span><br><span class="line">    reload(sys)</span><br><span class="line">    sys.setdefaultencoding(&quot;utf-8&quot;)</span><br><span class="line"></span><br><span class="line">    import struct</span><br><span class="line">    from ctypes import create_string_buffer</span><br><span class="line"></span><br><span class="line">    buf = create_string_buffer(12)</span><br><span class="line">    print repr(buf.raw)     # &apos;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00&apos;</span><br><span class="line"></span><br><span class="line">    struct.pack_into(&quot;iii&quot;, buf, 0, 1, 2, -1)</span><br><span class="line">    print repr(buf.raw)     # &apos;\x01\x00\x00\x00\x02\x00\x00\x00\xff\xff\xff\xff&apos;</span><br><span class="line"></span><br><span class="line">    print struct.unpack_from(&quot;iii&quot;, buf, 0)     # (1, 2, -1)</span><br><span class="line"></span><br><span class="line">具体内容请参考Python手册 struct 模块</span><br><span class="line"></span><br><span class="line">Python手册 struct 模块：http://docs.python.org/library/struct.html#module-struct</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">struct 类型表</span><br><span class="line"></span><br><span class="line">Format	C Type	Python type	Standard size	Notes</span><br><span class="line">x	pad byte	no value</span><br><span class="line">c	char	string of length 1	1</span><br><span class="line">b	signed char	integer	1	(3)</span><br><span class="line">B	unsigned char	integer	1	(3)</span><br><span class="line">?	_Bool	bool	1	(1)</span><br><span class="line">h	short	integer	2	(3)</span><br><span class="line">H	unsigned short	integer	2	(3)</span><br><span class="line">i	int	integer	4	(3)</span><br><span class="line">I	unsigned int	integer	4	(3)</span><br><span class="line">l	long	integer	4	(3)</span><br><span class="line">L	unsigned long	integer	4	(3)</span><br><span class="line">q	long long	integer	8	(2), (3)</span><br><span class="line">Q	unsigned long long	integer	8	(2), (3)</span><br><span class="line">f	float	float	4	(4)</span><br><span class="line">d	double	float	8	(4)</span><br><span class="line">s	char[]	string	1</span><br><span class="line">p	char[]	string</span><br><span class="line">P	void *	integer	 	(5), (3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Notes:</span><br><span class="line"></span><br><span class="line">    The &apos;?&apos; conversion code corresponds to the _Bool type defined by C99. If this type is not available, it is simulated using a char. In standard mode, it is always represented by one byte.</span><br><span class="line"></span><br><span class="line">    New in version 2.6.</span><br><span class="line"></span><br><span class="line">    The &apos;q&apos; and &apos;Q&apos; conversion codes are available in native mode only if the platform C compiler supports C long long, or, on Windows, __int64. They are always available in standard modes.</span><br><span class="line"></span><br><span class="line">    New in version 2.2.</span><br><span class="line"></span><br><span class="line">    When attempting to pack a non-integer using any of the integer conversion codes, if the non-integer has a __index__() method then that method is called to convert the argument to an integer before packing. If no __index__() method exists, or the call to __index__() raises TypeError, then the __int__() method is tried. However, the use of __int__() is deprecated, and will raise DeprecationWarning.</span><br><span class="line"></span><br><span class="line">    Changed in version 2.7: Use of the __index__() method for non-integers is new in 2.7.</span><br><span class="line"></span><br><span class="line">    Changed in version 2.7: Prior to version 2.7, not all integer conversion codes would use the __int__() method to convert, and DeprecationWarning was raised only for float arguments.</span><br><span class="line"></span><br><span class="line">    For the &apos;f&apos; and &apos;d&apos; conversion codes, the packed representation uses the IEEE 754 binary32 (for &apos;f&apos;) or binary64 (for &apos;d&apos;) format, regardless of the floating-point format used by the platform.</span><br><span class="line"></span><br><span class="line">    The &apos;P&apos; format character is only available for the native byte ordering (selected as the default or with the &apos;@&apos; byte order character). The byte order character &apos;=&apos; chooses to use little- or big-endian ordering based on the host system. The struct module does not interpret this as native ordering, so the &apos;P&apos; format is not available.</span><br><span class="line"></span><br><span class="line">A format character may be preceded by an integral repeat count. For example, the format string &apos;4h&apos; means exactly the same as &apos;hhhh&apos;.</span><br><span class="line"></span><br><span class="line">Whitespace characters between formats are ignored; a count and its format must not contain whitespace though.</span><br><span class="line"></span><br><span class="line">For the &apos;s&apos; format character, the count is interpreted as the size of the string, not a repeat count like for the other format characters; for example, &apos;10s&apos; means a single 10-byte string, while &apos;10c&apos; means 10 characters. For packing, the string is truncated or padded with null bytes as appropriate to make it fit. For unpacking, the resulting string always has exactly the specified number of bytes. As a special case, &apos;0s&apos; means a single, empty string (while &apos;0c&apos; means 0 characters).</span><br><span class="line"></span><br><span class="line">The &apos;p&apos; format character encodes a “Pascal string”, meaning a short variable-length string stored in a fixed number of bytes, given by the count. The first byte stored is the length of the string, or 255, whichever is smaller. The bytes of the string follow. If the string passed in to pack() is too long (longer than the count minus 1), only the leading count-1 bytes of the string are stored. If the string is shorter than count-1, it is padded with null bytes so that exactly count bytes in all are used. Note that for unpack(), the &apos;p&apos; format character consumes count bytes, but that the string returned can never contain more than 255 characters.</span><br><span class="line"></span><br><span class="line">For the &apos;P&apos; format character, the return value is a Python integer or long integer, depending on the size needed to hold a pointer when it has been cast to an integer type. A NULL pointer will always be returned as the Python integer 0. When packing pointer-sized values, Python integer or long integer objects may be used. For example, the Alpha and Merced processors use 64-bit pointer values, meaning a Python long integer will be used to hold the pointer; other platforms use 32-bit pointers and will use a Python integer.</span><br><span class="line"></span><br><span class="line">For the &apos;?&apos; format character, the return value is either True or False. When packing, the truth value of the argument object is used. Either 0 or 1 in the native or standard bool representation will be packed, and any non-zero value will be True when unpacking.</span><br></pre></td></tr></table></figure></p>
<h5 id="Python2与Python3的zip结果的差别"><a href="#Python2与Python3的zip结果的差别" class="headerlink" title="Python2与Python3的zip结果的差别"></a>Python2与Python3的zip结果的差别</h5><p>区别在于，在python2中，zip的结果为一个列表，而python3中，zip的结果是返回一个迭代器，可以被next()函数调用并不断返回下一个值的对象称为迭代器:Iterator. 所以第一次list就调用了迭代器，之后再次调用，该迭代器不能进行下一个next函数操作，所以返回的列表为空。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">Python3</span><br><span class="line">&gt;&gt;&gt; test1 = [1, 2, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; test2 = [1, 2, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; zip1 = zip(test1, test2)</span><br><span class="line">&gt;&gt;&gt; list(zip1)</span><br><span class="line">[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)]</span><br><span class="line">&gt;&gt;&gt; list(zip1)</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; zip1 = zip(test1, test2)</span><br><span class="line">&gt;&gt;&gt; mapobj = map(lambda args: args[0] * args[1], zip1)</span><br><span class="line">&gt;&gt;&gt; list(mapobj)</span><br><span class="line">[1, 4, 9, 16, 25]</span><br><span class="line">&gt;&gt;&gt; list(mapobj)</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; list(zip1)</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; zip1 = zip(test1, test2)</span><br><span class="line">&gt;&gt;&gt; mapobj = map(lambda args: args[0] * args[1], zip1)</span><br><span class="line">&gt;&gt;&gt; list(zip1)</span><br><span class="line">[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)]</span><br><span class="line">&gt;&gt;&gt; list(mapobj)</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">Python2</span><br><span class="line">&gt;&gt;&gt; test1 = [1, 2, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; test2 = [1, 2, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; zip1 = zip(test1, test2)</span><br><span class="line">&gt;&gt;&gt; list(zip1)</span><br><span class="line">[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)]</span><br><span class="line">&gt;&gt;&gt; list(zip1)</span><br><span class="line">[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)]</span><br><span class="line">&gt;&gt;&gt; zip1 = zip(test1, test2)</span><br><span class="line">&gt;&gt;&gt; mapobj = map(lambda args: args[0] * args[1], zip1)</span><br><span class="line">&gt;&gt;&gt; list(mapobj)</span><br><span class="line">[1, 4, 9, 16, 25]</span><br><span class="line">&gt;&gt;&gt; list(mapobj)</span><br><span class="line">[1, 4, 9, 16, 25]</span><br><span class="line">&gt;&gt;&gt; list(zip1)</span><br><span class="line">[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)]</span><br><span class="line">&gt;&gt;&gt; zip1 = zip(test1, test2)</span><br><span class="line">&gt;&gt;&gt; mapobj = map(lambda args: args[0] * args[1], zip1)</span><br><span class="line">&gt;&gt;&gt; list(zip1)</span><br><span class="line">[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)]</span><br><span class="line">&gt;&gt;&gt; list(mapobj)</span><br><span class="line">[1, 4, 9, 16, 25]</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">同样，在python3中，range函数的返回值也为iterator</span><br><span class="line">&gt;&gt;&gt; m = map(lambda x: x**2, range(0,4))</span><br><span class="line">&gt;&gt;&gt; list(m)</span><br><span class="line">[0, 1, 4, 9]</span><br><span class="line">&gt;&gt;&gt; list(m)</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="Python判断某个对象是否是可迭代对象"><a href="#Python判断某个对象是否是可迭代对象" class="headerlink" title="Python判断某个对象是否是可迭代对象"></a>Python判断某个对象是否是可迭代对象</h5><p><a href="https://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/0013868196435255fcca20a1630446ea2dd434a7176e152000" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/0013868196435255fcca20a1630446ea2dd434a7176e152000</a><br><a href="http://www.cnblogs.com/hdtianfu/archive/2012/10/20/2732689.html" target="_blank" rel="noopener">http://www.cnblogs.com/hdtianfu/archive/2012/10/20/2732689.html</a><br><a href="https://codeday.me/bug/20170218/1148.html" target="_blank" rel="noopener">https://codeday.me/bug/20170218/1148.html</a><br><a href="http://blog.csdn.net/u012005313/article/details/48213141" target="_blank" rel="noopener">http://blog.csdn.net/u012005313/article/details/48213141</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">python中判断实例可迭代地几种方式</span><br><span class="line">1. 利用 __iter__内建属性</span><br><span class="line">if hasattr(obj, &apos;__iter__&apos;) :</span><br><span class="line">    print &apos;iterable&apos;</span><br><span class="line">这种方法不能检测字符串，如：hasattr(&apos;&apos;, &apos;__iter__&apos;)返回False。</span><br><span class="line">  或者这样子：</span><br><span class="line">try :</span><br><span class="line">    i = iter(obj)</span><br><span class="line">except TypeError, v :</span><br><span class="line">    print v</span><br><span class="line"></span><br><span class="line">2.  假设obj是iterable的，如果不是的话，就抛出异常</span><br><span class="line">try:</span><br><span class="line">    for v in obj:</span><br><span class="line">        print v</span><br><span class="line">except TypeError, e:</span><br><span class="line">    print e</span><br><span class="line"></span><br><span class="line">3. 检查实例是否是collections.Iterable子类</span><br><span class="line">import collections</span><br><span class="line">if isinstance(obj, collections.Iterable):</span><br><span class="line">    print &apos;iterable&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">如果判断一个对象是否是可迭代对象，方法是通过collections模块的iterable类型判断：</span><br><span class="line"></span><br><span class="line">[python] view plain copy</span><br><span class="line"></span><br><span class="line">    from collections import Iterable</span><br><span class="line">    isinstance(&apos;abc&apos;, Iterable) #str是否可迭代</span><br><span class="line">    isinstance([1,2,3], Iterable) #list是否可迭代</span><br><span class="line">    isinstance(123, Iterable) #整数是否可迭代啊</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; from collections import Iterable</span><br><span class="line">&gt;&gt;&gt; test1 = [1, 2, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; test2 = [1, 2, 3, 4, 5]</span><br><span class="line">&gt;&gt;&gt; zip1 = zip(test1, test2)</span><br><span class="line">&gt;&gt;&gt; isinstance(zip1, Iterable)</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; m = map(lambda x: x**2, range(0,4))</span><br><span class="line">&gt;&gt;&gt; isinstance(m, Iterable)</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; ra = range(100, 120)</span><br><span class="line">&gt;&gt;&gt; isinstance(ra, Iterable)</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; isinstance(list, Iterable)</span><br><span class="line">False</span><br><span class="line">&gt;&gt;&gt; isinstance(dict, Iterable)</span><br><span class="line">False</span><br><span class="line">&gt;&gt;&gt; lst = list(range(10))</span><br><span class="line">&gt;&gt;&gt; isinstance(lst, Iterable)</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; dct = &#123;&#125;</span><br><span class="line">&gt;&gt;&gt; isinstance(dct, Iterable)</span><br><span class="line">True</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; for index, value in (enumerate(range(100, 110))):</span><br><span class="line">...     print(index, value)</span><br><span class="line">...</span><br><span class="line">0 100</span><br><span class="line">1 101</span><br><span class="line">2 102</span><br><span class="line">3 103</span><br><span class="line">4 104</span><br><span class="line">5 105</span><br><span class="line">6 106</span><br><span class="line">7 107</span><br><span class="line">8 108</span><br><span class="line">9 109</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></p>
<h5 id="可迭代对象，迭代器和生成器"><a href="#可迭代对象，迭代器和生成器" class="headerlink" title="可迭代对象，迭代器和生成器"></a>可迭代对象，迭代器和生成器</h5><p><a href="https://foofish.net/iterators-vs-generators.html" target="_blank" rel="noopener">https://foofish.net/iterators-vs-generators.html</a><br><a href="http://foofish.net/blog/109/iterators-vs-generators" target="_blank" rel="noopener">http://foofish.net/blog/109/iterators-vs-generators</a><br><a href="https://python-ning.github.io/2015/11/30/python_generators_and_iterators/" target="_blank" rel="noopener">https://python-ning.github.io/2015/11/30/python_generators_and_iterators/</a><br><a href="http://wulc.me/2016/09/08/python%20%E4%B8%AD%E7%9A%84%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1(iterable)%E3%80%81%E8%BF%AD%E4%BB%A3%E5%99%A8(iterator)%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8(generator)/" target="_blank" rel="noopener">http://wulc.me/2016/09/08/python%20%E4%B8%AD%E7%9A%84%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1(iterable)%E3%80%81%E8%BF%AD%E4%BB%A3%E5%99%A8(iterator)%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8(generator)/</a></p>
<p><a href="http://www.jianshu.com/p/211955d5e8e6" target="_blank" rel="noopener">http://www.jianshu.com/p/211955d5e8e6</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line">什么是迭代</span><br><span class="line"></span><br><span class="line">    Wiki定义：是重复反馈过程的活动，其目的是为了接近并到达所需的目标或结果。</span><br><span class="line"></span><br><span class="line">在程序中，迭代是一种遍历集合元素的方式，我们可以通过索引值递增来遍历集合元素，而迭代是遍历集合元素另一种方式。</span><br><span class="line"></span><br><span class="line">下面是使用索引来进行遍历集合元素的方式：</span><br><span class="line"></span><br><span class="line">val = [1,2,3,4,5]</span><br><span class="line">for i in range(len(val)):</span><br><span class="line">    retVal = val[i]</span><br><span class="line"></span><br><span class="line">这种方式在C++中很常见，在Python中我们可以用更简洁的语法来进行遍历，也就是迭代。</span><br><span class="line">三个关键字</span><br><span class="line"></span><br><span class="line">说到迭代，在Python里就会提到下面三个关键词：</span><br><span class="line"></span><br><span class="line">    Iterable(可迭代)</span><br><span class="line">    iterator(迭代器)</span><br><span class="line">    generator(生成器)</span><br><span class="line"></span><br><span class="line">这三个关键字，可能从一开始的某段代码你就接触到了，只是你没有发觉，代码是这样的。</span><br><span class="line"></span><br><span class="line">val = [1,2,3,4,5]</span><br><span class="line">for i in val:</span><br><span class="line">    print i</span><br><span class="line"></span><br><span class="line">上面这个for...in，就是Python中迭代器的语法糖。好了，现在你可能开始在想这个for做了什么事了，先把这个疑问放在心里，我们先一步步来解析上面的几个关键字。</span><br><span class="line">Iterable 可迭代</span><br><span class="line"></span><br><span class="line">先来看个反面教材，如果我们用for...in语法糖去遍历一个int会怎样？？？</span><br><span class="line"></span><br><span class="line">intVal = 1024</span><br><span class="line">for _ in intVal:</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;TypeError: &apos;int&apos; object is not iterable</span><br><span class="line"></span><br><span class="line">从上面的错误可以看到，整数类型的对象不是可迭代的，也就是说for..in只适用于iterable对象，那么什么类型的对象才是iterable(可迭代)呢。</span><br><span class="line"></span><br><span class="line">    在Python中，实现了_iter_函数的类型都是可迭代的，例如list，tuple，dict等</span><br><span class="line"></span><br><span class="line">可以用dir函数查看一下是否存在协议函数__iter__</span><br><span class="line"></span><br><span class="line">print &apos;__iter__&apos; in dir(dict)</span><br><span class="line">print &apos;__iter__&apos; in dir(list)</span><br><span class="line">print &apos;__iter__&apos; in dir(tuple)</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;True</span><br><span class="line">&gt;&gt;&gt;True</span><br><span class="line">&gt;&gt;&gt;True</span><br><span class="line"></span><br><span class="line">通过上面的方式我们可以判断一个对象是不是可迭代的，当然我们还有另外一种更接地气的方法。</span><br><span class="line"></span><br><span class="line">l = [1]</span><br><span class="line">from collections import Iterable</span><br><span class="line">print isinstance(l, Iterable)  #注意这里只能用实例进行判断，而不能用list判断</span><br><span class="line"></span><br><span class="line">iterator 迭代器</span><br><span class="line"></span><br><span class="line">对于一个可迭代的对象，我们需要借助迭代器来对其进行迭代，那么我们怎么才能得到一个迭代器呢？</span><br><span class="line">iter()方法</span><br><span class="line"></span><br><span class="line">通过使用iter方法，我们可以得到一个迭代器，记住，要传入一个可迭代对象做为参数：</span><br><span class="line"></span><br><span class="line">l = [1]</span><br><span class="line">o = iter(l)</span><br><span class="line">print type(o)</span><br><span class="line">&gt;&gt;&gt;&lt;type &apos;listiterator&apos;&gt;</span><br><span class="line"></span><br><span class="line">从上面的代码可以看到，我们通过将一个可迭代对象传给iter方法得到了一个迭代器，那么有了这个迭代器之后，我们应该怎么迭代呢？</span><br><span class="line">next()方法</span><br><span class="line"></span><br><span class="line">调用迭代器的next方法可以对元素进行遍历，但是next方法是不能无限使用的：</span><br><span class="line"></span><br><span class="line">l = [1, 2, 3]</span><br><span class="line">o = iter(l)</span><br><span class="line">print o.next()</span><br><span class="line">print o.next()</span><br><span class="line">print o.next()</span><br><span class="line">print o.next()</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;1</span><br><span class="line">&gt;&gt;&gt;2</span><br><span class="line">&gt;&gt;&gt;3</span><br><span class="line">&gt;&gt;&gt;Traceback (most recent call last):</span><br><span class="line">  File &quot;e:\Microsoft VS Code\TestFiles\test.py&quot;, line 63, in &lt;module&gt;</span><br><span class="line">    print o.next()</span><br><span class="line">StopIteration</span><br><span class="line"></span><br><span class="line">通过next方法我们可以一个个的遍历可迭代对象中的元素，当遍历结束的时候，会引发异常StopIteration。</span><br><span class="line">迭代器类</span><br><span class="line"></span><br><span class="line">除了以上的方法，我们还可以构造一个类来进行迭代，这个类需要实现next和__iter__方法，下面构造了一个斐波那契数列：</span><br><span class="line"></span><br><span class="line">class FabIteratorClass(object):</span><br><span class="line">    def __init__(self, max):</span><br><span class="line">        self.m_Max = max</span><br><span class="line">        self.m_Idx = 0</span><br><span class="line">        self.m_a = 0</span><br><span class="line">        self.m_b = 1</span><br><span class="line"></span><br><span class="line">    def __iter__(self):</span><br><span class="line">        return self</span><br><span class="line"></span><br><span class="line">    def next(self):</span><br><span class="line">        if self.m_Idx &lt; self.m_Max:</span><br><span class="line">            ret = self.m_b</span><br><span class="line">            self.m_a, self.m_b = self.m_b, self.m_a + self.m_b</span><br><span class="line">            self.m_Idx += 1</span><br><span class="line">            return ret</span><br><span class="line">        raise StopIteration()</span><br><span class="line"></span><br><span class="line">for val in FabIteratorClass(3):</span><br><span class="line">    print val</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt;1</span><br><span class="line">&gt;&gt;&gt;1</span><br><span class="line">&gt;&gt;&gt;2</span><br><span class="line"></span><br><span class="line">所以，作为一个迭代器，他的特征如下：</span><br><span class="line"></span><br><span class="line">    拥有__iter__方法，或者由iter方法返回</span><br><span class="line">    拥有next方法</span><br><span class="line">    会产生StopIteration异常</span><br><span class="line"></span><br><span class="line">生成器</span><br><span class="line"></span><br><span class="line">说到生成器，那么一定会说到一个关键字yield，只要一个函数里出现了这个关键字，我们就把这个函数称为生成器，生成器是一种内存友好的函数，例如平时用到的xrange函数，就是一个生成器，生成器不会把所有值预先生成，而是在需要时才生成，是一种Lazy Evaluation的做法。生成器也是迭代器的一种！</span><br><span class="line"></span><br><span class="line">同样是斐波那契数列，我们用生成器处理一下：</span><br><span class="line"></span><br><span class="line">def fab(max):</span><br><span class="line">    idx = 0</span><br><span class="line">    a = 0</span><br><span class="line">    b = 1</span><br><span class="line">    while idx &lt; max:</span><br><span class="line">        ret = b</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">        idx += 1</span><br><span class="line">        yield ret</span><br><span class="line"></span><br><span class="line">c = fab(5)</span><br><span class="line">print type(c)</span><br><span class="line">for val in c:</span><br><span class="line">    print val</span><br><span class="line">&gt;&gt;&gt;&lt;type &apos;generator&apos;&gt;</span><br><span class="line">&gt;&gt;&gt;1</span><br><span class="line">&gt;&gt;&gt;1</span><br><span class="line">&gt;&gt;&gt;2</span><br><span class="line">&gt;&gt;&gt;3</span><br><span class="line">&gt;&gt;&gt;5</span><br><span class="line"></span><br><span class="line">总结：</span><br><span class="line"></span><br><span class="line">    三者的继承关系是这样：generator---&gt;Iterator---&gt;Iterable</span><br><span class="line">    迭代器类型需要实现__iter__和next方法，生成器是一种特殊的迭代器，内部支持了生成器协议，不需要明确定义iter()和next()方法</span><br><span class="line">    迭代器一定是可迭代对象，但是可迭代对象不一定是迭代器</span><br><span class="line"></span><br><span class="line">作者：ZeroTryTryTry</span><br><span class="line">链接：http://www.jianshu.com/p/211955d5e8e6</span><br><span class="line">來源：简书</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure></p>
<h5 id="Python执行windows-cmd命令"><a href="#Python执行windows-cmd命令" class="headerlink" title="Python执行windows cmd命令"></a>Python执行windows cmd命令</h5><p><a href="http://www.cnblogs.com/xuxm2007/archive/2011/01/17/1937220.html" target="_blank" rel="noopener">http://www.cnblogs.com/xuxm2007/archive/2011/01/17/1937220.html</a><br><a href="http://www.cnblogs.com/feichengwulai/articles/3463139.html" target="_blank" rel="noopener">http://www.cnblogs.com/feichengwulai/articles/3463139.html</a><br><a href="http://www.cnblogs.com/vamei/archive/2012/09/23/2698014.html" target="_blank" rel="noopener">http://www.cnblogs.com/vamei/archive/2012/09/23/2698014.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">Python中执行系统命令常见方法有两种：</span><br><span class="line"></span><br><span class="line">两者均需 import os</span><br><span class="line"></span><br><span class="line">(1) os.system</span><br><span class="line"></span><br><span class="line"># 仅仅在一个子终端运行系统命令，而不能获取命令执行后的返回信息</span><br><span class="line"></span><br><span class="line">system(command) -&gt; exit_status</span><br><span class="line">Execute the command (a string) in a subshell.</span><br><span class="line"></span><br><span class="line"># 如果再命令行下执行，结果直接打印出来</span><br><span class="line">	&gt;&gt;&gt; os.system(&apos;ls&apos;)</span><br><span class="line">	04101419778.CHM   bash      document    media      py-django   video</span><br><span class="line">	11.wmv            books     downloads   Pictures  python</span><br><span class="line">	all-20061022      Desktop   Examples    project    tools</span><br><span class="line"></span><br><span class="line">(2) os.popen</span><br><span class="line"></span><br><span class="line"># 该方法不但执行命令还返回执行后的信息对象</span><br><span class="line"></span><br><span class="line">popen(command [, mode=&apos;r&apos; [, bufsize]]) -&gt; pipe</span><br><span class="line">Open a pipe to/from a command returning a file object.</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line">	&gt;&gt;&gt;tmp = os.popen(&apos;ls *.py&apos;).readlines()</span><br><span class="line">	&gt;&gt;&gt;tmp</span><br><span class="line">	Out[21]:</span><br><span class="line">	[&apos;dump_db_pickle.py &apos;,</span><br><span class="line">	&apos;dump_db_pickle_recs.py &apos;,</span><br><span class="line">	&apos;dump_db_shelve.py &apos;,</span><br><span class="line">	&apos;initdata.py &apos;,</span><br><span class="line">	&apos;__init__.py &apos;,</span><br><span class="line">	&apos;make_db_pickle.py &apos;,</span><br><span class="line">	&apos;make_db_pickle_recs.py &apos;,</span><br><span class="line">	&apos;make_db_shelve.py &apos;,</span><br><span class="line">	&apos;peopleinteract_query.py &apos;,</span><br><span class="line">	&apos;reader.py &apos;,</span><br><span class="line">	&apos;testargv.py &apos;,</span><br><span class="line">	&apos;teststreams.py &apos;,</span><br><span class="line">	&apos;update_db_pickle.py &apos;,</span><br><span class="line">	&apos;writer.py &apos;]</span><br><span class="line"></span><br><span class="line">好处在于：将返回的结果赋于一变量，便于程序的处理。</span><br><span class="line"></span><br><span class="line">(3)  使用模块subprocess (python3)</span><br><span class="line">	&gt;&gt;&gt; import subprocess</span><br><span class="line">	&gt;&gt;&gt; subprocess.call ([&quot;cmd&quot;, &quot;arg1&quot;, &quot;arg2&quot;],shell=True)</span><br><span class="line"></span><br><span class="line">获取返回和输出:</span><br><span class="line">	import subprocess</span><br><span class="line">	p = subprocess.Popen(&apos;ls&apos;, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)</span><br><span class="line">	for line in p.stdout.readlines():</span><br><span class="line">	    print line,</span><br><span class="line">	retval = p.wait()</span><br><span class="line"></span><br><span class="line">(4)  使用模块commands模块 (python2)</span><br><span class="line">	&gt;&gt;&gt; import commands</span><br><span class="line">	&gt;&gt;&gt; dir(commands)</span><br><span class="line">	[&apos;__all__&apos;, &apos;__builtins__&apos;, &apos;__doc__&apos;, &apos;__file__&apos;, &apos;__name__&apos;, &apos;getoutput&apos;, &apos;getstatus&apos;,&apos;getstatusoutput&apos;, &apos;mk2arg&apos;, &apos;mkarg&apos;]</span><br><span class="line">	&gt;&gt;&gt; commands.getoutput(&quot;date&quot;)</span><br><span class="line">	&apos;Wed Jun 10 19:39:57 CST 2009&apos;</span><br><span class="line">	&gt;&gt;&gt;</span><br><span class="line">	&gt;&gt;&gt; commands.getstatusoutput(&quot;date&quot;)</span><br><span class="line">	(0, &apos;Wed Jun 10 19:40:41 CST 2009&apos;)</span><br><span class="line"></span><br><span class="line">注意： 当执行命令的参数或者返回中包含了中文文字，那么建议使用subprocess，如果使用os.popen则会出现下面的错误:</span><br><span class="line">查看源代码</span><br><span class="line">打印</span><br><span class="line">帮助</span><br><span class="line">	Traceback (most recent call last):</span><br><span class="line">	  File &quot;./test1.py&quot;, line 56, in &lt;module&gt;</span><br><span class="line">	    main()</span><br><span class="line">	  File &quot;./test1.py&quot;, line 45, in main</span><br><span class="line">	    fax.sendFax()</span><br><span class="line">	  File &quot;./mailfax/Fax.py&quot;, line 13, in sendFax</span><br><span class="line">	    os.popen(cmd)</span><br><span class="line">	UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode characters in position 46-52: ordinal not inrange(128)</span><br></pre></td></tr></table></figure></p>
<h5 id="Python-内置的那些牛逼闪亮的函数"><a href="#Python-内置的那些牛逼闪亮的函数" class="headerlink" title="Python 内置的那些牛逼闪亮的函数"></a>Python 内置的那些牛逼闪亮的函数</h5><p><a href="http://pycoders-weekly-chinese.readthedocs.io/en/latest/issue15/python-built-in-functions-are-awesome-use-them.html" target="_blank" rel="noopener">http://pycoders-weekly-chinese.readthedocs.io/en/latest/issue15/python-built-in-functions-are-awesome-use-them.html</a></p>
<p><a href="http://www.runoob.com/python/python-built-in-functions.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-built-in-functions.html</a><br><a href="http://docspy3zh.readthedocs.io/en/latest/library/functions.html" target="_blank" rel="noopener">http://docspy3zh.readthedocs.io/en/latest/library/functions.html</a></p>
<p><a href="http://www.bijishequ.com/detail/544130?p=" target="_blank" rel="noopener">http://www.bijishequ.com/detail/544130?p=</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line">原文： http://isbullsh.it/2012/05/05-Python-built-in-functions/</span><br><span class="line"></span><br><span class="line">译者： TheLover_Z</span><br><span class="line">引言</span><br><span class="line"></span><br><span class="line">这篇文章我们来看几个很有用的 Python 内置函数 。这些函数简直是屌爆了，我认为每个 Pythoner 都应该知道这些函数。</span><br><span class="line"></span><br><span class="line">对于每个函数，我会使用一个普通的实现来和内置函数做对比。</span><br><span class="line"></span><br><span class="line">如果我直接引用了内置函数的文档，请理解，因为这些函数文档写的非常棒！</span><br><span class="line">all(iterable)</span><br><span class="line"></span><br><span class="line">如果可迭代的对象(数组，字符串，列表等，下同)中的元素都是 true (或者为空)的话返回 True 。</span><br><span class="line"></span><br><span class="line">_all = True</span><br><span class="line">for item in iterable:</span><br><span class="line">    if not item:</span><br><span class="line">        _all = False</span><br><span class="line">        break</span><br><span class="line">if _all:</span><br><span class="line">    # do stuff</span><br><span class="line"></span><br><span class="line">更简便的写法是：</span><br><span class="line"></span><br><span class="line">if all(iterable):</span><br><span class="line">    # do stuff</span><br><span class="line"></span><br><span class="line">any(iterable)</span><br><span class="line"></span><br><span class="line">如果可迭代的对象中任何一个元素为 true 的话返回 True 。如果可迭代的对象为空则返回 False 。</span><br><span class="line"></span><br><span class="line">_any = False</span><br><span class="line">for item in iterable:</span><br><span class="line">    if item:</span><br><span class="line">        _any = True</span><br><span class="line">        break</span><br><span class="line">if _any:</span><br><span class="line">    # do stuff</span><br><span class="line"></span><br><span class="line">更简便的写法是：</span><br><span class="line"></span><br><span class="line">if any(iterable):</span><br><span class="line">    # do stuff</span><br><span class="line"></span><br><span class="line">cmp(x, y)</span><br><span class="line"></span><br><span class="line">比较两个对象 x 和 y 。 x &lt; y 的时候返回负数， x ==y 的时候返回 0， x &gt; y 的时候返回正数。</span><br><span class="line"></span><br><span class="line">def compare(x,y):</span><br><span class="line">    if x &lt; y:</span><br><span class="line">        return -1</span><br><span class="line">    elif x == y:</span><br><span class="line">        return 0</span><br><span class="line">    else:</span><br><span class="line">        return 1</span><br><span class="line"></span><br><span class="line">你完全可以使用一句 cmp(x, y) 来替代。</span><br><span class="line">dict([arg])</span><br><span class="line"></span><br><span class="line">使用 arg 提供的条目生成一个新的字典。</span><br><span class="line"></span><br><span class="line">arg 通常是未知的，但是它很方便！比如说，如果我们想把一个含两个元组的列表转换成一个字典，我们可以这么做。</span><br><span class="line"></span><br><span class="line">l = [(&apos;Knights&apos;, &apos;Ni&apos;), (&apos;Monty&apos;, &apos;Python&apos;), (&apos;SPAM&apos;, &apos;SPAAAM&apos;)]</span><br><span class="line">d = dict()</span><br><span class="line">for tuple in l:</span><br><span class="line">    d[tuple[0]] = tuple[1]</span><br><span class="line"># &#123;&apos;Knights&apos;: &apos;Ni&apos;, &apos;Monty&apos;: &apos;Python&apos;, &apos;SPAM&apos;: &apos;SPAAAM&apos;&#125;</span><br><span class="line"></span><br><span class="line">或者这样：</span><br><span class="line"></span><br><span class="line">l = [(&apos;Knights&apos;, &apos;Ni&apos;), (&apos;Monty&apos;, &apos;Python&apos;), (&apos;SPAM&apos;, &apos;SPAAAM&apos;)]</span><br><span class="line">d = dict(l) # &#123;&apos;Knights&apos;: &apos;Ni&apos;, &apos;Monty&apos;: &apos;Python&apos;, &apos;SPAM&apos;: &apos;SPAAAM&apos;&#125;</span><br><span class="line"></span><br><span class="line">enumerate(iterable [,start=0])</span><br><span class="line"></span><br><span class="line">我真的是超级喜欢这个！如果你以前写过 C 语言，那么你可能会这么写：</span><br><span class="line"></span><br><span class="line">for i in range(len(list)):</span><br><span class="line">    # do stuff with list[i], for example, print it</span><br><span class="line">    print i, list[i]</span><br><span class="line"></span><br><span class="line">噢，不用那么麻烦！你可以使用 enumerate() 来提高可读性。</span><br><span class="line"></span><br><span class="line">for i, item in enumerate(list):</span><br><span class="line">    # so stuff with item, for example print it</span><br><span class="line">    print i, item</span><br><span class="line"></span><br><span class="line">isinstance(object, classinfo)</span><br><span class="line"></span><br><span class="line">如果 object 参数是 classinfo 参数的一个实例或者子类(直接或者间接)的话返回 True 。</span><br><span class="line"></span><br><span class="line">当你想检验一个对象的类型的时候，第一个想到的应该是使用 type() 函数。</span><br><span class="line"></span><br><span class="line">if type(obj) == type(dict):</span><br><span class="line">    # do stuff</span><br><span class="line">elif type(obj) == type(list):</span><br><span class="line">    # do other stuff</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">或者你可以这么写：</span><br><span class="line"></span><br><span class="line">if isinstance(obj, dict):</span><br><span class="line">    # do stuff</span><br><span class="line">elif isinstance(obj, list):</span><br><span class="line">    # do other stuff</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">pow(x, y [,z])</span><br><span class="line"></span><br><span class="line">返回 x 的 y 次幂(如果 z 存在的话则以 z 为模)。</span><br><span class="line"></span><br><span class="line">如果你想计算 x 的 y 次方，以 z 为模，那么你可以这么写：</span><br><span class="line"></span><br><span class="line">mod = (x ** y) % z</span><br><span class="line"></span><br><span class="line">但是当 x=1234567， y=4567676， z=56 的时候我的电脑足足跑了 64 秒！</span><br><span class="line"></span><br><span class="line">不要用 ** 和 % 了，使用 pow(x, y, z) 吧！这个例子可以写成 pow(1234567, 4567676, 56) ，只用了 0.034 秒就出了结果！</span><br><span class="line">zip([iterable, ])</span><br><span class="line"></span><br><span class="line">这个函数返回一个含元组的列表，具体请看例子。</span><br><span class="line"></span><br><span class="line">l1 = (&apos;You gotta&apos;, &apos;the&apos;)</span><br><span class="line">l2 = (&apos;love&apos;, &apos;built-in&apos;)</span><br><span class="line">out = []</span><br><span class="line">if len(l1) == len(l2):</span><br><span class="line">    for i in range(len(l1)):</span><br><span class="line">        out.append((l1[i], l2[i]))</span><br><span class="line"># out = [(&apos;You gotta&apos;, &apos;love&apos;), (&apos;the&apos;, &apos;built-in)]</span><br><span class="line"></span><br><span class="line">或者这么写：</span><br><span class="line"></span><br><span class="line">l1 = [&apos;You gotta&apos;, &apos;the&apos;]</span><br><span class="line">l2 = [&apos;love&apos;, &apos;built-in&apos;]</span><br><span class="line">out = zip(l1, l2) # [(&apos;You gotta&apos;, &apos;love&apos;), (&apos;the&apos;, &apos;built-in)]</span><br><span class="line"></span><br><span class="line">如果你想得到倒序的话加上 * 操作符就可以了。</span><br><span class="line"></span><br><span class="line">print zip(*out)</span><br><span class="line"># [(&apos;You gotta&apos;, &apos;the&apos;), (&apos;love&apos;, &apos;built-in&apos;)]</span><br><span class="line"></span><br><span class="line">结论</span><br><span class="line"></span><br><span class="line">Python 内置函数很方便，它们很快并且经过了优化，所以它们可能效率更高。</span><br><span class="line"></span><br><span class="line">我真心认为每个 Python 开发者都应该好好看看内置函数的文档(引言部分)。</span><br><span class="line"></span><br><span class="line">忘了说了，在 itertools 模块中有很多很不错的函数。再说一次，它们确实屌爆了。</span><br><span class="line">中英文对照</span><br><span class="line"></span><br><span class="line">可迭代的对象 － iterable</span><br></pre></td></tr></table></figure></p>
<h5 id="python入门"><a href="#python入门" class="headerlink" title="python入门"></a>python入门</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line">任意元素的列表</span><br><span class="line"></span><br><span class="line">a = list(range(10))             # 构建列表</span><br><span class="line">a1 = list(range(10,20))</span><br><span class="line">a2 = list(range(10,20,2))</span><br><span class="line">a = [2, 3, 4]                   # 整数列表</span><br><span class="line">b = [2, 7, 3.5, “Hello”]        # 混合列表</span><br><span class="line">c = []                          # 空列表</span><br><span class="line">d = [2, [a, b]]                 # 列表包含另外的列表</span><br><span class="line">e = a + b                       # 列表连接</span><br><span class="line"></span><br><span class="line">列表操作</span><br><span class="line">x = a[1]        # 获得列表第二个元素</span><br><span class="line">y = b[1:3:2]    # 列表切片</span><br><span class="line">z = d[1][0][2]  # 列表嵌套</span><br><span class="line">b[0] = 42       # 列表修改</span><br><span class="line">a = list(range(10))</span><br><span class="line">a.append(10)    # 添加元素</span><br><span class="line">a.pop(0)        # 删除位置0元素</span><br><span class="line">a.index(2)                      # 获取元素的位置</span><br><span class="line">a.pop(a.index(5))               # 把元素5从列表中删除</span><br><span class="line">a.insert(0, 10)                 # 在列表的0位置插入一个元素</span><br><span class="line">a.insert(0, list(range(80, 95)) # 在列表的0位置插入一个列表</span><br><span class="line"></span><br><span class="line">元组</span><br><span class="line">f = (2,3,4,5)       # 整数元素的元组</span><br><span class="line">g = ()              # 空元组</span><br><span class="line">g = (1,)            # 包含一个元素的元组</span><br><span class="line">h = (2, [3,4], (10,11,12)) # 元素为混合类型的元组</span><br><span class="line">元组操作</span><br><span class="line">x = h[0]</span><br><span class="line">t_len = len(h)</span><br><span class="line">h[1].append(5)</span><br><span class="line">元祖与列表区别</span><br><span class="line">tuple和list非常类似,但是tuple一旦初始化就不能修改，这个不能修改是指tuple的指向不能修改</span><br><span class="line"></span><br><span class="line">字典</span><br><span class="line">http://www.cnblogs.com/rubylouvre/archive/2011/06/19/2084739.html</span><br><span class="line">http://www.runoob.com/python/python-dictionary.html</span><br><span class="line">d = &#123;&#125;</span><br><span class="line">d[‘name’] = ‘Jack’</span><br><span class="line">d[‘age’] = 30</span><br><span class="line">d[‘city’] = ‘Chengdu’</span><br><span class="line">字典操作</span><br><span class="line">d[‘age’] = 32</span><br><span class="line">‘age’ in d</span><br><span class="line">x = d.get(‘age’)    # 如果key值age不存在，则返回None</span><br><span class="line">d.pop(‘city’)       # 从字典中删除key，以及key对应的值</span><br><span class="line">字典特点</span><br><span class="line">查找和插入的速度快，不会随着key的增加而增加</span><br><span class="line">需要占用大量的内存，内存浪费多</span><br><span class="line">&gt;&gt;&gt; dct = &#123;&apos;F&apos;: &apos;Frist&apos;, &apos;S&apos;: &apos;Second&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; dct</span><br><span class="line">&#123;&apos;F&apos;: &apos;Frist&apos;, &apos;S&apos;: &apos;Second&apos;&#125;</span><br><span class="line">&gt;&gt;&gt; dct.keys()</span><br><span class="line">dict_keys([&apos;F&apos;, &apos;S&apos;])</span><br><span class="line">&gt;&gt;&gt; dct.items()</span><br><span class="line">dict_items([(&apos;F&apos;, &apos;Frist&apos;), (&apos;S&apos;, &apos;Second&apos;)])</span><br><span class="line">&gt;&gt;&gt; dct.values()</span><br><span class="line">dict_values([&apos;Frist&apos;, &apos;Second&apos;])</span><br><span class="line">&gt;&gt;&gt; list(dct.keys())[1]</span><br><span class="line">&apos;S&apos;</span><br><span class="line">&gt;&gt;&gt; list(dct.keys())[0]</span><br><span class="line">&apos;F&apos;</span><br><span class="line">&gt;&gt;&gt; list(dct.values())[0]</span><br><span class="line">&apos;Frist&apos;</span><br><span class="line">&gt;&gt;&gt; list(dct.values())[1]</span><br><span class="line">&apos;Second&apos;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">集合</span><br><span class="line">集合是简单对象的无序集合，当集合中的项目存在与否比起次序或其出现次数更加重要时,我们就会使用集合。通过使用集合,你可以测试某些对象的资格或情况,检查它们是否是其它集合的子集,找到两个集合的交集</span><br><span class="line">&gt;&gt;&gt; sset = set([1, 2, 3, 1, 2, 5, 7])</span><br><span class="line">&gt;&gt;&gt; newset = set()      # 空集合</span><br><span class="line">&gt;&gt;&gt; newset = &#123;1,&#125;       # 一个元素的集合</span><br><span class="line">集合操作</span><br><span class="line">&gt;&gt;&gt; setcp = sset.copy()</span><br><span class="line">&gt;&gt;&gt; setcp.add(4)</span><br><span class="line">&gt;&gt;&gt; setcp.remove(2)</span><br><span class="line">&gt;&gt;&gt; setcp &amp; newset</span><br><span class="line">&gt;&gt;&gt; setcp | newset</span><br><span class="line"></span><br><span class="line">局部变量与全局变量</span><br><span class="line">var = 10</span><br><span class="line">def func():</span><br><span class="line">    # global var</span><br><span class="line">    var = 20</span><br><span class="line">    print(var)</span><br><span class="line"></span><br><span class="line">func()</span><br><span class="line">print(var)</span><br><span class="line"></span><br><span class="line">默认参数</span><br><span class="line">def power(x, n=2):</span><br><span class="line">    return x ** n</span><br><span class="line"></span><br><span class="line">power(2)</span><br><span class="line">power(2, 5)</span><br><span class="line"></span><br><span class="line">关键字参数</span><br><span class="line">def enroll(name, gender, age=6, city=‘Chengdu’):</span><br><span class="line">    print(‘Name   : ’, name)</span><br><span class="line">    print(‘Gender : ’, gender)</span><br><span class="line">    print(‘Age    : ’, age)</span><br><span class="line">    print(‘City   : ’, city)</span><br><span class="line"></span><br><span class="line">enroll(‘Jack’, ‘M’)</span><br><span class="line">enroll(‘Lisa’, ‘F’)</span><br><span class="line">enroll(‘Sarah’, ‘F’, city=‘Beijing’)</span><br><span class="line">enroll(‘Tom’, ‘M’, age=7)</span><br><span class="line"></span><br><span class="line">可变参数 -- 元组</span><br><span class="line">def calc(*args):</span><br><span class="line">    sum = 0</span><br><span class="line">    for num in args:</span><br><span class="line">         sum += num</span><br><span class="line"></span><br><span class="line">  return sum</span><br><span class="line"></span><br><span class="line">calc()</span><br><span class="line">calc(1, 3, 5)</span><br><span class="line">calc(1, 3, 5, 6, 7)</span><br><span class="line">lst = list(range(100))</span><br><span class="line">calc(*lst)</span><br><span class="line"></span><br><span class="line">可变参数 -- 字典</span><br><span class="line">def person(name, age, **kw):</span><br><span class="line">    print(&apos;name: &#123;&#125;, age: &#123;&#125;, other: &#123;&#125;&apos;.format(name, age, kw))</span><br><span class="line"></span><br><span class="line">person(&apos;Tom&apos;, 30)</span><br><span class="line">person(&apos;Lily&apos;, 22, city=&apos;Chengdu&apos;)</span><br><span class="line">person(&apos;Jack&apos;, 29, gender=&apos;M&apos;, job=&apos;teacher&apos;)</span><br><span class="line">extra = &#123;&apos;gender&apos;: &apos;F&apos;, &apos;city&apos;: &apos;Chengdu&apos;, &apos;job&apos;: &apos;engineer&apos;&#125;</span><br><span class="line">person(&apos;Susan&apos;, 21, **extra)</span><br><span class="line"></span><br><span class="line">多个返回值</span><br><span class="line">import math</span><br><span class="line"></span><br><span class="line">def move(x, y, step, angle=0):</span><br><span class="line">    nx = x + step * math.cos(angle)</span><br><span class="line">    ny = y – step * math.sin(angle)</span><br><span class="line"></span><br><span class="line">  return nx, ny</span><br><span class="line"></span><br><span class="line">x,y = move(100, 100, 60, math.pi / 6)</span><br><span class="line">tp = move(100, 100, 60, math.pi / 6)</span><br><span class="line">x = tp[0]</span><br><span class="line">Y = tp[1]</span><br><span class="line">print(x, y)</span><br><span class="line"></span><br><span class="line">类</span><br><span class="line">class Person:</span><br><span class="line">    count = 0   # 类变量</span><br><span class="line">    def __init__(self, name):</span><br><span class="line">      self.name = name      # 对象变量</span><br><span class="line">      self.__private_var = None # 私有变量</span><br><span class="line">    def __private_func(self):       # 私有函数</span><br><span class="line">      pass</span><br><span class="line">  def say_hi(self):</span><br><span class="line">    print(‘Hello, my name is’, self.name)</span><br><span class="line"></span><br><span class="line">P_Inst = Person(“Jack”)</span><br><span class="line">P_Inst.say_hi()</span><br><span class="line"></span><br><span class="line">异常</span><br><span class="line">try:</span><br><span class="line">        text = input(&apos;Enter something   --&gt; &apos;)</span><br><span class="line">except  EOFError:</span><br><span class="line">        print(&apos;Why  did you do  an  EOF on  me?&apos;)</span><br><span class="line">except  KeyboardInterrupt:</span><br><span class="line">        print(&apos;You  cancelled   the operation.&apos;)</span><br><span class="line">else:</span><br><span class="line">        print(&apos;You  entered &#123;&#125;&apos;.format(text))</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    pass</span><br><span class="line">except:</span><br><span class="line">    pass</span><br><span class="line">else:</span><br><span class="line">    pass</span><br><span class="line">finally:</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">dir命令</span><br><span class="line">&gt;&gt;&gt; dir(list)</span><br><span class="line">&gt;&gt;&gt; dir(dict)</span><br><span class="line">import datetime</span><br><span class="line">&gt;&gt;&gt; dir(datetime.datetime)</span><br><span class="line">&gt;&gt;&gt; dir(datetime.datetime.today)</span><br><span class="line">&gt;&gt;&gt; dir(datetime.datetime.today())</span><br><span class="line">Python Official Document</span><br><span class="line">简明Python教程，Python学习手册，Python编程</span><br></pre></td></tr></table></figure>
<h5 id="python命令行集锦"><a href="#python命令行集锦" class="headerlink" title="python命令行集锦"></a>python命令行集锦</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; record = (&apos;Dave&apos;, &apos;dave@example.com&apos;, &apos;773-555-1212&apos;, &apos;847-555-1212&apos;)</span><br><span class="line">&gt;&gt;&gt; name, email, *phone_numbers = record</span><br><span class="line">&gt;&gt;&gt; type(phone_numbers)</span><br><span class="line">&lt;class &apos;list&apos;&gt;</span><br><span class="line">&gt;&gt;&gt; phone_numbers</span><br><span class="line">[&apos;773-555-1212&apos;, &apos;847-555-1212&apos;]</span><br><span class="line">&gt;&gt;&gt; record = (&apos;Dave&apos;, &apos;dave@example.com&apos;, &#123;a: &apos;773-555-1212&apos;, b: &apos;847-555-1212&apos;&#125;)</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">TypeError: unhashable type: &apos;dict&apos;</span><br><span class="line">&gt;&gt;&gt; record = [&apos;Dave&apos;, &apos;dave@example.com&apos;, &#123;a: &apos;773-555-1212&apos;, b: &apos;847-555-1212&apos;&#125;]</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">TypeError: unhashable type: &apos;dict&apos;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h5 id="Python日志重定向输出缓存问题"><a href="#Python日志重定向输出缓存问题" class="headerlink" title="Python日志重定向输出缓存问题"></a>Python日志重定向输出缓存问题</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">python -u script.py</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python 你想立即看到对于终端之外的设备的标准输出的话，要么你自己 flush 一下（print(..., flush=True) 或者 Python 2 里用 sys.stdout.flush），要么使用 python -u 来运行脚本，要么你去把 sys.stdout 替换掉。</span><br><span class="line"></span><br><span class="line">通常，对标准输出（以及其它除标准错误之外的文件）的输出，默认是带缓冲的，你可以看一下这个教程。对于终端是行缓冲，对于其它设备是块缓冲。标准错误一般是无缓冲的。</span><br><span class="line"></span><br><span class="line">如果要写日志，或者做基于行的持续性输出的话，记得设置相应的缓冲模式（open 函数的 buffer 参数），或者在合适的地方调用 .flush() 方法。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Jenkins + python 的任务，console output 没有及时输出日志</span><br><span class="line"></span><br><span class="line">期初是以为是 #!/bin/bash -ilex 中四个参数导致console output 没有输出，后来突然意识到是python的print应该有buffer的问题</span><br><span class="line"></span><br><span class="line">https://stackoverflow.com/questions/22826006/how-to-get-python-print-result-in-jenkins-console-output</span><br><span class="line"></span><br><span class="line">https://stackoverflow.com/questions/11631951/jenkins-console-output-not-in-realtime</span><br><span class="line"></span><br><span class="line">有两种解释</span><br><span class="line"></span><br><span class="line">1.jenkins 要输入换行符才能展示数据</span><br><span class="line"></span><br><span class="line">Any output to stdout from a process spawned by Jenkins should be captured by Console Output. One caveat is that it won&apos;t be displayed until a newline character is printed, so make sure your lines are terminated.</span><br><span class="line"></span><br><span class="line">2.print有buffer</span><br><span class="line"></span><br><span class="line">    ruby or python or any sensible scripting language will buffer the output; this is in order to minimize the IO; writing to disk is slow, writing to a console is slow...</span><br><span class="line">    usually the data gets flush()&apos;ed automatically after you have enough data in the buffer with special handling for newlines. e.g. writing a string without newline then sleep() would not write anything until after the sleep() is complete (I&apos;m only using sleep as an example, feel free to substitute with any other expensive system call).</span><br><span class="line"></span><br><span class="line">解决方法看到两个</span><br><span class="line"></span><br><span class="line">1.print 信息后加sys.stdout.flush()</span><br><span class="line"></span><br><span class="line">2. 执行python时增加 -u 参数，即 python -u XXX.py</span><br><span class="line"></span><br><span class="line">    for python, you can use python -u or the environment variable PYTHONUNBUFFERED to make stdin/stdout/stout not buffered, but there are other solutions that do not change stdin or stderr</span><br><span class="line"></span><br><span class="line">    export PYTHONUNBUFFERED=1</span><br></pre></td></tr></table></figure>
<p></p>
</ol>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/11/python-spider-example/" rel="next" title="python简单爬虫示例">
                <i class="fa fa-chevron-left"></i> python简单爬虫示例
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/11/software-engineering-document/" rel="prev" title="软件工程中的几个阶段">
                软件工程中的几个阶段 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Hogan Chen</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#Python实现-func-LINE-FILE"><span class="nav-number">1.</span> <span class="nav-text">Python实现__func__, __LINE__, __FILE_\</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python操作excel表格"><span class="nav-number">2.</span> <span class="nav-text">Python操作excel表格</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python-2和3的区别"><span class="nav-number">3.</span> <span class="nav-text">Python 2和3的区别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#编写python2，python3兼容代码"><span class="nav-number">4.</span> <span class="nav-text">编写python2，python3兼容代码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python的几种取整方式"><span class="nav-number">5.</span> <span class="nav-text">Python的几种取整方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python字符串补零"><span class="nav-number">6.</span> <span class="nav-text">Python字符串补零</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python命令行参数"><span class="nav-number">7.</span> <span class="nav-text">python命令行参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#检查变量是否被定义"><span class="nav-number">8.</span> <span class="nav-text">检查变量是否被定义</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python的raise函数用法"><span class="nav-number">9.</span> <span class="nav-text">Python的raise函数用法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python变量，可变变量"><span class="nav-number">10.</span> <span class="nav-text">Python变量，可变变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python垃圾回收"><span class="nav-number">11.</span> <span class="nav-text">Python垃圾回收</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#函数的参数传递方式"><span class="nav-number">12.</span> <span class="nav-text">函数的参数传递方式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#列表复制-深层赋值只有copy-deepcopy能实现，仔细分析5种复制方法比较"><span class="nav-number">13.</span> <span class="nav-text">列表复制(深层赋值只有copy.deepcopy能实现，仔细分析5种复制方法比较)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python对象的浅拷贝和深拷贝"><span class="nav-number">14.</span> <span class="nav-text">Python对象的浅拷贝和深拷贝</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python进制转换"><span class="nav-number">15.</span> <span class="nav-text">Python进制转换</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#默认参数的坑"><span class="nav-number">16.</span> <span class="nav-text">默认参数的坑</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#静态类和静态函数的区别"><span class="nav-number">17.</span> <span class="nav-text">静态类和静态函数的区别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python类成员方法，静态方法和静态类的区别"><span class="nav-number">18.</span> <span class="nav-text">Python类成员方法，静态方法和静态类的区别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#正则表达式"><span class="nav-number">19.</span> <span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#正则表达式使用变量"><span class="nav-number">20.</span> <span class="nav-text">正则表达式使用变量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Str模块相关函数用法"><span class="nav-number">21.</span> <span class="nav-text">Str模块相关函数用法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python检查列表，字符串为空"><span class="nav-number">22.</span> <span class="nav-text">Python检查列表，字符串为空</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python-os-path模块"><span class="nav-number">23.</span> <span class="nav-text">Python os.path模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python-id函数"><span class="nav-number">24.</span> <span class="nav-text">python id函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python内存管理"><span class="nav-number">25.</span> <span class="nav-text">python内存管理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python利用dis模块进行代码层次的性能剖析"><span class="nav-number">26.</span> <span class="nav-text">python利用dis模块进行代码层次的性能剖析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python中给List添加元素的4种方法分享"><span class="nav-number">27.</span> <span class="nav-text">Python中给List添加元素的4种方法分享</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python浮点数精度截取"><span class="nav-number">28.</span> <span class="nav-text">python浮点数精度截取</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用logging分级打印日志"><span class="nav-number">29.</span> <span class="nav-text">使用logging分级打印日志</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sleep的用法"><span class="nav-number">30.</span> <span class="nav-text">sleep的用法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python字符串合并与格式化"><span class="nav-number">31.</span> <span class="nav-text">Python字符串合并与格式化</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#String类中format函数的用法"><span class="nav-number">32.</span> <span class="nav-text">String类中format函数的用法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python字符串间隔固定位置插入分割符号"><span class="nav-number">33.</span> <span class="nav-text">Python字符串间隔固定位置插入分割符号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python字符串转日期"><span class="nav-number">34.</span> <span class="nav-text">Python字符串转日期</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#datetime显示开始执行时间和结束执行时间"><span class="nav-number">35.</span> <span class="nav-text">datetime显示开始执行时间和结束执行时间</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#判断字符串是否为空"><span class="nav-number">36.</span> <span class="nav-text">判断字符串是否为空</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#获取指定路径下所有指定后缀的文件"><span class="nav-number">37.</span> <span class="nav-text">获取指定路径下所有指定后缀的文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python文件遍历"><span class="nav-number">38.</span> <span class="nav-text">Python文件遍历</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python遍历某个文件夹下的全部文件"><span class="nav-number">39.</span> <span class="nav-text">python遍历某个文件夹下的全部文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python删除文件和目录"><span class="nav-number">40.</span> <span class="nav-text">Python删除文件和目录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python文件复制拷贝"><span class="nav-number">41.</span> <span class="nav-text">Python文件复制拷贝</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#os-mkdir与os-makedirs区别"><span class="nav-number">42.</span> <span class="nav-text">os.mkdir与os.makedirs区别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python文件操作"><span class="nav-number">43.</span> <span class="nav-text">Python文件操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python压缩解压模块"><span class="nav-number">44.</span> <span class="nav-text">Python压缩解压模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python列表合并"><span class="nav-number">45.</span> <span class="nav-text">Python列表合并</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python随机字符串"><span class="nav-number">46.</span> <span class="nav-text">Python随机字符串</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python字符串操作"><span class="nav-number">47.</span> <span class="nav-text">Python字符串操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python3中替换python2中cmp函数的新函数分析-lt、le、eq、ne、ge、gt"><span class="nav-number">48.</span> <span class="nav-text">python3中替换python2中cmp函数的新函数分析(lt、le、eq、ne、ge、gt)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python字符串比较"><span class="nav-number">49.</span> <span class="nav-text">Python字符串比较</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#利用Python在一个文件的头部插入数据"><span class="nav-number">50.</span> <span class="nav-text">利用Python在一个文件的头部插入数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python文件读写"><span class="nav-number">51.</span> <span class="nav-text">Python文件读写</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python文件读写时的换行符与回车符"><span class="nav-number">52.</span> <span class="nav-text">Python文件读写时的换行符与回车符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python的with语句"><span class="nav-number">53.</span> <span class="nav-text">Python的with语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python升级模块"><span class="nav-number">54.</span> <span class="nav-text">Python升级模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python使用第三方源升级模块"><span class="nav-number">55.</span> <span class="nav-text">Python使用第三方源升级模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#重新导入Python模块"><span class="nav-number">56.</span> <span class="nav-text">重新导入Python模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python查看模块版本"><span class="nav-number">57.</span> <span class="nav-text">Python查看模块版本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python-socket编程"><span class="nav-number">58.</span> <span class="nav-text">Python socket编程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python多线程"><span class="nav-number">59.</span> <span class="nav-text">Python多线程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#list和dict的线程安全"><span class="nav-number">60.</span> <span class="nav-text">list和dict的线程安全</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python协程-异步编程"><span class="nav-number">61.</span> <span class="nav-text">Python协程(异步编程)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python-subprocess超时问题解决集锦"><span class="nav-number">62.</span> <span class="nav-text">Python subprocess超时问题解决集锦</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python的logging模块"><span class="nav-number">63.</span> <span class="nav-text">Python的logging模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python-enumerate用法"><span class="nav-number">64.</span> <span class="nav-text">python enumerate用法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#repr-函数"><span class="nav-number">65.</span> <span class="nav-text">repr() 函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#lambda函数"><span class="nav-number">66.</span> <span class="nav-text">lambda函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#reduce函数"><span class="nav-number">67.</span> <span class="nav-text">reduce函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python函数式编程"><span class="nav-number">68.</span> <span class="nav-text">Python函数式编程</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#map-reduce和filter的用法"><span class="nav-number">69.</span> <span class="nav-text">map, reduce和filter的用法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python-非常有用的调试语句能打印内存"><span class="nav-number">70.</span> <span class="nav-text">python 非常有用的调试语句能打印内存</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#struct模块"><span class="nav-number">71.</span> <span class="nav-text">struct模块</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python2与Python3的zip结果的差别"><span class="nav-number">72.</span> <span class="nav-text">Python2与Python3的zip结果的差别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python判断某个对象是否是可迭代对象"><span class="nav-number">73.</span> <span class="nav-text">Python判断某个对象是否是可迭代对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#可迭代对象，迭代器和生成器"><span class="nav-number">74.</span> <span class="nav-text">可迭代对象，迭代器和生成器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python执行windows-cmd命令"><span class="nav-number">75.</span> <span class="nav-text">Python执行windows cmd命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python-内置的那些牛逼闪亮的函数"><span class="nav-number">76.</span> <span class="nav-text">Python 内置的那些牛逼闪亮的函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python入门"><span class="nav-number">77.</span> <span class="nav-text">python入门</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#python命令行集锦"><span class="nav-number">78.</span> <span class="nav-text">python命令行集锦</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Python日志重定向输出缓存问题"><span class="nav-number">79.</span> <span class="nav-text">Python日志重定向输出缓存问题</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hogan Chen</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>

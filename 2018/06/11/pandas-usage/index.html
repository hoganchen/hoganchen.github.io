<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Python," />










<meta name="description" content="Pandas reference linkshttp://pandas.pydata.org/pandas-docs/stable/http://pandas.pydata.org/pandas-docs/stable/api.html http://www.cnblogs.com/chaosimple/p/4153083.htmlhttp://www.shizhuolin.com/2015/">
<meta name="keywords" content="Python">
<meta property="og:type" content="article">
<meta property="og:title" content="pandas使用问题记录">
<meta property="og:url" content="http://yoursite.com/2018/06/11/pandas-usage/index.html">
<meta property="og:site_name" content="Hogan&#39;s Blog">
<meta property="og:description" content="Pandas reference linkshttp://pandas.pydata.org/pandas-docs/stable/http://pandas.pydata.org/pandas-docs/stable/api.html http://www.cnblogs.com/chaosimple/p/4153083.htmlhttp://www.shizhuolin.com/2015/">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://yoursite.com/upload_image/pandas-usage/plot.png">
<meta property="og:updated_time" content="2020-06-21T04:16:35.279Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="pandas使用问题记录">
<meta name="twitter:description" content="Pandas reference linkshttp://pandas.pydata.org/pandas-docs/stable/http://pandas.pydata.org/pandas-docs/stable/api.html http://www.cnblogs.com/chaosimple/p/4153083.htmlhttp://www.shizhuolin.com/2015/">
<meta name="twitter:image" content="http://yoursite.com/upload_image/pandas-usage/plot.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/06/11/pandas-usage/"/>





  <title>pandas使用问题记录 | Hogan's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hogan's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/11/pandas-usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hogan Chen">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hogan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">pandas使用问题记录</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-06-11T16:15:43+08:00">
                2018-06-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <ol>

<h5 id="Pandas-reference-links"><a href="#Pandas-reference-links" class="headerlink" title="Pandas reference links"></a>Pandas reference links</h5><p><a href="http://pandas.pydata.org/pandas-docs/stable/" target="_blank" rel="noopener">http://pandas.pydata.org/pandas-docs/stable/</a><br><a href="http://pandas.pydata.org/pandas-docs/stable/api.html" target="_blank" rel="noopener">http://pandas.pydata.org/pandas-docs/stable/api.html</a></p>
<p><a href="http://www.cnblogs.com/chaosimple/p/4153083.html" target="_blank" rel="noopener">http://www.cnblogs.com/chaosimple/p/4153083.html</a><br><a href="http://www.shizhuolin.com/2015/04/19/978.html" target="_blank" rel="noopener">http://www.shizhuolin.com/2015/04/19/978.html</a><br><a href="https://ericfu.me/10-minutes-to-pandas/" target="_blank" rel="noopener">https://ericfu.me/10-minutes-to-pandas/</a></p>
<p><a href="http://blog.csdn.net/xiaodongxiexie/article/details/53108959" target="_blank" rel="noopener">http://blog.csdn.net/xiaodongxiexie/article/details/53108959</a><br><a href="http://blog.csdn.net/wr339988/article/details/65446138" target="_blank" rel="noopener">http://blog.csdn.net/wr339988/article/details/65446138</a></p>
<p>Pandas进阶<br><a href="http://dataunion.org/23394.html" target="_blank" rel="noopener">http://dataunion.org/23394.html</a><br><a href="http://cloga.info/python/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/2013/09/17/pandasintro" target="_blank" rel="noopener">http://cloga.info/python/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/2013/09/17/pandasintro</a><br><a href="http://www.jianshu.com/p/682c24aef525" target="_blank" rel="noopener">http://www.jianshu.com/p/682c24aef525</a><br><a href="https://www.joinquant.com/post/1198" target="_blank" rel="noopener">https://www.joinquant.com/post/1198</a><br><a href="https://wolfsonliu.github.io/archive/python-xue-xi-bi-ji-pandas.html" target="_blank" rel="noopener">https://wolfsonliu.github.io/archive/python-xue-xi-bi-ji-pandas.html</a><br><a href="https://stream886.github.io/2016/12/18/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Python%E4%B9%8BPandas%E5%8C%85/" target="_blank" rel="noopener">https://stream886.github.io/2016/12/18/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E7%AC%94%E8%AE%B0%E2%80%94%E2%80%94Python%E4%B9%8BPandas%E5%8C%85/</a><br><a href="http://xxuan.me/2017-09-28-pandas.html" target="_blank" rel="noopener">http://xxuan.me/2017-09-28-pandas.html</a><br><a href="https://github.com/familyld/learnpython/blob/master/Efficient_Pandas_Skills.md" target="_blank" rel="noopener">https://github.com/familyld/learnpython/blob/master/Efficient_Pandas_Skills.md</a><br><a href="http://xight.top/2015/10/23/pandas-%E6%8C%87%E5%8D%97-2/" target="_blank" rel="noopener">http://xight.top/2015/10/23/pandas-%E6%8C%87%E5%8D%97-2/</a><br><a href="https://zhuanlan.zhihu.com/p/21598982" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/21598982</a><br><a href="http://kekefund.com/2016/06/17/pandas-groupby/" target="_blank" rel="noopener">http://kekefund.com/2016/06/17/pandas-groupby/</a></p>
<a id="more"></a>
<h5 id="DataFrame获取列名"><a href="#DataFrame获取列名" class="headerlink" title="DataFrame获取列名"></a>DataFrame获取列名</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">k_df.columns</span><br><span class="line">k_df.columns[0]</span><br></pre></td></tr></table></figure>
<h5 id="DataFrame列作为list返回"><a href="#DataFrame列作为list返回" class="headerlink" title="DataFrame列作为list返回"></a>DataFrame列作为list返回</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list(k_df.columns)</span><br><span class="line">list(k_df)</span><br><span class="line">list(k_df[:0])</span><br></pre></td></tr></table></figure>
<h5 id="获取DataFrame中的某个值"><a href="#获取DataFrame中的某个值" class="headerlink" title="获取DataFrame中的某个值"></a>获取DataFrame中的某个值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">code_df.iat[index, 0] # 第一个参数为index值，后一个参数是列所在的索引</span><br><span class="line">code_df.iloc[index, 0] # 第一个参数为index值，后一个参数是列所在的索引</span><br><span class="line">today_df.loc[0,today_df.columns[0]]</span><br><span class="line">today_df.loc[0,&apos;code&apos;] # 第一个参数为index值，后一个是列名</span><br><span class="line"></span><br><span class="line">hist_df = ts.get_hist_data(&apos;600000&apos;)</span><br><span class="line">hist_df[&apos;close&apos;]</span><br><span class="line">&gt;&gt;&gt; hist_df[&apos;close&apos;].max()</span><br><span class="line">20.09</span><br><span class="line">&gt;&gt;&gt; hist_df[&apos;close&apos;].min()</span><br><span class="line">10.470000000000001</span><br><span class="line">&gt;&gt;&gt; hist_df[&apos;close&apos;][1]</span><br><span class="line">12.390000000000001</span><br><span class="line">&gt;&gt;&gt; hist_df[&apos;close&apos;][2]</span><br><span class="line">12.6</span><br></pre></td></tr></table></figure>
<h5 id="设置DataFrame中的某个值"><a href="#设置DataFrame中的某个值" class="headerlink" title="设置DataFrame中的某个值"></a>设置DataFrame中的某个值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">df.at[dates[0],&apos;A&apos;] = 0</span><br><span class="line">df.at[1,&apos;A&apos;] = 0 # 第一个参数为行索引，第二个参数为列名</span><br><span class="line">df.iat[1, 1] = 0 # 第一个参数为行号(行所在位置)，第二个参数是列的索引值</span><br></pre></td></tr></table></figure>
<h5 id="列交换位置"><a href="#列交换位置" class="headerlink" title="列交换位置"></a>列交换位置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># A list</span><br><span class="line">k_df_column = list(k_df) # k_df_column = list(k_df.columns)</span><br><span class="line">k_df_column.insert(0, k_df_column.pop(k_df_column.index(k_df.columns[-1])))  # 把最后一行弹出插入第一行</span><br><span class="line">k_df = k_df[k_df_column]</span><br></pre></td></tr></table></figure>
<h5 id="取前两列"><a href="#取前两列" class="headerlink" title="取前两列"></a>取前两列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">code_df = today_df[list(today_df.columns[0:2])]</span><br><span class="line">code_df = today_df[list(range(2))]</span><br><span class="line"></span><br><span class="line">隔一行取一列</span><br><span class="line">code_df = today_df[list(today_df.columns[::2])]</span><br><span class="line">code_df = today_df[today_df.columns[::2]]</span><br></pre></td></tr></table></figure>
<h5 id="插入一列"><a href="#插入一列" class="headerlink" title="插入一列"></a>插入一列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 第一个参数为插入位置，列名为date，值为today_date_str</span><br><span class="line">today_df.insert(0, &apos;date&apos;, today_date_str)</span><br><span class="line"></span><br><span class="line">hist_df.insert(0, &apos;code&apos;, code)</span><br><span class="line">hist_df.insert(1, &apos;date&apos;, hist_df.index)</span><br></pre></td></tr></table></figure>
<h5 id="插入一行"><a href="#插入一行" class="headerlink" title="插入一行"></a>插入一行</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">low_increase_df = today_df[0:0]</span><br><span class="line"></span><br><span class="line">low_increase_df[&apos;ma5&apos;] = 0</span><br><span class="line">low_increase_df[&apos;ma10&apos;] = 0</span><br><span class="line">low_increase_df[&apos;ma20&apos;] = 0</span><br><span class="line">low_increase_df[&apos;Ma20_Change&apos;] = 0</span><br><span class="line"></span><br><span class="line">low_increase_df = low_increase_df.append(today_df.iloc[index])</span><br><span class="line"># the index 11 is the average volume of 5 days</span><br><span class="line">low_increase_df.iat[len(low_increase_df) - 1, df_columns] = float(ma5prc)</span><br><span class="line"># the index 12 is the average volume of 10 days</span><br><span class="line">low_increase_df.iat[len(low_increase_df) - 1, df_columns + 1] = float(ma10prc)</span><br><span class="line"># the index 13 is the average volume of 20 days</span><br><span class="line">low_increase_df.iat[len(low_increase_df) - 1, df_columns + 2] = float(ma20prc)</span><br><span class="line"># the index 13 is the average volume of 20 days</span><br><span class="line">low_increase_df.iat[len(low_increase_df) - 1, df_columns + 3] = float(float(today_trad_price) / float(ma20prc))</span><br></pre></td></tr></table></figure>
<h5 id="获取dateFrame的索引值"><a href="#获取dateFrame的索引值" class="headerlink" title="获取dateFrame的索引值"></a>获取dateFrame的索引值</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">basics_df.index</span><br></pre></td></tr></table></figure>
<h5 id="获取某一列或几列的所有值"><a href="#获取某一列或几列的所有值" class="headerlink" title="获取某一列或几列的所有值"></a>获取某一列或几列的所有值</h5><p><a href="http://www.cnblogs.com/kylinlin/p/5231404.html" target="_blank" rel="noopener">http://www.cnblogs.com/kylinlin/p/5231404.html</a><br>INDEXING AND SELECTING DATA chapter in pandas document<br>p1193<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">df.loc[:,[&apos;A&apos;,&apos;B&apos;]]</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; list(hist_df)</span><br><span class="line">[&apos;open&apos;, &apos;high&apos;, &apos;close&apos;, &apos;low&apos;, &apos;volume&apos;, &apos;price_change&apos;, &apos;p_change&apos;, &apos;ma5&apos;, &apos;ma10&apos;, &apos;ma20&apos;, &apos;v_ma5&apos;, &apos;v_ma10&apos;, &apos;v_ma20&apos;, &apos;turnover&apos;]</span><br><span class="line">&gt;&gt;&gt; list(hist_df.columns)</span><br><span class="line">[&apos;open&apos;, &apos;high&apos;, &apos;close&apos;, &apos;low&apos;, &apos;volume&apos;, &apos;price_change&apos;, &apos;p_change&apos;, &apos;ma5&apos;, &apos;ma10&apos;, &apos;ma20&apos;, &apos;v_ma5&apos;, &apos;v_ma10&apos;, &apos;v_ma20&apos;, &apos;turnover&apos;]</span><br><span class="line">&gt;&gt;&gt; hist_df.columns[1]</span><br><span class="line">&apos;high&apos;</span><br><span class="line">&gt;&gt;&gt; hist_df.columns[0]</span><br><span class="line">&apos;open&apos;</span><br><span class="line">&gt;&gt;&gt; len(hist_df.columns)</span><br><span class="line">14</span><br><span class="line">&gt;&gt;&gt; list(hist_df.columns).index(&apos;open&apos;)</span><br><span class="line">0</span><br><span class="line">&gt;&gt;&gt; list(hist_df.columns).index(&apos;low&apos;)</span><br><span class="line">3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">today_df[:][&apos;code&apos;]</span><br><span class="line">today_df[today_df.columns[0]]</span><br><span class="line">today_df.today_df</span><br><span class="line">today_df[&apos;code&apos;]</span><br><span class="line">today_df[[&apos;code&apos;, &apos;name&apos;, &apos;volume&apos;]]</span><br><span class="line">today_df[[1, 2, 3, 4, 5, 8]]</span><br><span class="line"></span><br><span class="line">today_df.loc[:, list(today_df.columns[0:2])]</span><br><span class="line">today_df.loc[:, 0:2]</span><br><span class="line"></span><br><span class="line">pandas revert翻转</span><br><span class="line">today_df = today_df[::-1]</span><br><span class="line"></span><br><span class="line">即通过[]获取DataFrame的值，如果只有一个参数或者参数列表，则是获取这些列的值，而且这些参数必须是列名，如：df[[&apos;code&apos;, &apos;name&apos;, &apos;volume&apos;]], df[df.columns[1:5]]。如果是参数是一个范围，则是获取行的值，如df[0:len(df)-1], df[::2]</span><br></pre></td></tr></table></figure></p>
<h5 id="复制DataFrame"><a href="#复制DataFrame" class="headerlink" title="复制DataFrame"></a>复制DataFrame</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">new_code_df = code_df[:]</span><br><span class="line">new_code_df = code_df.copy()</span><br><span class="line"></span><br><span class="line">new_today_df = today_df.loc[:, :]</span><br><span class="line">new_today_df = today_df.iloc[:, :]</span><br><span class="line"></span><br><span class="line">new_today_df = today_df.loc[:]</span><br><span class="line">new_today_df = today_df.iloc[:]</span><br></pre></td></tr></table></figure>
<h5 id="复制DataFrame的结构"><a href="#复制DataFrame的结构" class="headerlink" title="复制DataFrame的结构"></a>复制DataFrame的结构</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">new_code_df = code_df[:0] # 复制空的DataFrame</span><br><span class="line">new_code_df = code_df[0:0]</span><br></pre></td></tr></table></figure>
<h5 id="创建DataFrame"><a href="#创建DataFrame" class="headerlink" title="创建DataFrame"></a>创建DataFrame</h5><p><a href="http://blog.csdn.net/chixujohnny/article/details/54133866" target="_blank" rel="noopener">http://blog.csdn.net/chixujohnny/article/details/54133866</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(np.random.randn(6,4), index=dates, columns=list(&apos;ABCD&apos;))</span><br><span class="line"></span><br><span class="line"># 创建一个空的 DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">df_empty = pd.DataFrame(columns=[&apos;A&apos;, &apos;B&apos;, &apos;C&apos;, &apos;D&apos;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df = DataFrame(np.random.randn(4, 5), columns=[&apos;A&apos;, &apos;B&apos;, &apos;C&apos;, &apos;D&apos;, &apos;E&apos;])</span><br><span class="line"></span><br><span class="line">DataFrame数据预览：</span><br><span class="line"></span><br><span class="line">          A         B         C         D         E</span><br><span class="line">0  0.673092  0.230338 -0.171681  0.312303 -0.184813</span><br><span class="line">1 -0.504482 -0.344286 -0.050845 -0.811277 -0.298181</span><br><span class="line">2  0.542788  0.207708  0.651379 -0.656214  0.507595</span><br><span class="line">3 -0.249410  0.131549 -2.198480 -0.437407  1.628228</span><br></pre></td></tr></table></figure></p>
<h5 id="空的DataFrame中插入数据"><a href="#空的DataFrame中插入数据" class="headerlink" title="空的DataFrame中插入数据"></a><li>空的DataFrame中插入数据</li></h5><p><a href="http://blog.sina.com.cn/s/blog_74cd4a3f0102wn5d.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_74cd4a3f0102wn5d.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">pandas.Series.append method in pandas.pdf</span><br><span class="line"></span><br><span class="line"># method 1</span><br><span class="line">&gt;&gt;&gt; select_df = pandas.DataFrame(columns=[&apos;code&apos;, &apos;price&apos;])</span><br><span class="line">&gt;&gt;&gt; select_df = select_df.append(&#123;&apos;code&apos;:&apos;600000&apos;, &apos;price&apos;:&apos;12.88&apos;&#125;,ignore_index=True)</span><br><span class="line">&gt;&gt;&gt; select_df</span><br><span class="line">     code  price</span><br><span class="line">0  600000  12.88</span><br><span class="line">&gt;&gt;&gt; select_df = select_df.append(&#123;&apos;code&apos;:&apos;600399&apos;, &apos;price&apos;:&apos;2.88&apos;&#125;,ignore_index=True)</span><br><span class="line">&gt;&gt;&gt; select_df</span><br><span class="line">     code  price</span><br><span class="line">0  600000  12.88</span><br><span class="line">1  600399   2.88</span><br><span class="line">&gt;&gt;&gt; select_df = select_df.append([600123, 15.12],ignore_index=True)</span><br><span class="line">&gt;&gt;&gt; select_df</span><br><span class="line">     code  price          0</span><br><span class="line">0  600000  12.88        NaN</span><br><span class="line">1  600399   2.88        NaN</span><br><span class="line">2     NaN    NaN  600123.00</span><br><span class="line">3     NaN    NaN      15.12</span><br><span class="line"></span><br><span class="line"># method 2</span><br><span class="line">在pandas中创建一个空DataFrame的方法，类似于创建了一个空字典（dict）。</span><br><span class="line"></span><br><span class="line">例如：empty = pandas.DataFrame(&#123;&quot;name&quot;:&quot;&quot;,&quot;age&quot;:&quot;&quot;,&quot;sex&quot;:&quot;&quot;&#125;)​</span><br><span class="line"></span><br><span class="line">想要向empty中插入一行数据，可以用同样的方法​。</span><br><span class="line"></span><br><span class="line">（1）首先，要创建一个DataFrame。要注意，在这里需加入index属性，new = pandas.DataFrame(&#123;&quot;name&quot;:&quot;&quot;,&quot;age&quot;:&quot;&quot;,&quot;sex&quot;:&quot;&quot;&#125;,index=[&quot;0&quot;])​。</span><br><span class="line"></span><br><span class="line">（2）然后，开始插值。ignore_index=True,可以帮助忽略index，自动递增。</span><br><span class="line"></span><br><span class="line">empty.append(new,ignore_index=True)​</span><br><span class="line"></span><br><span class="line">（3）最重要的，赋值给empty.</span><br><span class="line"></span><br><span class="line">​empty = empty.append(new,ignore_index=True)​</span><br><span class="line"></span><br><span class="line">​否则，数据始终没有写入。</span><br></pre></td></tr></table></figure></p>
<h5 id="DataFrame数据过滤"><a href="#DataFrame数据过滤" class="headerlink" title="DataFrame数据过滤"></a>DataFrame数据过滤</h5><p><a href="http://bluewhale.cc/2016-08-06/use-pandas-filter-and-sort.html" target="_blank" rel="noopener">http://bluewhale.cc/2016-08-06/use-pandas-filter-and-sort.html</a><br><a href="http://www.cnblogs.com/renfanzi/p/6420783.html" target="_blank" rel="noopener">http://www.cnblogs.com/renfanzi/p/6420783.html</a><br><a href="http://blog.csdn.net/zhili8866/article/details/68134481" target="_blank" rel="noopener">http://blog.csdn.net/zhili8866/article/details/68134481</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">today_trade_df = today_df[today_df.volume &gt; 0]</span><br><span class="line">today_df[today_df.code == &apos;600000&apos;] # 取得code列中数据为600000的行</span><br><span class="line">today_df[today_df[&apos;code&apos;] == &apos;600000&apos;]</span><br><span class="line">today_df[(today_df[&apos;code&apos;] &gt;= &apos;600000&apos;) &amp; (today_df[&apos;volume&apos;] &gt; 100000)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">price_today_df = today_df[(today_df.trade &lt; 50) &amp; (today_df.trade &gt; 0)]</span><br><span class="line">price_today_df = today_df[(today_df.trade &lt; 50) &amp; (today_df.volume &gt; 0)]</span><br><span class="line"></span><br><span class="line">price_today_df.sort_values(by=&apos;trade&apos;)  #升序排列</span><br><span class="line">price_today_df.sort_values(by=&apos;trade&apos;, ascending=False)  #降序排列</span><br><span class="line">price_today_df.sort_values(by=[&apos;trade&apos;, &apos;high&apos;], ascending=False)  #降序排列，主降序列为trade，次降序列为high</span><br></pre></td></tr></table></figure></p>
<p><a href="https://stackoverflow.com/questions/14247586/python-pandas-how-to-select-rows-with-one-or-more-nulls-from-a-dataframe-without" target="_blank" rel="noopener">https://stackoverflow.com/questions/14247586/python-pandas-how-to-select-rows-with-one-or-more-nulls-from-a-dataframe-without</a><br><a href="https://stackoverflow.com/questions/21202652/getting-all-rows-with-nan-value" target="_blank" rel="noopener">https://stackoverflow.com/questions/21202652/getting-all-rows-with-nan-value</a><br><a href="https://stackoverflow.com/questions/40245507/python-pandas-selecting-rows-whose-column-value-is-null-none-nan" target="_blank" rel="noopener">https://stackoverflow.com/questions/40245507/python-pandas-selecting-rows-whose-column-value-is-null-none-nan</a><br><a href="https://stackoverflow.com/questions/38368490/pandas-dataframe-select-the-specific-columns-with-nan-values" target="_blank" rel="noopener">https://stackoverflow.com/questions/38368490/pandas-dataframe-select-the-specific-columns-with-nan-values</a><br><a href="https://stackoverflow.com/questions/22551403/python-pandas-filtering-out-nan-from-a-data-selection-of-a-column-of-strings" target="_blank" rel="noopener">https://stackoverflow.com/questions/22551403/python-pandas-filtering-out-nan-from-a-data-selection-of-a-column-of-strings</a><br><a href="https://stackoverflow.com/questions/16017034/to-extract-non-nan-values-from-multiple-rows-in-a-pandas-dataframe" target="_blank" rel="noopener">https://stackoverflow.com/questions/16017034/to-extract-non-nan-values-from-multiple-rows-in-a-pandas-dataframe</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">basics_df[pandas.isnull(basics_df[&apos;area&apos;])] # 获取area列中值为空(numpy.nan)的行</span><br><span class="line">basics_df[pandas.isnull(basics_df).any(axis=1)] # 获取所有列中值为空(numpy.nan)的行</span><br><span class="line"></span><br><span class="line">basics_df[pandas.notnull(basics_df[&apos;area&apos;])] # 获取area列中值不为空的行</span><br><span class="line">new_df = basics_df.dropna() # 获取所有列中值不为空的行</span><br><span class="line"></span><br><span class="line">new_df = basics_df[basics_df.columns[:4]].dropna() # 获取前四列中值不为空的行</span><br></pre></td></tr></table></figure></p>
<h5 id="求每列最大值，最小值，和，平均值"><a href="#求每列最大值，最小值，和，平均值" class="headerlink" title="求每列最大值，最小值，和，平均值"></a>求每列最大值，最小值，和，平均值</h5><p><a href="http://www.cnblogs.com/wuzhiblog/p/python_new_row_or_col.html" target="_blank" rel="noopener">http://www.cnblogs.com/wuzhiblog/p/python_new_row_or_col.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">pandas.pdf P504</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; dir(price_today_df)</span><br><span class="line">[&apos;T&apos;, &apos;_AXIS_ALIASES&apos;, &apos;_AXIS_IALIASES&apos;, &apos;_AXIS_LEN&apos;, &apos;_AXIS_NAMES&apos;, &apos;_AXIS_NUMBERS&apos;, &apos;_AXIS_ORDERS&apos;, &apos;_AXIS_REVERSED&apos;, &apos;_AXIS_SLICEMAP&apos;, &apos;__abs__&apos;, &apos;__add__&apos;, &apos;__and__&apos;, &apos;__array__&apos;, &apos;__array_wrap__&apos;, &apos;__bool__&apos;, &apos;__bytes__&apos;, &apos;__class__&apos;, &apos;__contains__&apos;, &apos;__copy__&apos;, &apos;__deepcopy__&apos;, &apos;__delattr__&apos;, &apos;__delitem__&apos;, &apos;__dict__&apos;, &apos;__dir__&apos;, &apos;__div__&apos;, &apos;__doc__&apos;, &apos;__eq__&apos;, &apos;__finalize__&apos;, &apos;__floordiv__&apos;, &apos;__format__&apos;, &apos;__ge__&apos;, &apos;__getattr__&apos;, &apos;__getattribute__&apos;, &apos;__getitem__&apos;, &apos;__getstate__&apos;, &apos;__gt__&apos;, &apos;__hash__&apos;, &apos;__iadd__&apos;, &apos;__imul__&apos;, &apos;__init__&apos;, &apos;__init_subclass__&apos;, &apos;__invert__&apos;, &apos;__ipow__&apos;, &apos;__isub__&apos;, &apos;__iter__&apos;, &apos;__itruediv__&apos;, &apos;__le__&apos;, &apos;__len__&apos;, &apos;__lt__&apos;, &apos;__mod__&apos;, &apos;__module__&apos;, &apos;__mul__&apos;, &apos;__ne__&apos;, &apos;__neg__&apos;, &apos;__new__&apos;, &apos;__nonzero__&apos;, &apos;__or__&apos;, &apos;__pow__&apos;, &apos;__radd__&apos;, &apos;__rand__&apos;, &apos;__rdiv__&apos;, &apos;__reduce__&apos;, &apos;__reduce_ex__&apos;, &apos;__repr__&apos;, &apos;__rfloordiv__&apos;, &apos;__rmod__&apos;, &apos;__rmul__&apos;, &apos;__ror__&apos;, &apos;__round__&apos;, &apos;__rpow__&apos;, &apos;__rsub__&apos;, &apos;__rtruediv__&apos;, &apos;__rxor__&apos;, &apos;__setattr__&apos;, &apos;__setitem__&apos;, &apos;__setstate__&apos;, &apos;__sizeof__&apos;, &apos;__str__&apos;, &apos;__sub__&apos;, &apos;__subclasshook__&apos;, &apos;__truediv__&apos;, &apos;__unicode__&apos;, &apos;__weakref__&apos;, &apos;__xor__&apos;, &apos;_accessors&apos;, &apos;_add_numeric_operations&apos;, &apos;_add_series_only_operations&apos;, &apos;_add_series_or_dataframe_operations&apos;, &apos;_agg_by_level&apos;, &apos;_agg_doc&apos;, &apos;_aggregate&apos;, &apos;_aggregate_multiple_funcs&apos;, &apos;_align_frame&apos;, &apos;_align_series&apos;, &apos;_apply_broadcast&apos;, &apos;_apply_empty_result&apos;, &apos;_apply_raw&apos;, &apos;_apply_standard&apos;, &apos;_at&apos;, &apos;_box_col_values&apos;, &apos;_box_item_values&apos;, &apos;_builtin_table&apos;, &apos;_check_inplace_setting&apos;, &apos;_check_is_chained_assignment_possible&apos;, &apos;_check_percentile&apos;, &apos;_check_setitem_copy&apos;, &apos;_clear_item_cache&apos;, &apos;_combine_const&apos;, &apos;_combine_frame&apos;, &apos;_combine_match_columns&apos;, &apos;_combine_match_index&apos;, &apos;_combine_series&apos;, &apos;_combine_series_infer&apos;, &apos;_compare_frame&apos;, &apos;_compare_frame_evaluate&apos;, &apos;_consolidate&apos;, &apos;_consolidate_inplace&apos;, &apos;_construct_axes_dict&apos;, &apos;_construct_axes_dict_for_slice&apos;, &apos;_construct_axes_dict_from&apos;, &apos;_construct_axes_from_arguments&apos;, &apos;_constructor&apos;, &apos;_constructor_expanddim&apos;, &apos;_constructor_sliced&apos;, &apos;_convert&apos;, &apos;_count_level&apos;, &apos;_create_indexer&apos;, &apos;_cython_table&apos;, &apos;_dir_additions&apos;, &apos;_dir_deletions&apos;, &apos;_ensure_valid_index&apos;, &apos;_expand_axes&apos;, &apos;_flex_compare_frame&apos;, &apos;_from_arrays&apos;, &apos;_from_axes&apos;, &apos;_get_agg_axis&apos;, &apos;_get_axis&apos;, &apos;_get_axis_name&apos;, &apos;_get_axis_number&apos;, &apos;_get_axis_resolvers&apos;, &apos;_get_block_manager_axis&apos;, &apos;_get_bool_data&apos;, &apos;_get_cacher&apos;, &apos;_get_index_resolvers&apos;, &apos;_get_item_cache&apos;, &apos;_get_numeric_data&apos;, &apos;_get_values&apos;, &apos;_getitem_array&apos;, &apos;_getitem_column&apos;, &apos;_getitem_frame&apos;, &apos;_getitem_multilevel&apos;, &apos;_getitem_slice&apos;, &apos;_gotitem&apos;, &apos;_iat&apos;, &apos;_iget_item_cache&apos;, &apos;_iloc&apos;, &apos;_indexed_same&apos;, &apos;_info_axis&apos;, &apos;_info_axis_name&apos;, &apos;_info_axis_number&apos;, &apos;_info_repr&apos;, &apos;_init_dict&apos;, &apos;_init_mgr&apos;, &apos;_init_ndarray&apos;, &apos;_internal_names&apos;, &apos;_internal_names_set&apos;, &apos;_is_builtin_func&apos;, &apos;_is_cached&apos;, &apos;_is_cython_func&apos;, &apos;_is_datelike_mixed_type&apos;, &apos;_is_mixed_type&apos;, &apos;_is_numeric_mixed_type&apos;, &apos;_is_view&apos;, &apos;_ix&apos;, &apos;_ixs&apos;, &apos;_join_compat&apos;, &apos;_loc&apos;, &apos;_maybe_cache_changed&apos;, &apos;_maybe_update_cacher&apos;, &apos;_metadata&apos;, &apos;_needs_reindex_multi&apos;, &apos;_obj_with_exclusions&apos;, &apos;_protect_consolidate&apos;, &apos;_reduce&apos;, &apos;_reindex_axes&apos;, &apos;_reindex_axis&apos;, &apos;_reindex_columns&apos;, &apos;_reindex_index&apos;, &apos;_reindex_multi&apos;, &apos;_reindex_with_indexers&apos;, &apos;_repr_data_resource_&apos;, &apos;_repr_fits_horizontal_&apos;, &apos;_repr_fits_vertical_&apos;, &apos;_repr_html_&apos;, &apos;_repr_latex_&apos;, &apos;_reset_cache&apos;, &apos;_reset_cacher&apos;, &apos;_sanitize_column&apos;, &apos;_selected_obj&apos;, &apos;_selection&apos;, &apos;_selection_list&apos;, &apos;_selection_name&apos;, &apos;_series&apos;, &apos;_set_as_cached&apos;, &apos;_set_axis&apos;, &apos;_set_axis_name&apos;, &apos;_set_is_copy&apos;, &apos;_set_item&apos;, &apos;_setitem_array&apos;, &apos;_setitem_frame&apos;, &apos;_setitem_slice&apos;, &apos;_setup_axes&apos;, &apos;_shallow_copy&apos;, &apos;_slice&apos;, &apos;_stat_axis&apos;, &apos;_stat_axis_name&apos;, &apos;_stat_axis_number&apos;, &apos;_try_aggregate_string_function&apos;, &apos;_typ&apos;, &apos;_unpickle_frame_compat&apos;, &apos;_unpickle_matrix_compat&apos;, &apos;_update_inplace&apos;, &apos;_validate_dtype&apos;, &apos;_values&apos;, &apos;_where&apos;, &apos;_xs&apos;, &apos;abs&apos;, &apos;add&apos;, &apos;add_prefix&apos;, &apos;add_suffix&apos;, &apos;agg&apos;, &apos;aggregate&apos;, &apos;align&apos;, &apos;all&apos;, &apos;amount&apos;, &apos;any&apos;, &apos;append&apos;, &apos;apply&apos;, &apos;applymap&apos;, &apos;as_blocks&apos;, &apos;as_matrix&apos;, &apos;asfreq&apos;, &apos;asof&apos;, &apos;assign&apos;, &apos;astype&apos;, &apos;at&apos;, &apos;at_time&apos;, &apos;axes&apos;, &apos;between_time&apos;, &apos;bfill&apos;, &apos;blocks&apos;, &apos;bool&apos;, &apos;boxplot&apos;, &apos;changepercent&apos;, &apos;clip&apos;, &apos;clip_lower&apos;, &apos;clip_upper&apos;, &apos;code&apos;, &apos;columns&apos;, &apos;combine&apos;, &apos;combine_first&apos;, &apos;compound&apos;, &apos;consolidate&apos;, &apos;convert_objects&apos;, &apos;copy&apos;, &apos;corr&apos;, &apos;corrwith&apos;, &apos;count&apos;, &apos;cov&apos;, &apos;cummax&apos;, &apos;cummin&apos;, &apos;cumprod&apos;, &apos;cumsum&apos;, &apos;describe&apos;, &apos;diff&apos;, &apos;div&apos;, &apos;divide&apos;, &apos;dot&apos;, &apos;drop&apos;, &apos;drop_duplicates&apos;, &apos;dropna&apos;, &apos;dtypes&apos;, &apos;duplicated&apos;, &apos;empty&apos;, &apos;eq&apos;, &apos;equals&apos;, &apos;eval&apos;, &apos;ewm&apos;, &apos;expanding&apos;, &apos;ffill&apos;, &apos;fillna&apos;, &apos;filter&apos;, &apos;first&apos;, &apos;first_valid_index&apos;, &apos;floordiv&apos;, &apos;from_csv&apos;, &apos;from_dict&apos;, &apos;from_items&apos;, &apos;from_records&apos;, &apos;ftypes&apos;, &apos;ge&apos;, &apos;get&apos;, &apos;get_dtype_counts&apos;, &apos;get_ftype_counts&apos;, &apos;get_value&apos;, &apos;get_values&apos;, &apos;groupby&apos;, &apos;gt&apos;, &apos;head&apos;, &apos;high&apos;, &apos;hist&apos;, &apos;iat&apos;, &apos;idxmax&apos;, &apos;idxmin&apos;, &apos;iloc&apos;, &apos;index&apos;, &apos;info&apos;, &apos;insert&apos;, &apos;interpolate&apos;, &apos;is_copy&apos;, &apos;isin&apos;, &apos;isnull&apos;, &apos;items&apos;, &apos;iteritems&apos;, &apos;iterrows&apos;, &apos;itertuples&apos;, &apos;ix&apos;, &apos;join&apos;, &apos;keys&apos;, &apos;kurt&apos;, &apos;kurtosis&apos;, &apos;last&apos;, &apos;last_valid_index&apos;, &apos;le&apos;, &apos;loc&apos;, &apos;lookup&apos;, &apos;low&apos;, &apos;lt&apos;, &apos;mad&apos;, &apos;mask&apos;, &apos;max&apos;, &apos;mean&apos;, &apos;median&apos;, &apos;melt&apos;, &apos;memory_usage&apos;, &apos;merge&apos;, &apos;min&apos;, &apos;mktcap&apos;, &apos;mod&apos;, &apos;mode&apos;, &apos;mul&apos;, &apos;multiply&apos;, &apos;name&apos;, &apos;ndim&apos;, &apos;ne&apos;, &apos;nlargest&apos;, &apos;nmc&apos;, &apos;notnull&apos;, &apos;nsmallest&apos;, &apos;nunique&apos;, &apos;open&apos;, &apos;pb&apos;, &apos;pct_change&apos;, &apos;per&apos;, &apos;pipe&apos;, &apos;pivot&apos;, &apos;pivot_table&apos;, &apos;plot&apos;, &apos;pop&apos;, &apos;pow&apos;, &apos;prod&apos;, &apos;product&apos;, &apos;quantile&apos;, &apos;query&apos;, &apos;radd&apos;, &apos;rank&apos;, &apos;rdiv&apos;, &apos;reindex&apos;, &apos;reindex_axis&apos;, &apos;reindex_like&apos;, &apos;rename&apos;, &apos;rename_axis&apos;, &apos;reorder_levels&apos;, &apos;replace&apos;, &apos;resample&apos;, &apos;reset_index&apos;, &apos;rfloordiv&apos;, &apos;rmod&apos;, &apos;rmul&apos;, &apos;rolling&apos;, &apos;round&apos;, &apos;rpow&apos;, &apos;rsub&apos;, &apos;rtruediv&apos;, &apos;sample&apos;, &apos;select&apos;, &apos;select_dtypes&apos;, &apos;sem&apos;, &apos;set_axis&apos;, &apos;set_index&apos;, &apos;set_value&apos;, &apos;settlement&apos;, &apos;shape&apos;, &apos;shift&apos;, &apos;size&apos;, &apos;skew&apos;, &apos;slice_shift&apos;, &apos;sort_index&apos;, &apos;sort_values&apos;, &apos;sortlevel&apos;, &apos;squeeze&apos;, &apos;stack&apos;, &apos;std&apos;, &apos;style&apos;, &apos;sub&apos;, &apos;subtract&apos;, &apos;sum&apos;, &apos;swapaxes&apos;, &apos;swaplevel&apos;, &apos;tail&apos;, &apos;take&apos;, &apos;to_clipboard&apos;, &apos;to_csv&apos;, &apos;to_dense&apos;, &apos;to_dict&apos;, &apos;to_excel&apos;, &apos;to_feather&apos;, &apos;to_gbq&apos;, &apos;to_hdf&apos;, &apos;to_html&apos;, &apos;to_json&apos;, &apos;to_latex&apos;, &apos;to_msgpack&apos;, &apos;to_panel&apos;, &apos;to_period&apos;, &apos;to_pickle&apos;, &apos;to_records&apos;, &apos;to_sparse&apos;, &apos;to_sql&apos;, &apos;to_stata&apos;, &apos;to_string&apos;, &apos;to_timestamp&apos;, &apos;to_xarray&apos;, &apos;trade&apos;, &apos;transform&apos;, &apos;transpose&apos;, &apos;truediv&apos;, &apos;truncate&apos;, &apos;tshift&apos;, &apos;turnoverratio&apos;, &apos;tz_convert&apos;, &apos;tz_localize&apos;, &apos;unstack&apos;, &apos;update&apos;, &apos;values&apos;, &apos;var&apos;, &apos;volume&apos;, &apos;where&apos;, &apos;xs&apos;]</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; dir(pandas.Series)</span><br><span class="line">[&apos;T&apos;, &apos;_AXIS_ALIASES&apos;, &apos;_AXIS_IALIASES&apos;, &apos;_AXIS_LEN&apos;, &apos;_AXIS_NAMES&apos;, &apos;_AXIS_NUMBERS&apos;, &apos;_AXIS_ORDERS&apos;, &apos;_AXIS_REVERSED&apos;, &apos;_AXIS_SLICEMAP&apos;, &apos;__abs__&apos;, &apos;__add__&apos;, &apos;__and__&apos;, &apos;__array__&apos;, &apos;__array_prepare__&apos;, &apos;__array_priority__&apos;, &apos;__array_wrap__&apos;, &apos;__bool__&apos;, &apos;__bytes__&apos;, &apos;__class__&apos;, &apos;__contains__&apos;, &apos;__copy__&apos;, &apos;__deepcopy__&apos;, &apos;__delattr__&apos;, &apos;__delitem__&apos;, &apos;__dict__&apos;, &apos;__dir__&apos;, &apos;__div__&apos;, &apos;__divmod__&apos;, &apos;__doc__&apos;, &apos;__eq__&apos;, &apos;__finalize__&apos;, &apos;__float__&apos;, &apos;__floordiv__&apos;, &apos;__format__&apos;, &apos;__ge__&apos;, &apos;__getattr__&apos;, &apos;__getattribute__&apos;, &apos;__getitem__&apos;, &apos;__getstate__&apos;, &apos;__gt__&apos;, &apos;__hash__&apos;, &apos;__iadd__&apos;, &apos;__imul__&apos;, &apos;__init__&apos;, &apos;__init_subclass__&apos;, &apos;__int__&apos;, &apos;__invert__&apos;, &apos;__ipow__&apos;, &apos;__isub__&apos;, &apos;__iter__&apos;, &apos;__itruediv__&apos;, &apos;__le__&apos;, &apos;__len__&apos;, &apos;__long__&apos;, &apos;__lt__&apos;, &apos;__mod__&apos;, &apos;__module__&apos;, &apos;__mul__&apos;, &apos;__ne__&apos;, &apos;__neg__&apos;, &apos;__new__&apos;, &apos;__nonzero__&apos;, &apos;__or__&apos;, &apos;__pow__&apos;, &apos;__radd__&apos;, &apos;__rand__&apos;, &apos;__rdiv__&apos;, &apos;__reduce__&apos;, &apos;__reduce_ex__&apos;, &apos;__repr__&apos;, &apos;__rfloordiv__&apos;, &apos;__rmod__&apos;, &apos;__rmul__&apos;, &apos;__ror__&apos;, &apos;__round__&apos;, &apos;__rpow__&apos;, &apos;__rsub__&apos;, &apos;__rtruediv__&apos;, &apos;__rxor__&apos;, &apos;__setattr__&apos;, &apos;__setitem__&apos;, &apos;__setstate__&apos;, &apos;__sizeof__&apos;, &apos;__str__&apos;, &apos;__sub__&apos;, &apos;__subclasshook__&apos;, &apos;__truediv__&apos;, &apos;__unicode__&apos;, &apos;__weakref__&apos;, &apos;__xor__&apos;, &apos;_accessors&apos;, &apos;_add_numeric_operations&apos;, &apos;_add_series_only_operations&apos;, &apos;_add_series_or_dataframe_operations&apos;, &apos;_agg_by_level&apos;, &apos;_agg_doc&apos;, &apos;_aggregate&apos;, &apos;_aggregate_multiple_funcs&apos;, &apos;_align_frame&apos;, &apos;_align_series&apos;, &apos;_allow_index_ops&apos;, &apos;_at&apos;, &apos;_binop&apos;, &apos;_box_item_values&apos;, &apos;_builtin_table&apos;, &apos;_can_hold_na&apos;, &apos;_check_inplace_setting&apos;, &apos;_check_is_chained_assignment_possible&apos;, &apos;_check_percentile&apos;, &apos;_check_setitem_copy&apos;, &apos;_clear_item_cache&apos;, &apos;_consolidate&apos;, &apos;_consolidate_inplace&apos;, &apos;_construct_axes_dict&apos;, &apos;_construct_axes_dict_for_slice&apos;, &apos;_construct_axes_dict_from&apos;, &apos;_construct_axes_from_arguments&apos;, &apos;_constructor&apos;, &apos;_constructor_expanddim&apos;, &apos;_constructor_sliced&apos;, &apos;_convert&apos;, &apos;_create_indexer&apos;, &apos;_cython_table&apos;, &apos;_dir_additions&apos;, &apos;_dir_deletions&apos;, &apos;_expand_axes&apos;, &apos;_from_axes&apos;, &apos;_get_axis&apos;, &apos;_get_axis_name&apos;, &apos;_get_axis_number&apos;, &apos;_get_axis_resolvers&apos;, &apos;_get_block_manager_axis&apos;, &apos;_get_bool_data&apos;, &apos;_get_cacher&apos;, &apos;_get_index_resolvers&apos;, &apos;_get_item_cache&apos;, &apos;_get_numeric_data&apos;, &apos;_get_values&apos;, &apos;_get_values_tuple&apos;, &apos;_get_with&apos;, &apos;_gotitem&apos;, &apos;_iat&apos;, &apos;_iget_item_cache&apos;, &apos;_iloc&apos;, &apos;_index&apos;, &apos;_indexed_same&apos;, &apos;_info_axis&apos;, &apos;_info_axis_name&apos;, &apos;_info_axis_number&apos;, &apos;_init_mgr&apos;, &apos;_internal_names&apos;, &apos;_internal_names_set&apos;, &apos;_is_builtin_func&apos;, &apos;_is_cached&apos;, &apos;_is_cython_func&apos;, &apos;_is_datelike_mixed_type&apos;, &apos;_is_mixed_type&apos;, &apos;_is_numeric_mixed_type&apos;, &apos;_is_view&apos;, &apos;_ix&apos;, &apos;_ixs&apos;, &apos;_loc&apos;, &apos;_make_cat_accessor&apos;, &apos;_make_dt_accessor&apos;, &apos;_make_str_accessor&apos;, &apos;_maybe_cache_changed&apos;, &apos;_maybe_update_cacher&apos;, &apos;_metadata&apos;, &apos;_needs_reindex_multi&apos;, &apos;_obj_with_exclusions&apos;, &apos;_protect_consolidate&apos;, &apos;_reduce&apos;, &apos;_reindex_axes&apos;, &apos;_reindex_axis&apos;, &apos;_reindex_indexer&apos;, &apos;_reindex_multi&apos;, &apos;_reindex_with_indexers&apos;, &apos;_repr_data_resource_&apos;, &apos;_reset_cache&apos;, &apos;_reset_cacher&apos;, &apos;_selected_obj&apos;, &apos;_selection&apos;, &apos;_selection_list&apos;, &apos;_selection_name&apos;, &apos;_set_as_cached&apos;, &apos;_set_axis&apos;, &apos;_set_axis_name&apos;, &apos;_set_is_copy&apos;, &apos;_set_item&apos;, &apos;_set_labels&apos;, &apos;_set_name&apos;, &apos;_set_subtyp&apos;, &apos;_set_values&apos;, &apos;_set_with&apos;, &apos;_set_with_engine&apos;, &apos;_setup_axes&apos;, &apos;_shallow_copy&apos;, &apos;_slice&apos;, &apos;_stat_axis&apos;, &apos;_stat_axis_name&apos;, &apos;_stat_axis_number&apos;, &apos;_try_aggregate_string_function&apos;, &apos;_typ&apos;, &apos;_unpickle_series_compat&apos;, &apos;_update_inplace&apos;, &apos;_validate_dtype&apos;, &apos;_values&apos;, &apos;_where&apos;, &apos;_xs&apos;, &apos;abs&apos;, &apos;add&apos;, &apos;add_prefix&apos;, &apos;add_suffix&apos;, &apos;agg&apos;, &apos;aggregate&apos;, &apos;align&apos;, &apos;all&apos;, &apos;any&apos;, &apos;append&apos;, &apos;apply&apos;, &apos;argmax&apos;, &apos;argmin&apos;, &apos;argsort&apos;, &apos;as_blocks&apos;, &apos;as_matrix&apos;, &apos;asfreq&apos;, &apos;asobject&apos;, &apos;asof&apos;, &apos;astype&apos;, &apos;at&apos;, &apos;at_time&apos;, &apos;autocorr&apos;, &apos;axes&apos;, &apos;base&apos;, &apos;between&apos;, &apos;between_time&apos;, &apos;bfill&apos;, &apos;blocks&apos;, &apos;bool&apos;, &apos;cat&apos;, &apos;clip&apos;, &apos;clip_lower&apos;, &apos;clip_upper&apos;, &apos;combine&apos;, &apos;combine_first&apos;, &apos;compound&apos;, &apos;compress&apos;, &apos;consolidate&apos;, &apos;convert_objects&apos;, &apos;copy&apos;, &apos;corr&apos;, &apos;count&apos;, &apos;cov&apos;, &apos;cummax&apos;, &apos;cummin&apos;, &apos;cumprod&apos;, &apos;cumsum&apos;, &apos;data&apos;, &apos;describe&apos;, &apos;diff&apos;, &apos;div&apos;, &apos;divide&apos;, &apos;dot&apos;, &apos;drop&apos;, &apos;drop_duplicates&apos;, &apos;dropna&apos;, &apos;dt&apos;, &apos;dtype&apos;, &apos;dtypes&apos;, &apos;duplicated&apos;, &apos;empty&apos;, &apos;eq&apos;, &apos;equals&apos;, &apos;ewm&apos;, &apos;expanding&apos;, &apos;factorize&apos;, &apos;ffill&apos;, &apos;fillna&apos;, &apos;filter&apos;, &apos;first&apos;, &apos;first_valid_index&apos;, &apos;flags&apos;, &apos;floordiv&apos;, &apos;from_array&apos;, &apos;from_csv&apos;, &apos;ftype&apos;, &apos;ftypes&apos;, &apos;ge&apos;, &apos;get&apos;, &apos;get_dtype_counts&apos;, &apos;get_ftype_counts&apos;, &apos;get_value&apos;, &apos;get_values&apos;, &apos;groupby&apos;, &apos;gt&apos;, &apos;hasnans&apos;, &apos;head&apos;, &apos;hist&apos;, &apos;iat&apos;, &apos;idxmax&apos;, &apos;idxmin&apos;, &apos;iloc&apos;, &apos;imag&apos;, &apos;index&apos;, &apos;interpolate&apos;, &apos;is_copy&apos;, &apos;is_monotonic&apos;, &apos;is_monotonic_decreasing&apos;, &apos;is_monotonic_increasing&apos;, &apos;is_unique&apos;, &apos;isin&apos;, &apos;isnull&apos;, &apos;item&apos;, &apos;items&apos;, &apos;itemsize&apos;, &apos;iteritems&apos;, &apos;ix&apos;, &apos;keys&apos;, &apos;kurt&apos;, &apos;kurtosis&apos;, &apos;last&apos;, &apos;last_valid_index&apos;, &apos;le&apos;, &apos;loc&apos;, &apos;lt&apos;, &apos;mad&apos;, &apos;map&apos;, &apos;mask&apos;, &apos;max&apos;, &apos;mean&apos;, &apos;median&apos;, &apos;memory_usage&apos;, &apos;min&apos;, &apos;mod&apos;, &apos;mode&apos;, &apos;mul&apos;, &apos;multiply&apos;, &apos;name&apos;, &apos;nbytes&apos;, &apos;ndim&apos;, &apos;ne&apos;, &apos;nlargest&apos;, &apos;nonzero&apos;, &apos;notnull&apos;, &apos;nsmallest&apos;, &apos;nunique&apos;, &apos;pct_change&apos;, &apos;pipe&apos;, &apos;plot&apos;, &apos;pop&apos;, &apos;pow&apos;, &apos;prod&apos;, &apos;product&apos;, &apos;ptp&apos;, &apos;put&apos;, &apos;quantile&apos;, &apos;radd&apos;, &apos;rank&apos;, &apos;ravel&apos;, &apos;rdiv&apos;, &apos;real&apos;, &apos;reindex&apos;, &apos;reindex_axis&apos;, &apos;reindex_like&apos;, &apos;rename&apos;, &apos;rename_axis&apos;, &apos;reorder_levels&apos;, &apos;repeat&apos;, &apos;replace&apos;, &apos;resample&apos;, &apos;reset_index&apos;, &apos;reshape&apos;, &apos;rfloordiv&apos;, &apos;rmod&apos;, &apos;rmul&apos;, &apos;rolling&apos;, &apos;round&apos;, &apos;rpow&apos;, &apos;rsub&apos;, &apos;rtruediv&apos;, &apos;sample&apos;, &apos;searchsorted&apos;, &apos;select&apos;, &apos;sem&apos;, &apos;set_axis&apos;, &apos;set_value&apos;, &apos;shape&apos;, &apos;shift&apos;, &apos;size&apos;, &apos;skew&apos;, &apos;slice_shift&apos;, &apos;sort_index&apos;, &apos;sort_values&apos;, &apos;sortlevel&apos;, &apos;squeeze&apos;, &apos;std&apos;, &apos;str&apos;, &apos;strides&apos;, &apos;sub&apos;, &apos;subtract&apos;, &apos;sum&apos;, &apos;swapaxes&apos;, &apos;swaplevel&apos;, &apos;tail&apos;, &apos;take&apos;, &apos;to_clipboard&apos;, &apos;to_csv&apos;, &apos;to_dense&apos;, &apos;to_dict&apos;, &apos;to_excel&apos;, &apos;to_frame&apos;, &apos;to_hdf&apos;, &apos;to_json&apos;, &apos;to_msgpack&apos;, &apos;to_period&apos;, &apos;to_pickle&apos;, &apos;to_sparse&apos;, &apos;to_sql&apos;, &apos;to_string&apos;, &apos;to_timestamp&apos;, &apos;to_xarray&apos;, &apos;tolist&apos;, &apos;transform&apos;, &apos;transpose&apos;, &apos;truediv&apos;, &apos;truncate&apos;, &apos;tshift&apos;, &apos;tz_convert&apos;, &apos;tz_localize&apos;, &apos;unique&apos;, &apos;unstack&apos;, &apos;update&apos;, &apos;valid&apos;, &apos;value_counts&apos;, &apos;values&apos;, &apos;var&apos;, &apos;view&apos;, &apos;where&apos;, &apos;xs&apos;]</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; price_today_df[&apos;open&apos;].min()</span><br><span class="line">2.2999999999999998</span><br><span class="line">&gt;&gt;&gt; price_today_df[&apos;open&apos;].max()</span><br><span class="line">44.899999999999999</span><br><span class="line">&gt;&gt;&gt; price_today_df[&apos;open&apos;].sum()</span><br><span class="line">908.0200000000001</span><br><span class="line">&gt;&gt;&gt; price_today_df[&apos;open&apos;].mean()  # 平均值</span><br><span class="line">12.106933333333334</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">decribe方法可以计算各个列的基本描述统计值。包含计数，平均数，标准差，最大值，最小值及4分位差。</span><br><span class="line">&gt;&gt;&gt; price_today_df.describe()</span><br><span class="line">       changepercent      trade       open       high        low  settlement  \</span><br><span class="line">count      75.000000  75.000000  75.000000  75.000000  75.000000   75.000000</span><br><span class="line">mean       -0.145907  12.080800  12.106933  12.197200  11.999200   12.116667</span><br><span class="line">std         1.045732   8.322333   8.365313   8.419518   8.254416    8.386995</span><br><span class="line">min        -4.398000   2.310000   2.300000   2.330000   2.290000    2.300000</span><br><span class="line">25%        -0.515000   6.700000   6.720000   6.755000   6.695000    6.720000</span><br><span class="line">50%        -0.180000   9.700000   9.690000   9.760000   9.610000    9.680000</span><br><span class="line">75%         0.285000  14.830000  15.145000  15.170000  14.810000   15.135000</span><br><span class="line">max         3.141000  45.220000  44.900000  45.450000  44.540000   44.970000</span><br><span class="line"></span><br><span class="line">             volume  turnoverratio        amount          per         pb  \</span><br><span class="line">count  7.500000e+01      75.000000  7.500000e+01    75.000000  75.000000</span><br><span class="line">mean   1.600905e+07       0.320844  1.488266e+08   104.235147   2.710467</span><br><span class="line">std    3.957963e+07       0.275348  3.324918e+08   288.945301   9.484397</span><br><span class="line">min    2.493000e+05       0.029590  4.033473e+06  -199.625000   0.000000</span><br><span class="line">25%    1.375174e+06       0.141150  1.267183e+07    12.444500   0.000000</span><br><span class="line">50%    3.410731e+06       0.205090  2.308137e+07    22.996000   1.403000</span><br><span class="line">75%    9.177329e+06       0.475250  1.029047e+08    47.775500   2.500000</span><br><span class="line">max    2.798431e+08       1.320230  2.179901e+09  1512.308000  81.917000</span><br><span class="line"></span><br><span class="line">             mktcap           nmc</span><br><span class="line">count  7.500000e+01  7.500000e+01</span><br><span class="line">mean   5.594753e+06  4.700628e+06</span><br><span class="line">std    1.217174e+07  9.934420e+06</span><br><span class="line">min    2.554133e+05  2.251359e+05</span><br><span class="line">25%    8.680703e+05  6.782128e+05</span><br><span class="line">50%    1.441800e+06  1.325663e+06</span><br><span class="line">75%    4.347619e+06  3.365268e+06</span><br><span class="line">max    7.336915e+07  5.790801e+07</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http://www.cnblogs.com/wuzhiblog/p/python_new_row_or_col.html</span><br><span class="line">导入模块：</span><br><span class="line"></span><br><span class="line">from pandas import DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">生成DataFrame数据</span><br><span class="line"></span><br><span class="line">df = DataFrame(np.random.randn(4, 5), columns=[&apos;A&apos;, &apos;B&apos;, &apos;C&apos;, &apos;D&apos;, &apos;E&apos;])</span><br><span class="line"></span><br><span class="line">DataFrame数据预览：</span><br><span class="line"></span><br><span class="line">          A         B         C         D         E</span><br><span class="line">0  0.673092  0.230338 -0.171681  0.312303 -0.184813</span><br><span class="line">1 -0.504482 -0.344286 -0.050845 -0.811277 -0.298181</span><br><span class="line">2  0.542788  0.207708  0.651379 -0.656214  0.507595</span><br><span class="line">3 -0.249410  0.131549 -2.198480 -0.437407  1.628228</span><br><span class="line"></span><br><span class="line">计算各列数据总和并作为新列添加到末尾</span><br><span class="line"></span><br><span class="line">df[&apos;Col_sum&apos;] = df.apply(lambda x: x.sum(), axis=1)</span><br><span class="line"></span><br><span class="line">计算各行数据总和并作为新行添加到末尾</span><br><span class="line"></span><br><span class="line">df.loc[&apos;Row_sum&apos;] = df.apply(lambda x: x.sum())</span><br><span class="line"></span><br><span class="line">最终数据结果：</span><br><span class="line"></span><br><span class="line">                A         B         C         D         E   Col_sum</span><br><span class="line">0        0.673092  0.230338 -0.171681  0.312303 -0.184813  0.859238</span><br><span class="line">1       -0.504482 -0.344286 -0.050845 -0.811277 -0.298181 -2.009071</span><br><span class="line">2        0.542788  0.207708  0.651379 -0.656214  0.507595  1.253256</span><br><span class="line">3       -0.249410  0.131549 -2.198480 -0.437407  1.628228 -1.125520</span><br><span class="line">Row_sum  0.461987  0.225310 -1.769627 -1.592595  1.652828 -1.022097</span><br></pre></td></tr></table></figure></p>
<p>判断某列是否有空值<br><a href="https://stackoverflow.com/questions/29530232/how-to-check-if-any-value-is-nan-in-a-pandas-dataframe" target="_blank" rel="noopener">https://stackoverflow.com/questions/29530232/how-to-check-if-any-value-is-nan-in-a-pandas-dataframe</a><br><a href="https://blog.csdn.net/cc_jjj/article/details/78879839" target="_blank" rel="noopener">https://blog.csdn.net/cc_jjj/article/details/78879839</a><br><a href="https://blog.csdn.net/Guo_ya_nan/article/details/81013510" target="_blank" rel="noopener">https://blog.csdn.net/Guo_ya_nan/article/details/81013510</a><br>9.4.4 Boolean Reductions(pandas.v0.23.4.pdf, P596)<br>You can apply the reductions: empty, any(), all(), and bool() to provide a way to summarize a boolean result.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">import tushare as ts</span><br><span class="line">import pandas</span><br><span class="line"></span><br><span class="line">k_df = ts.get_k_data(&apos;600000&apos;)</span><br><span class="line">k_df = k_df.tail(10)</span><br><span class="line"></span><br><span class="line">k_df_column = list(k_df)</span><br><span class="line">k_df_column.insert(0, k_df_column.pop(k_df_column.index(k_df.columns[-1])))  # 把最后一行弹出插入第一行</span><br><span class="line">k_df = k_df[k_df_column]</span><br><span class="line"></span><br><span class="line">k_df[&apos;price_change&apos;] = k_df[&apos;close&apos;].diff()</span><br><span class="line">k_df[&apos;p_change&apos;] = k_df[&apos;close&apos;].pct_change() * 100</span><br><span class="line"></span><br><span class="line">print(k_df)</span><br><span class="line"></span><br><span class="line">ma_list = [5, 10, 20, 60, 250]</span><br><span class="line"></span><br><span class="line"># 移动平均数</span><br><span class="line">for ma in ma_list:</span><br><span class="line">    k_df[&apos;ma&apos; + str(ma)] = k_df[&apos;close&apos;].rolling(ma).mean()</span><br><span class="line"></span><br><span class="line"># 移动平均数</span><br><span class="line">for ma in ma_list:</span><br><span class="line">    k_df[&apos;v_ma&apos; + str(ma)] = k_df[&apos;volume&apos;].rolling(ma).mean()</span><br><span class="line">print(k_df)</span><br><span class="line"></span><br><span class="line"># 判断是否有空值的行</span><br><span class="line"># print(pandas.isnull(k_df))</span><br><span class="line"># print(k_df.isna())</span><br><span class="line"># print(k_df[k_df.isnull().values==True])</span><br><span class="line">print(k_df[&apos;code&apos;].notnull().all())</span><br><span class="line">print(k_df.isna().any())</span><br><span class="line">print(k_df.isna().any().any())</span><br><span class="line">print(k_df.isnull().any().any())</span><br><span class="line">print(k_df.isnull().sum().any())</span><br><span class="line">print(k_df.isnull().any().sum())  # 空行的数目</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">       code        date   open  close   high    low    volume  price_change  \</span><br><span class="line">631  600000  2018-11-28  10.56  10.58  10.62  10.50  183396.0           NaN   </span><br><span class="line">632  600000  2018-11-29  10.64  10.63  10.75  10.54  206856.0          0.05   </span><br><span class="line">633  600000  2018-11-30  10.65  10.71  10.75  10.62  285726.0          0.08   </span><br><span class="line">634  600000  2018-12-03  10.99  11.02  11.05  10.84  430490.0          0.31   </span><br><span class="line">635  600000  2018-12-04  11.00  11.08  11.08  10.97  208112.0          0.06   </span><br><span class="line">636  600000  2018-12-05  10.99  11.00  11.10  10.96  254912.0         -0.08   </span><br><span class="line">637  600000  2018-12-06  10.82  10.90  10.93  10.82  235979.0         -0.10   </span><br><span class="line">638  600000  2018-12-07  10.94  10.89  11.03  10.88  105805.0         -0.01   </span><br><span class="line">639  600000  2018-12-10  10.77  10.83  10.90  10.77  159275.0         -0.06   </span><br><span class="line">640  600000  2018-12-11  10.84  10.73  10.90  10.69  153033.0         -0.10   </span><br><span class="line"></span><br><span class="line">     p_change  </span><br><span class="line">631       NaN  </span><br><span class="line">632  0.472590  </span><br><span class="line">633  0.752587  </span><br><span class="line">634  2.894491  </span><br><span class="line">635  0.544465  </span><br><span class="line">636 -0.722022  </span><br><span class="line">637 -0.909091  </span><br><span class="line">638 -0.091743  </span><br><span class="line">639 -0.550964  </span><br><span class="line">640 -0.923361  </span><br><span class="line">       code        date   open  close   high    low    volume  price_change  \</span><br><span class="line">631  600000  2018-11-28  10.56  10.58  10.62  10.50  183396.0           NaN   </span><br><span class="line">632  600000  2018-11-29  10.64  10.63  10.75  10.54  206856.0          0.05   </span><br><span class="line">633  600000  2018-11-30  10.65  10.71  10.75  10.62  285726.0          0.08   </span><br><span class="line">634  600000  2018-12-03  10.99  11.02  11.05  10.84  430490.0          0.31   </span><br><span class="line">635  600000  2018-12-04  11.00  11.08  11.08  10.97  208112.0          0.06   </span><br><span class="line">636  600000  2018-12-05  10.99  11.00  11.10  10.96  254912.0         -0.08   </span><br><span class="line">637  600000  2018-12-06  10.82  10.90  10.93  10.82  235979.0         -0.10   </span><br><span class="line">638  600000  2018-12-07  10.94  10.89  11.03  10.88  105805.0         -0.01   </span><br><span class="line">639  600000  2018-12-10  10.77  10.83  10.90  10.77  159275.0         -0.06   </span><br><span class="line">640  600000  2018-12-11  10.84  10.73  10.90  10.69  153033.0         -0.10   </span><br><span class="line"></span><br><span class="line">     p_change     ma5    ma10  ma20  ma60  ma250     v_ma5    v_ma10  v_ma20  \</span><br><span class="line">631       NaN     NaN     NaN   NaN   NaN    NaN       NaN       NaN     NaN   </span><br><span class="line">632  0.472590     NaN     NaN   NaN   NaN    NaN       NaN       NaN     NaN   </span><br><span class="line">633  0.752587     NaN     NaN   NaN   NaN    NaN       NaN       NaN     NaN   </span><br><span class="line">634  2.894491     NaN     NaN   NaN   NaN    NaN       NaN       NaN     NaN   </span><br><span class="line">635  0.544465  10.804     NaN   NaN   NaN    NaN  262916.0       NaN     NaN   </span><br><span class="line">636 -0.722022  10.888     NaN   NaN   NaN    NaN  277219.2       NaN     NaN   </span><br><span class="line">637 -0.909091  10.942     NaN   NaN   NaN    NaN  283043.8       NaN     NaN   </span><br><span class="line">638 -0.091743  10.978     NaN   NaN   NaN    NaN  247059.6       NaN     NaN   </span><br><span class="line">639 -0.550964  10.940     NaN   NaN   NaN    NaN  192816.6       NaN     NaN   </span><br><span class="line">640 -0.923361  10.870  10.837   NaN   NaN    NaN  181800.8  222358.4     NaN   </span><br><span class="line"></span><br><span class="line">     v_ma60  v_ma250  </span><br><span class="line">631     NaN      NaN  </span><br><span class="line">632     NaN      NaN  </span><br><span class="line">633     NaN      NaN  </span><br><span class="line">634     NaN      NaN  </span><br><span class="line">635     NaN      NaN  </span><br><span class="line">636     NaN      NaN  </span><br><span class="line">637     NaN      NaN  </span><br><span class="line">638     NaN      NaN  </span><br><span class="line">639     NaN      NaN  </span><br><span class="line">640     NaN      NaN  </span><br><span class="line">True</span><br><span class="line">code            False</span><br><span class="line">date            False</span><br><span class="line">open            False</span><br><span class="line">close           False</span><br><span class="line">high            False</span><br><span class="line">low             False</span><br><span class="line">volume          False</span><br><span class="line">price_change     True</span><br><span class="line">p_change         True</span><br><span class="line">ma5              True</span><br><span class="line">ma10             True</span><br><span class="line">ma20             True</span><br><span class="line">ma60             True</span><br><span class="line">ma250            True</span><br><span class="line">v_ma5            True</span><br><span class="line">v_ma10           True</span><br><span class="line">v_ma20           True</span><br><span class="line">v_ma60           True</span><br><span class="line">v_ma250          True</span><br><span class="line">dtype: bool</span><br><span class="line">True</span><br><span class="line">True</span><br><span class="line">True</span><br><span class="line">12</span><br></pre></td></tr></table></figure></p>
<h5 id="空值填充"><a href="#空值填充" class="headerlink" title="空值填充"></a>空值填充</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line">df.dropna()  # 删除含有空值的行或列</span><br><span class="line">df.fillna()  # 填充空值</span><br><span class="line"></span><br><span class="line">15.5.1 Filling missing values: fillna (pandas.v0.23.4.pdf. P817)</span><br><span class="line">To remind you, these are the available filling methods:</span><br><span class="line">Method                                                Action</span><br><span class="line">pad / ffill                                           Fill values forward</span><br><span class="line">bfill / backfill                                      Fill values backward</span><br><span class="line">With time series data, using pad/ffill is extremely common so that the “last known value” is available at every time point.</span><br><span class="line">ffill() is equivalent to fillna(method=&apos;ffill&apos;) and bfill() is equivalent to fillna(method=&apos;bfill&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import tushare as ts</span><br><span class="line">import pandas</span><br><span class="line"></span><br><span class="line">k_df = ts.get_k_data(&apos;600000&apos;)</span><br><span class="line"></span><br><span class="line">k_df = k_df.tail(10)</span><br><span class="line"></span><br><span class="line">k_df_column = list(k_df)</span><br><span class="line">k_df_column.insert(0, k_df_column.pop(k_df_column.index(k_df.columns[-1])))  # 把最后一行弹出插入第一行</span><br><span class="line">k_df = k_df[k_df_column]</span><br><span class="line"></span><br><span class="line">k_df[&apos;price_change&apos;] = k_df[&apos;close&apos;].diff()</span><br><span class="line">k_df[&apos;p_change&apos;] = k_df[&apos;close&apos;].pct_change() * 100</span><br><span class="line"></span><br><span class="line">print(k_df)</span><br><span class="line"></span><br><span class="line">ma_list = [5, 10, 20, 60, 250]</span><br><span class="line"></span><br><span class="line">for ma in ma_list:</span><br><span class="line">    k_df[&apos;ma&apos; + str(ma)] = k_df[&apos;close&apos;].rolling(ma).mean()</span><br><span class="line"></span><br><span class="line">for ma in ma_list:</span><br><span class="line">    k_df[&apos;v_ma&apos; + str(ma)] = k_df[&apos;volume&apos;].rolling(ma).mean()</span><br><span class="line"></span><br><span class="line">print(k_df)</span><br><span class="line"></span><br><span class="line"># 后值填充(往前填充)</span><br><span class="line">k_df = k_df.fillna(method=&apos;bfill&apos;)</span><br><span class="line"></span><br><span class="line">print(k_df)</span><br><span class="line"></span><br><span class="line"># 如果一列都是nan值，后值或者前值填充都是nan值，所以需要默认填充为0</span><br><span class="line">k_df = k_df.fillna(0)</span><br><span class="line"></span><br><span class="line">print(k_df)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">       code        date   open  close   high    low    volume  price_change  \</span><br><span class="line">631  600000  2018-11-28  10.56  10.58  10.62  10.50  183396.0           NaN   </span><br><span class="line">632  600000  2018-11-29  10.64  10.63  10.75  10.54  206856.0          0.05   </span><br><span class="line">633  600000  2018-11-30  10.65  10.71  10.75  10.62  285726.0          0.08   </span><br><span class="line">634  600000  2018-12-03  10.99  11.02  11.05  10.84  430490.0          0.31   </span><br><span class="line">635  600000  2018-12-04  11.00  11.08  11.08  10.97  208112.0          0.06   </span><br><span class="line">636  600000  2018-12-05  10.99  11.00  11.10  10.96  254912.0         -0.08   </span><br><span class="line">637  600000  2018-12-06  10.82  10.90  10.93  10.82  235979.0         -0.10   </span><br><span class="line">638  600000  2018-12-07  10.94  10.89  11.03  10.88  105805.0         -0.01   </span><br><span class="line">639  600000  2018-12-10  10.77  10.83  10.90  10.77  159275.0         -0.06   </span><br><span class="line">640  600000  2018-12-11  10.84  10.72  10.90  10.69  172342.0         -0.11   </span><br><span class="line"></span><br><span class="line">     p_change  </span><br><span class="line">631       NaN  </span><br><span class="line">632  0.472590  </span><br><span class="line">633  0.752587  </span><br><span class="line">634  2.894491  </span><br><span class="line">635  0.544465  </span><br><span class="line">636 -0.722022  </span><br><span class="line">637 -0.909091  </span><br><span class="line">638 -0.091743  </span><br><span class="line">639 -0.550964  </span><br><span class="line">640 -1.015697  </span><br><span class="line">       code        date   open  close   high    low    volume  price_change  \</span><br><span class="line">631  600000  2018-11-28  10.56  10.58  10.62  10.50  183396.0           NaN   </span><br><span class="line">632  600000  2018-11-29  10.64  10.63  10.75  10.54  206856.0          0.05   </span><br><span class="line">633  600000  2018-11-30  10.65  10.71  10.75  10.62  285726.0          0.08   </span><br><span class="line">634  600000  2018-12-03  10.99  11.02  11.05  10.84  430490.0          0.31   </span><br><span class="line">635  600000  2018-12-04  11.00  11.08  11.08  10.97  208112.0          0.06   </span><br><span class="line">636  600000  2018-12-05  10.99  11.00  11.10  10.96  254912.0         -0.08   </span><br><span class="line">637  600000  2018-12-06  10.82  10.90  10.93  10.82  235979.0         -0.10   </span><br><span class="line">638  600000  2018-12-07  10.94  10.89  11.03  10.88  105805.0         -0.01   </span><br><span class="line">639  600000  2018-12-10  10.77  10.83  10.90  10.77  159275.0         -0.06   </span><br><span class="line">640  600000  2018-12-11  10.84  10.72  10.90  10.69  172342.0         -0.11   </span><br><span class="line"></span><br><span class="line">     p_change     ma5    ma10  ma20  ma60  ma250     v_ma5    v_ma10  v_ma20  \</span><br><span class="line">631       NaN     NaN     NaN   NaN   NaN    NaN       NaN       NaN     NaN   </span><br><span class="line">632  0.472590     NaN     NaN   NaN   NaN    NaN       NaN       NaN     NaN   </span><br><span class="line">633  0.752587     NaN     NaN   NaN   NaN    NaN       NaN       NaN     NaN   </span><br><span class="line">634  2.894491     NaN     NaN   NaN   NaN    NaN       NaN       NaN     NaN   </span><br><span class="line">635  0.544465  10.804     NaN   NaN   NaN    NaN  262916.0       NaN     NaN   </span><br><span class="line">636 -0.722022  10.888     NaN   NaN   NaN    NaN  277219.2       NaN     NaN   </span><br><span class="line">637 -0.909091  10.942     NaN   NaN   NaN    NaN  283043.8       NaN     NaN   </span><br><span class="line">638 -0.091743  10.978     NaN   NaN   NaN    NaN  247059.6       NaN     NaN   </span><br><span class="line">639 -0.550964  10.940     NaN   NaN   NaN    NaN  192816.6       NaN     NaN   </span><br><span class="line">640 -1.015697  10.868  10.836   NaN   NaN    NaN  185662.6  224289.3     NaN   </span><br><span class="line"></span><br><span class="line">     v_ma60  v_ma250  </span><br><span class="line">631     NaN      NaN  </span><br><span class="line">632     NaN      NaN  </span><br><span class="line">633     NaN      NaN  </span><br><span class="line">634     NaN      NaN  </span><br><span class="line">635     NaN      NaN  </span><br><span class="line">636     NaN      NaN  </span><br><span class="line">637     NaN      NaN  </span><br><span class="line">638     NaN      NaN  </span><br><span class="line">639     NaN      NaN  </span><br><span class="line">640     NaN      NaN  </span><br><span class="line">       code        date   open  close   high    low    volume  price_change  \</span><br><span class="line">631  600000  2018-11-28  10.56  10.58  10.62  10.50  183396.0          0.05   </span><br><span class="line">632  600000  2018-11-29  10.64  10.63  10.75  10.54  206856.0          0.05   </span><br><span class="line">633  600000  2018-11-30  10.65  10.71  10.75  10.62  285726.0          0.08   </span><br><span class="line">634  600000  2018-12-03  10.99  11.02  11.05  10.84  430490.0          0.31   </span><br><span class="line">635  600000  2018-12-04  11.00  11.08  11.08  10.97  208112.0          0.06   </span><br><span class="line">636  600000  2018-12-05  10.99  11.00  11.10  10.96  254912.0         -0.08   </span><br><span class="line">637  600000  2018-12-06  10.82  10.90  10.93  10.82  235979.0         -0.10   </span><br><span class="line">638  600000  2018-12-07  10.94  10.89  11.03  10.88  105805.0         -0.01   </span><br><span class="line">639  600000  2018-12-10  10.77  10.83  10.90  10.77  159275.0         -0.06   </span><br><span class="line">640  600000  2018-12-11  10.84  10.72  10.90  10.69  172342.0         -0.11   </span><br><span class="line"></span><br><span class="line">     p_change     ma5    ma10  ma20  ma60  ma250     v_ma5    v_ma10  v_ma20  \</span><br><span class="line">631  0.472590  10.804  10.836   NaN   NaN    NaN  262916.0  224289.3     NaN   </span><br><span class="line">632  0.472590  10.804  10.836   NaN   NaN    NaN  262916.0  224289.3     NaN   </span><br><span class="line">633  0.752587  10.804  10.836   NaN   NaN    NaN  262916.0  224289.3     NaN   </span><br><span class="line">634  2.894491  10.804  10.836   NaN   NaN    NaN  262916.0  224289.3     NaN   </span><br><span class="line">635  0.544465  10.804  10.836   NaN   NaN    NaN  262916.0  224289.3     NaN   </span><br><span class="line">636 -0.722022  10.888  10.836   NaN   NaN    NaN  277219.2  224289.3     NaN   </span><br><span class="line">637 -0.909091  10.942  10.836   NaN   NaN    NaN  283043.8  224289.3     NaN   </span><br><span class="line">638 -0.091743  10.978  10.836   NaN   NaN    NaN  247059.6  224289.3     NaN   </span><br><span class="line">639 -0.550964  10.940  10.836   NaN   NaN    NaN  192816.6  224289.3     NaN   </span><br><span class="line">640 -1.015697  10.868  10.836   NaN   NaN    NaN  185662.6  224289.3     NaN   </span><br><span class="line"></span><br><span class="line">     v_ma60  v_ma250  </span><br><span class="line">631     NaN      NaN  </span><br><span class="line">632     NaN      NaN  </span><br><span class="line">633     NaN      NaN  </span><br><span class="line">634     NaN      NaN  </span><br><span class="line">635     NaN      NaN  </span><br><span class="line">636     NaN      NaN  </span><br><span class="line">637     NaN      NaN  </span><br><span class="line">638     NaN      NaN  </span><br><span class="line">639     NaN      NaN  </span><br><span class="line">640     NaN      NaN  </span><br><span class="line">       code        date   open  close   high    low    volume  price_change  \</span><br><span class="line">631  600000  2018-11-28  10.56  10.58  10.62  10.50  183396.0          0.05   </span><br><span class="line">632  600000  2018-11-29  10.64  10.63  10.75  10.54  206856.0          0.05   </span><br><span class="line">633  600000  2018-11-30  10.65  10.71  10.75  10.62  285726.0          0.08   </span><br><span class="line">634  600000  2018-12-03  10.99  11.02  11.05  10.84  430490.0          0.31   </span><br><span class="line">635  600000  2018-12-04  11.00  11.08  11.08  10.97  208112.0          0.06   </span><br><span class="line">636  600000  2018-12-05  10.99  11.00  11.10  10.96  254912.0         -0.08   </span><br><span class="line">637  600000  2018-12-06  10.82  10.90  10.93  10.82  235979.0         -0.10   </span><br><span class="line">638  600000  2018-12-07  10.94  10.89  11.03  10.88  105805.0         -0.01   </span><br><span class="line">639  600000  2018-12-10  10.77  10.83  10.90  10.77  159275.0         -0.06   </span><br><span class="line">640  600000  2018-12-11  10.84  10.72  10.90  10.69  172342.0         -0.11   </span><br><span class="line"></span><br><span class="line">     p_change     ma5    ma10  ma20  ma60  ma250     v_ma5    v_ma10  v_ma20  \</span><br><span class="line">631  0.472590  10.804  10.836   0.0   0.0    0.0  262916.0  224289.3     0.0   </span><br><span class="line">632  0.472590  10.804  10.836   0.0   0.0    0.0  262916.0  224289.3     0.0   </span><br><span class="line">633  0.752587  10.804  10.836   0.0   0.0    0.0  262916.0  224289.3     0.0   </span><br><span class="line">634  2.894491  10.804  10.836   0.0   0.0    0.0  262916.0  224289.3     0.0   </span><br><span class="line">635  0.544465  10.804  10.836   0.0   0.0    0.0  262916.0  224289.3     0.0   </span><br><span class="line">636 -0.722022  10.888  10.836   0.0   0.0    0.0  277219.2  224289.3     0.0   </span><br><span class="line">637 -0.909091  10.942  10.836   0.0   0.0    0.0  283043.8  224289.3     0.0   </span><br><span class="line">638 -0.091743  10.978  10.836   0.0   0.0    0.0  247059.6  224289.3     0.0   </span><br><span class="line">639 -0.550964  10.940  10.836   0.0   0.0    0.0  192816.6  224289.3     0.0   </span><br><span class="line">640 -1.015697  10.868  10.836   0.0   0.0    0.0  185662.6  224289.3     0.0   </span><br><span class="line"></span><br><span class="line">     v_ma60  v_ma250  </span><br><span class="line">631     0.0      0.0  </span><br><span class="line">632     0.0      0.0  </span><br><span class="line">633     0.0      0.0  </span><br><span class="line">634     0.0      0.0  </span><br><span class="line">635     0.0      0.0  </span><br><span class="line">636     0.0      0.0  </span><br><span class="line">637     0.0      0.0  </span><br><span class="line">638     0.0      0.0  </span><br><span class="line">639     0.0      0.0  </span><br><span class="line">640     0.0      0.0</span><br></pre></td></tr></table></figure>
<h5 id="获取某一行的值"><a href="#获取某一行的值" class="headerlink" title="获取某一行的值"></a>获取某一行的值</h5><p><a href="https://pandas.pydata.org/pandas-docs/stable/indexing.html" target="_blank" rel="noopener">https://pandas.pydata.org/pandas-docs/stable/indexing.html</a><br><a href="https://stackoverflow.com/questions/28757389/loc-vs-iloc-vs-ix-vs-at-vs-iat" target="_blank" rel="noopener">https://stackoverflow.com/questions/28757389/loc-vs-iloc-vs-ix-vs-at-vs-iat</a><br><a href="http://blog.csdn.net/xw_classmate/article/details/51333646" target="_blank" rel="noopener">http://blog.csdn.net/xw_classmate/article/details/51333646</a><br><a href="http://blog.csdn.net/wr339988/article/details/65446138" target="_blank" rel="noopener">http://blog.csdn.net/wr339988/article/details/65446138</a><br><a href="https://www.zhihu.com/question/47362048" target="_blank" rel="noopener">https://www.zhihu.com/question/47362048</a><br><a href="http://blog.csdn.net/IAlexanderI/article/details/70186801" target="_blank" rel="noopener">http://blog.csdn.net/IAlexanderI/article/details/70186801</a></p>
<p><a href="http://www.cnblogs.com/coskaka/p/6107372.html" target="_blank" rel="noopener">http://www.cnblogs.com/coskaka/p/6107372.html</a><br>loc: only work on index<br>iloc: work on position<br>ix: You can get data from dataframe without it being in the index<br>at: get scalar values. It’s a very fast loc<br>iat: Get scalar values. It’s a very fast iloc</p>
<p><a href="http://www.cnblogs.com/kylinlin/p/5231404.html" target="_blank" rel="noopener">http://www.cnblogs.com/kylinlin/p/5231404.html</a><br>从如下示例可以看出，loc和iloc在某些情况下可以混用(即行索引为数字的时候)，而且iloc支持-1等索引值(位置可以是-1)，但是iloc不包括列表的最后一行。loc通过行标签索引行数据，loc[index]这个index是DataFrame的索引，可以是数字，日期或者其它格式索引。iloc通过行号获取行数据，iloc[index]中，这个index是行号，永远是数字。<br>at的使用方法与loc类似，但是比loc有更快的访问数据的速度，而且只能访问单个元素，不能访问多个元素。<br>iat对于iloc的关系就像at对于loc的关系，是一种更快的基于索引位置的选择方法，同at一样只能访问单个元素。</p>
<p><a href="http://www.cnblogs.com/harvey888/p/6006200.html" target="_blank" rel="noopener">http://www.cnblogs.com/harvey888/p/6006200.html</a><br><a href="http://blog.csdn.net/wr339988/article/details/65446138" target="_blank" rel="noopener">http://blog.csdn.net/wr339988/article/details/65446138</a><br>ix，以上说过的几种方法都要求查询的值在索引中，或者位置不超过长度范围，而ix允许你得到不在DataFrame索引中的数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># 第一行的值</span><br><span class="line">today_df.head(1)</span><br><span class="line">today_df[:1]</span><br><span class="line">today_df[0:1]</span><br><span class="line">today_df.loc[0]</span><br><span class="line">today_df.iloc[0]</span><br><span class="line"># 前5行的值</span><br><span class="line">today_df[0:5]</span><br><span class="line">today_df.loc[0:4]</span><br><span class="line">today_df.iloc[0:5]</span><br><span class="line">today_df.head()</span><br><span class="line"></span><br><span class="line"># 最后一行的值</span><br><span class="line">today_df.tail(1)</span><br><span class="line">today_df[-1:len(today_df)]</span><br><span class="line">today_df.loc[len(today_df) - 1]</span><br><span class="line">today_df.iloc[-1]</span><br><span class="line"># 最后5行的值</span><br><span class="line">today_df[-5:len(today_df)]</span><br><span class="line">today_df.loc[len(today_df) - 5: len(today_df)]</span><br><span class="line">today_df.iloc[-5:len(today_df)]</span><br><span class="line">today_df.tail()</span><br><span class="line"></span><br><span class="line"># 获取前五行，只包含前两列的DataFrame</span><br><span class="line">today_df[:5][[&apos;code&apos;, &apos;name&apos;]]</span><br><span class="line">today_df[:5][today_df.columns[0:2]]</span><br><span class="line">today_df.loc[0:4, list(today_df.columns[0:2])]</span><br><span class="line">today_df.iloc[0:5, 0:2]</span><br><span class="line"></span><br><span class="line">today_df.loc[[1,2,4], :]</span><br><span class="line">today_df.iloc[[1,2,4], :]</span><br><span class="line"></span><br><span class="line">today_df.loc[[1,2,4]]</span><br><span class="line">today_df.iloc[[1,2,4]]</span><br><span class="line"></span><br><span class="line">today_df.loc[[1,2,4], [today_df.columns[0], today_df.columns[2]]]</span><br><span class="line">today_df.iloc[[1,2,4], [0, 2]]</span><br></pre></td></tr></table></figure></p>
<h5 id="Pandas中loc-iloc-ix-iat区别"><a href="#Pandas中loc-iloc-ix-iat区别" class="headerlink" title="Pandas中loc ,iloc,ix,iat区别"></a>Pandas中loc ,iloc,ix,iat区别</h5><p><a href="http://www.cnblogs.com/coskaka/p/6107372.html" target="_blank" rel="noopener">http://www.cnblogs.com/coskaka/p/6107372.html</a><br><a href="https://stackoverflow.com/questions/28757389/loc-vs-iloc-vs-ix-vs-at-vs-iat" target="_blank" rel="noopener">https://stackoverflow.com/questions/28757389/loc-vs-iloc-vs-ix-vs-at-vs-iat</a><br><a href="http://www.cnblogs.com/harvey888/p/6006200.html" target="_blank" rel="noopener">http://www.cnblogs.com/harvey888/p/6006200.html</a><br><a href="http://chnwentao.com/2016/05/24/cix1k7nbv005c2q1p1bk2wr4d/" target="_blank" rel="noopener">http://chnwentao.com/2016/05/24/cix1k7nbv005c2q1p1bk2wr4d/</a><br><a href="http://www.shizhuolin.com/2015/04/19/978.html" target="_blank" rel="noopener">http://www.shizhuolin.com/2015/04/19/978.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">pandas中Loc vs. iloc vs. ix vs. at vs. iat?</span><br><span class="line">所以loc和iloc不能混用，loc是基于index的数值访问(即loc的第一个参数是pandas数据的index)，如果index是数字类型，但是不连续，访问的结果与iloc不同，如果index是date或者其它数字类型，则需要用index的数值来访问。而iloc是基于position的数值访问，所以访问的时候不需要去考虑index的值，只需要按照第一行，第几列的方式访问即可。</span><br><span class="line"></span><br><span class="line">http://blog.csdn.net/xw_classmate/article/details/51333646</span><br><span class="line">http://blog.csdn.net/wr339988/article/details/65446138</span><br><span class="line"></span><br><span class="line">loc: only work on index</span><br><span class="line">loc可以让你按照索引来进行行列选择。</span><br><span class="line"></span><br><span class="line">iloc: work on position</span><br><span class="line">如果说loc是按照索引（index）的值来选取的话，那么iloc就是按照索引的位置来进行选取。iloc不关心索引的具体值是多少，只关心位置是多少，所以使用iloc时方括号中只能使用数值。</span><br><span class="line"></span><br><span class="line">ix: You can get data from dataframe without it being in the index</span><br><span class="line">以上说过的几种方法都要求查询的秩在索引中，或者位置不超过长度范围，而ix允许你得到不在DataFrame索引中的数据。</span><br><span class="line">ix结合前两种的混合索引，可通过行号索引，也可通过行标签索引</span><br><span class="line">.ix 的功能就更强大了，它允许我们混合使用下标和名称进行选取。 可以说它涵盖了前面所有的用法。基本上把前面的都换成df.ix 都能成功，但是有一点，就是 df.ix [ [ ..1.. ], [..2..] ],  1框内必须统一，必须同时是下标或者名称，2框也一样。</span><br><span class="line"></span><br><span class="line">at: get scalar values. It&apos;s a very fast loc</span><br><span class="line">at的使用方法与loc类似，但是比loc有更快的访问数据的速度，而且只能访问单个元素，不能访问多个元素。</span><br><span class="line"></span><br><span class="line">iat: Get scalar values. It&apos;s a very fast iloc</span><br><span class="line">iat对于iloc的关系就像at对于loc的关系，是一种更快的基于索引位置的选择方法，同at一样只能访问单个元素。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; df = pd.DataFrame(np.random.randn(10,4), index=range(5,15), columns=list(&apos;ABCD&apos;))</span><br><span class="line">&gt;&gt;&gt; df</span><br><span class="line">           A         B         C         D</span><br><span class="line">5  -0.319518  0.284740  1.026313  0.431706</span><br><span class="line">6  -0.022680  0.628817 -1.488491  0.149373</span><br><span class="line">7   1.572724  0.566957  1.017841  0.369798</span><br><span class="line">8  -1.143665  0.486865  1.203490  0.118623</span><br><span class="line">9  -0.772590  1.754274 -0.581362 -1.881532</span><br><span class="line">10 -0.233140  0.265633  0.392860 -0.182572</span><br><span class="line">11  0.199502  2.954638  0.506847 -0.295944</span><br><span class="line">12  0.703443 -1.780971  1.181585  2.018214</span><br><span class="line">13  0.648979  0.817560  0.083627 -0.440836</span><br><span class="line">14 -0.025313 -0.823509  1.055526 -0.850109</span><br><span class="line">&gt;&gt;&gt; df.ix[5]</span><br><span class="line">A   -0.319518</span><br><span class="line">B    0.284740</span><br><span class="line">C    1.026313</span><br><span class="line">D    0.431706</span><br><span class="line">Name: 5, dtype: float64</span><br><span class="line">&gt;&gt;&gt; df.ix[10]</span><br><span class="line">A   -0.233140</span><br><span class="line">B    0.265633</span><br><span class="line">C    0.392860</span><br><span class="line">D   -0.182572</span><br><span class="line">Name: 10, dtype: float64</span><br><span class="line">&gt;&gt;&gt; df.ix[9]</span><br><span class="line">A   -0.772590</span><br><span class="line">B    1.754274</span><br><span class="line">C   -0.581362</span><br><span class="line">D   -1.881532</span><br><span class="line">Name: 9, dtype: float64</span><br><span class="line">&gt;&gt;&gt; df.ix[2]</span><br><span class="line">Traceback (most recent call last):</span><br></pre></td></tr></table></figure></p>
<h5 id="DataFrame排序"><a href="#DataFrame排序" class="headerlink" title="DataFrame排序"></a>DataFrame排序</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 按照index排序</span><br><span class="line">df.sort_index(axis=1, ascending=False)</span><br><span class="line"></span><br><span class="line"># 按照数据值大小排序，默认是按照降序排列，即ascending为True，升序修改ascending为False</span><br><span class="line">today_df.sort_values(&apos;settlement&apos;, ascending=False)</span><br><span class="line">df.sort_values(by=&apos;B&apos;, ascending=False)</span><br></pre></td></tr></table></figure>
<h5 id="Merge操作"><a href="#Merge操作" class="headerlink" title="Merge操作"></a>Merge操作</h5><p>pandas.v0.19.2 p410, p449, p727<br><a href="http://freefarm.cc/2016/05/24/PANDAS%E5%B8%B8%E7%94%A8%E6%89%8B%E5%86%8C-IV-%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE%E9%9B%86/" target="_blank" rel="noopener">http://freefarm.cc/2016/05/24/PANDAS%E5%B8%B8%E7%94%A8%E6%89%8B%E5%86%8C-IV-%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE%E9%9B%86/</a><br><a href="https://amaozhao.gitbooks.io/pandas-notebook/content/%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE%E9%9B%86.html" target="_blank" rel="noopener">https://amaozhao.gitbooks.io/pandas-notebook/content/%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE%E9%9B%86.html</a><br><a href="https://www.jianshu.com/p/b07bc5c650ea" target="_blank" rel="noopener">https://www.jianshu.com/p/b07bc5c650ea</a><br><a href="https://www.jianshu.com/p/3ec0ca76572b" target="_blank" rel="noopener">https://www.jianshu.com/p/3ec0ca76572b</a><br><a href="http://blog.csdn.net/zutsoft/article/details/51498026" target="_blank" rel="noopener">http://blog.csdn.net/zutsoft/article/details/51498026</a><br><a href="http://noahsnail.com/2017/04/29/2017-4-29-pandas%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95(%E5%85%AD)%E2%80%94%E2%80%94%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE/" target="_blank" rel="noopener">http://noahsnail.com/2017/04/29/2017-4-29-pandas%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95(%E5%85%AD)%E2%80%94%E2%80%94%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE/</a><br><a href="http://noahsnail.com/2017/04/29/2017-4-29-pandas%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95(%E4%B8%83)%E2%80%94%E2%80%94%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AEmerge/" target="_blank" rel="noopener">http://noahsnail.com/2017/04/29/2017-4-29-pandas%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95(%E4%B8%83)%E2%80%94%E2%80%94%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AEmerge/</a><br><a href="https://morvanzhou.github.io/tutorials/data-manipulation/np-pd/3-6-pd-concat/" target="_blank" rel="noopener">https://morvanzhou.github.io/tutorials/data-manipulation/np-pd/3-6-pd-concat/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line">1. concat(注意索引变化)</span><br><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">df = pd.DataFrame(np.random.randn(10, 4))</span><br><span class="line">pieces = [df[:3], df[3:7], df[7:]]</span><br><span class="line">pd.concat(pieces)</span><br><span class="line">pd.concat([df[:3], df[3:7], df[7:]])</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; df1 = pandas.DataFrame(np.random.randn(6,4), columns=list(&apos;ABCD&apos;))</span><br><span class="line">&gt;&gt;&gt; df1</span><br><span class="line">          A         B         C         D</span><br><span class="line">0 -1.517306 -0.813150  0.834830  0.998925</span><br><span class="line">1  0.385413  0.281785 -0.213931 -0.321473</span><br><span class="line">2 -0.314647  0.709807  0.849917  1.094283</span><br><span class="line">3  0.453020 -0.264532  1.107129  0.810168</span><br><span class="line">4  0.941546 -0.354594  0.713501 -0.414387</span><br><span class="line">5 -0.299815 -0.706964 -0.694722  0.496755</span><br><span class="line">&gt;&gt;&gt; df2 = pandas.DataFrame(np.random.randn(6,4), columns=list(&apos;ABCD&apos;))</span><br><span class="line">&gt;&gt;&gt; df2</span><br><span class="line">          A         B         C         D</span><br><span class="line">0  1.248222 -0.032582 -0.410138  0.678771</span><br><span class="line">1  1.491609  0.767659  0.120715 -1.562305</span><br><span class="line">2 -0.648467 -0.746283 -0.160937 -1.644596</span><br><span class="line">3 -1.211631  0.328242 -1.795474 -1.112462</span><br><span class="line">4  1.017662 -0.055081  0.593488 -0.235510</span><br><span class="line">5 -0.423520  0.458304 -0.221281 -0.381890</span><br><span class="line">&gt;&gt;&gt; df_concat = pandas.concat([df1, df2])</span><br><span class="line">&gt;&gt;&gt; df_concat</span><br><span class="line">          A         B         C         D</span><br><span class="line">0 -1.517306 -0.813150  0.834830  0.998925</span><br><span class="line">1  0.385413  0.281785 -0.213931 -0.321473</span><br><span class="line">2 -0.314647  0.709807  0.849917  1.094283</span><br><span class="line">3  0.453020 -0.264532  1.107129  0.810168</span><br><span class="line">4  0.941546 -0.354594  0.713501 -0.414387</span><br><span class="line">5 -0.299815 -0.706964 -0.694722  0.496755</span><br><span class="line">0  1.248222 -0.032582 -0.410138  0.678771</span><br><span class="line">1  1.491609  0.767659  0.120715 -1.562305</span><br><span class="line">2 -0.648467 -0.746283 -0.160937 -1.644596</span><br><span class="line">3 -1.211631  0.328242 -1.795474 -1.112462</span><br><span class="line">4  1.017662 -0.055081  0.593488 -0.235510</span><br><span class="line">5 -0.423520  0.458304 -0.221281 -0.381890</span><br><span class="line">&gt;&gt;&gt; df_concat = pandas.concat([df1, df2], ignore_index=True)</span><br><span class="line">&gt;&gt;&gt; df_concat</span><br><span class="line">           A         B         C         D</span><br><span class="line">0  -1.517306 -0.813150  0.834830  0.998925</span><br><span class="line">1   0.385413  0.281785 -0.213931 -0.321473</span><br><span class="line">2  -0.314647  0.709807  0.849917  1.094283</span><br><span class="line">3   0.453020 -0.264532  1.107129  0.810168</span><br><span class="line">4   0.941546 -0.354594  0.713501 -0.414387</span><br><span class="line">5  -0.299815 -0.706964 -0.694722  0.496755</span><br><span class="line">6   1.248222 -0.032582 -0.410138  0.678771</span><br><span class="line">7   1.491609  0.767659  0.120715 -1.562305</span><br><span class="line">8  -0.648467 -0.746283 -0.160937 -1.644596</span><br><span class="line">9  -1.211631  0.328242 -1.795474 -1.112462</span><br><span class="line">10  1.017662 -0.055081  0.593488 -0.235510</span><br><span class="line">11 -0.423520  0.458304 -0.221281 -0.381890</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. join</span><br><span class="line">pandas.v0.19.2 p739</span><br><span class="line">https://coolshell.cn/articles/3463.html</span><br><span class="line">http://www.w3school.com.cn/sql/sql_join.asp</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3. append(注意索引变化)</span><br><span class="line">less_df = today_df[0:0]</span><br><span class="line">less_df = less_df.append(today_df.iloc[index])</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; df1 = pandas.DataFrame(np.random.randn(6,4), columns=list(&apos;ABCD&apos;))</span><br><span class="line">&gt;&gt;&gt; df1</span><br><span class="line">          A         B         C         D</span><br><span class="line">0 -1.517306 -0.813150  0.834830  0.998925</span><br><span class="line">1  0.385413  0.281785 -0.213931 -0.321473</span><br><span class="line">2 -0.314647  0.709807  0.849917  1.094283</span><br><span class="line">3  0.453020 -0.264532  1.107129  0.810168</span><br><span class="line">4  0.941546 -0.354594  0.713501 -0.414387</span><br><span class="line">5 -0.299815 -0.706964 -0.694722  0.496755</span><br><span class="line">&gt;&gt;&gt; df2 = pandas.DataFrame(np.random.randn(6,4), columns=list(&apos;ABCD&apos;))</span><br><span class="line">&gt;&gt;&gt; df2</span><br><span class="line">          A         B         C         D</span><br><span class="line">0  1.248222 -0.032582 -0.410138  0.678771</span><br><span class="line">1  1.491609  0.767659  0.120715 -1.562305</span><br><span class="line">2 -0.648467 -0.746283 -0.160937 -1.644596</span><br><span class="line">3 -1.211631  0.328242 -1.795474 -1.112462</span><br><span class="line">4  1.017662 -0.055081  0.593488 -0.235510</span><br><span class="line">5 -0.423520  0.458304 -0.221281 -0.381890</span><br><span class="line">&gt;&gt;&gt; df_append = df1.append(df2)</span><br><span class="line">&gt;&gt;&gt; df_append</span><br><span class="line">          A         B         C         D</span><br><span class="line">0 -1.517306 -0.813150  0.834830  0.998925</span><br><span class="line">1  0.385413  0.281785 -0.213931 -0.321473</span><br><span class="line">2 -0.314647  0.709807  0.849917  1.094283</span><br><span class="line">3  0.453020 -0.264532  1.107129  0.810168</span><br><span class="line">4  0.941546 -0.354594  0.713501 -0.414387</span><br><span class="line">5 -0.299815 -0.706964 -0.694722  0.496755</span><br><span class="line">0  1.248222 -0.032582 -0.410138  0.678771</span><br><span class="line">1  1.491609  0.767659  0.120715 -1.562305</span><br><span class="line">2 -0.648467 -0.746283 -0.160937 -1.644596</span><br><span class="line">3 -1.211631  0.328242 -1.795474 -1.112462</span><br><span class="line">4  1.017662 -0.055081  0.593488 -0.235510</span><br><span class="line">5 -0.423520  0.458304 -0.221281 -0.381890</span><br><span class="line">&gt;&gt;&gt; df_append = df1.append(df2, ignore_index=True)</span><br><span class="line">&gt;&gt;&gt; df_append</span><br><span class="line">           A         B         C         D</span><br><span class="line">0  -1.517306 -0.813150  0.834830  0.998925</span><br><span class="line">1   0.385413  0.281785 -0.213931 -0.321473</span><br><span class="line">2  -0.314647  0.709807  0.849917  1.094283</span><br><span class="line">3   0.453020 -0.264532  1.107129  0.810168</span><br><span class="line">4   0.941546 -0.354594  0.713501 -0.414387</span><br><span class="line">5  -0.299815 -0.706964 -0.694722  0.496755</span><br><span class="line">6   1.248222 -0.032582 -0.410138  0.678771</span><br><span class="line">7   1.491609  0.767659  0.120715 -1.562305</span><br><span class="line">8  -0.648467 -0.746283 -0.160937 -1.644596</span><br><span class="line">9  -1.211631  0.328242 -1.795474 -1.112462</span><br><span class="line">10  1.017662 -0.055081  0.593488 -0.235510</span><br><span class="line">11 -0.423520  0.458304 -0.221281 -0.381890</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4. merge</span><br><span class="line">&gt;&gt;&gt; import pandas</span><br><span class="line">&gt;&gt;&gt; import numpy as np</span><br><span class="line">&gt;&gt;&gt; df1 = pandas.DataFrame(np.random.randn(6,4), columns=list(&apos;ABCD&apos;))</span><br><span class="line">&gt;&gt;&gt; df1</span><br><span class="line">          A         B         C         D</span><br><span class="line">0 -1.517306 -0.813150  0.834830  0.998925</span><br><span class="line">1  0.385413  0.281785 -0.213931 -0.321473</span><br><span class="line">2 -0.314647  0.709807  0.849917  1.094283</span><br><span class="line">3  0.453020 -0.264532  1.107129  0.810168</span><br><span class="line">4  0.941546 -0.354594  0.713501 -0.414387</span><br><span class="line">5 -0.299815 -0.706964 -0.694722  0.496755</span><br><span class="line">&gt;&gt;&gt; df2 = pandas.DataFrame(np.random.randn(6,4), columns=list(&apos;ABCD&apos;))</span><br><span class="line">&gt;&gt;&gt; df2</span><br><span class="line">          A         B         C         D</span><br><span class="line">0  1.248222 -0.032582 -0.410138  0.678771</span><br><span class="line">1  1.491609  0.767659  0.120715 -1.562305</span><br><span class="line">2 -0.648467 -0.746283 -0.160937 -1.644596</span><br><span class="line">3 -1.211631  0.328242 -1.795474 -1.112462</span><br><span class="line">4  1.017662 -0.055081  0.593488 -0.235510</span><br><span class="line">5 -0.423520  0.458304 -0.221281 -0.381890</span><br><span class="line">&gt;&gt;&gt; df_merge = pandas.merge(df1, df2)</span><br><span class="line">&gt;&gt;&gt; df_merge</span><br><span class="line">Empty DataFrame</span><br><span class="line">Columns: [A, B, C, D]</span><br><span class="line">Index: []</span><br><span class="line">&gt;&gt;&gt; df_merge = pandas.merge(df1, df2, how=&apos;outer&apos;)</span><br><span class="line">&gt;&gt;&gt; df_merge</span><br><span class="line">           A         B         C         D</span><br><span class="line">0  -1.517306 -0.813150  0.834830  0.998925</span><br><span class="line">1   0.385413  0.281785 -0.213931 -0.321473</span><br><span class="line">2  -0.314647  0.709807  0.849917  1.094283</span><br><span class="line">3   0.453020 -0.264532  1.107129  0.810168</span><br><span class="line">4   0.941546 -0.354594  0.713501 -0.414387</span><br><span class="line">5  -0.299815 -0.706964 -0.694722  0.496755</span><br><span class="line">6   1.248222 -0.032582 -0.410138  0.678771</span><br><span class="line">7   1.491609  0.767659  0.120715 -1.562305</span><br><span class="line">8  -0.648467 -0.746283 -0.160937 -1.644596</span><br><span class="line">9  -1.211631  0.328242 -1.795474 -1.112462</span><br><span class="line">10  1.017662 -0.055081  0.593488 -0.235510</span><br><span class="line">11 -0.423520  0.458304 -0.221281 -0.381890</span><br></pre></td></tr></table></figure></p>
<h5 id="Series与DataFrame的区别"><a href="#Series与DataFrame的区别" class="headerlink" title="Series与DataFrame的区别"></a>Series与DataFrame的区别</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">Series的list操作得到的是该列的值作为list返回</span><br><span class="line">new_code_df = code_df[code_df.columns[0]]</span><br><span class="line"></span><br><span class="line">type(new_code_df)</span><br><span class="line">Out[25]: pandas.core.series.Series</span><br><span class="line"></span><br><span class="line">new_code_list = list(new_code_df)</span><br><span class="line"></span><br><span class="line">len(new_code_list)</span><br><span class="line">Out[38]: 3345</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DataFrame的list操作得到的是列名</span><br><span class="line">list(code_df)</span><br><span class="line">Out[47]:</span><br><span class="line">[&apos;code&apos;,</span><br><span class="line"> &apos;name&apos;,</span><br><span class="line"> &apos;changepercent&apos;,</span><br><span class="line"> &apos;trade&apos;,</span><br><span class="line"> &apos;open&apos;,</span><br><span class="line"> &apos;high&apos;,</span><br><span class="line"> &apos;low&apos;,</span><br><span class="line"> &apos;settlement&apos;,</span><br><span class="line"> &apos;volume&apos;,</span><br><span class="line"> &apos;turnoverratio&apos;,</span><br><span class="line"> &apos;amount&apos;,</span><br><span class="line"> &apos;per&apos;,</span><br><span class="line"> &apos;pb&apos;,</span><br><span class="line"> &apos;mktcap&apos;,</span><br><span class="line"> &apos;nmc&apos;]</span><br><span class="line"></span><br><span class="line">new_code_df = code_df[code_df.columns[:1]]</span><br><span class="line"></span><br><span class="line">type(new_code_df)</span><br><span class="line">Out[27]: pandas.core.frame.DataFrame</span><br><span class="line"></span><br><span class="line">new_code_list = list(new_code_df)</span><br><span class="line"></span><br><span class="line">new_code_list</span><br><span class="line">Out[35]: [&apos;code&apos;]</span><br><span class="line"></span><br><span class="line">for i in range(len(new_code_df)):</span><br><span class="line">    new_code_list.append(new_code_df.iloc[i, 0])</span><br><span class="line"></span><br><span class="line">for code in new_code_df[new_code_df.columns[0]]:</span><br><span class="line">    new_code_list.append(code)</span><br><span class="line"></span><br><span class="line">len(new_code_list)</span><br><span class="line">Out[45]: 3345</span><br></pre></td></tr></table></figure>
<h5 id="DataFrame一行数据的访问"><a href="#DataFrame一行数据的访问" class="headerlink" title="DataFrame一行数据的访问"></a>DataFrame一行数据的访问</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; hist_df = ts.get_hist_data(&apos;600000&apos;, start=&apos;2017-09-26&apos;, end=&apos;2017-09-28&apos;, ktype=&apos;D&apos;)</span><br><span class="line">http://api.finance.ifeng.com/akdaily/?code=sh600000&amp;type=last</span><br><span class="line">&gt;&gt;&gt; hist_df</span><br><span class="line">             open   high  close    low     volume  price_change  p_change  \</span><br><span class="line">date</span><br><span class="line">2017-09-28  12.85  12.88  12.84  12.77  241249.34         -0.01     -0.08</span><br><span class="line">2017-09-27  12.83  12.91  12.85  12.76  263747.53         -0.01     -0.08</span><br><span class="line">2017-09-26  12.89  12.93  12.86  12.85  221633.11         -0.08     -0.62</span><br><span class="line"></span><br><span class="line">               ma5    ma10    ma20      v_ma5     v_ma10     v_ma20  turnover</span><br><span class="line">date</span><br><span class="line">2017-09-28  12.876  12.877  12.897  295086.63  278342.70  361487.26      0.09</span><br><span class="line">2017-09-27  12.882  12.878  12.891  287117.30  278378.59  371819.95      0.09</span><br><span class="line">2017-09-26  12.888  12.880  12.892  274102.09  283976.74  388872.57      0.08</span><br><span class="line">&gt;&gt;&gt; hist_series = hist_df.iloc[-1]</span><br><span class="line">&gt;&gt;&gt; type(hist_series)</span><br><span class="line">&lt;class &apos;pandas.core.series.Series&apos;&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; hist_series</span><br><span class="line">open                12.890</span><br><span class="line">high                12.930</span><br><span class="line">close               12.860</span><br><span class="line">low                 12.850</span><br><span class="line">volume          221633.110</span><br><span class="line">price_change        -0.080</span><br><span class="line">p_change            -0.620</span><br><span class="line">ma5                 12.888</span><br><span class="line">ma10                12.880</span><br><span class="line">ma20                12.892</span><br><span class="line">v_ma5           274102.090</span><br><span class="line">v_ma10          283976.740</span><br><span class="line">v_ma20          388872.570</span><br><span class="line">turnover             0.080</span><br><span class="line">Name: 2017-09-26, dtype: float64</span><br><span class="line">&gt;&gt;&gt; hist_series[0]</span><br><span class="line">12.890000000000001</span><br><span class="line">&gt;&gt;&gt; hist_series[1]</span><br><span class="line">12.93</span><br><span class="line">&gt;&gt;&gt; hist_series[-1]</span><br><span class="line">0.080000000000000002</span><br><span class="line">&gt;&gt;&gt; hist_series[&apos;ma5&apos;]</span><br><span class="line">12.888</span><br><span class="line">&gt;&gt;&gt; hist_series[:3]</span><br><span class="line">open     12.89</span><br><span class="line">high     12.93</span><br><span class="line">close    12.86</span><br><span class="line">Name: 2017-09-26, dtype: float64</span><br><span class="line">&gt;&gt;&gt; hist_series[:-1]</span><br><span class="line">open                12.890</span><br><span class="line">high                12.930</span><br><span class="line">close               12.860</span><br><span class="line">low                 12.850</span><br><span class="line">volume          221633.110</span><br><span class="line">price_change        -0.080</span><br><span class="line">p_change            -0.620</span><br><span class="line">ma5                 12.888</span><br><span class="line">ma10                12.880</span><br><span class="line">ma20                12.892</span><br><span class="line">v_ma5           274102.090</span><br><span class="line">v_ma10          283976.740</span><br><span class="line">v_ma20          388872.570</span><br><span class="line">Name: 2017-09-26, dtype: float64</span><br><span class="line">&gt;&gt;&gt; hist_series[:]</span><br><span class="line">open                12.890</span><br><span class="line">high                12.930</span><br><span class="line">close               12.860</span><br><span class="line">low                 12.850</span><br><span class="line">volume          221633.110</span><br><span class="line">price_change        -0.080</span><br><span class="line">p_change            -0.620</span><br><span class="line">ma5                 12.888</span><br><span class="line">ma10                12.880</span><br><span class="line">ma20                12.892</span><br><span class="line">v_ma5           274102.090</span><br><span class="line">v_ma10          283976.740</span><br><span class="line">v_ma20          388872.570</span><br><span class="line">turnover             0.080</span><br><span class="line">Name: 2017-09-26, dtype: float64</span><br><span class="line">&gt;&gt;&gt; hist_series[::2]</span><br><span class="line">open            12.89</span><br><span class="line">close           12.86</span><br><span class="line">volume      221633.11</span><br><span class="line">p_change        -0.62</span><br><span class="line">ma10            12.88</span><br><span class="line">v_ma5       274102.09</span><br><span class="line">v_ma20      388872.57</span><br><span class="line">Name: 2017-09-26, dtype: float64</span><br></pre></td></tr></table></figure>
<h5 id="pandas按index排序"><a href="#pandas按index排序" class="headerlink" title="pandas按index排序"></a>pandas按index排序</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; hist_df.sort_index(ascending=False)</span><br><span class="line">             open   high  close    low     volume  price_change  p_change  \</span><br><span class="line">date</span><br><span class="line">2017-09-28  12.85  12.88  12.84  12.77  241249.34         -0.01     -0.08</span><br><span class="line">2017-09-27  12.83  12.91  12.85  12.76  263747.53         -0.01     -0.08</span><br><span class="line">2017-09-26  12.89  12.93  12.86  12.85  221633.11         -0.08     -0.62</span><br><span class="line">2017-09-25  12.89  12.95  12.94  12.71  506876.28          0.05      0.39</span><br><span class="line">2017-09-22  12.84  12.92  12.89  12.79  241926.88          0.02      0.15</span><br><span class="line">2017-09-21  12.86  12.95  12.87  12.83  201402.69         -0.01     -0.08</span><br><span class="line">2017-09-20  12.88  12.93  12.88  12.83  198671.48         -0.02     -0.15</span><br><span class="line">2017-09-19  12.93  12.95  12.90  12.82  301701.25         -0.01     -0.08</span><br><span class="line">2017-09-18  12.82  12.96  12.91  12.80  357475.28          0.08      0.62</span><br><span class="line">2017-09-15  12.82  12.86  12.83  12.75  248743.12         -0.02     -0.16</span><br><span class="line">2017-09-14  12.88  12.98  12.85  12.81  241608.31         -0.02     -0.15</span><br><span class="line">2017-09-13  13.01  13.01  12.87  12.86  319728.97         -0.17     -1.30</span><br><span class="line">2017-09-12  13.00  13.04  13.04  12.91  510123.22          0.05      0.39</span><br><span class="line">2017-09-11  13.15  13.15  12.99  12.95  522347.34         -0.04     -0.31</span><br><span class="line">2017-09-08  12.85  13.12  13.03  12.83  647780.88          0.18      1.40</span><br><span class="line">2017-09-07  12.94  13.02  12.85  12.82  382247.81         -0.11     -0.85</span><br><span class="line">2017-09-06  12.99  13.05  12.96  12.90  338235.75         -0.07     -0.54</span><br><span class="line">2017-09-05  12.78  13.09  13.03  12.78  734930.25          0.25      1.96</span><br><span class="line">2017-09-04  12.78  12.84  12.78  12.65  356674.47          0.01      0.08</span><br><span class="line">2017-09-01  12.68  12.87  12.77  12.68  392641.31          0.06      0.47</span><br><span class="line"></span><br><span class="line">               ma5    ma10    ma20      v_ma5     v_ma10     v_ma20  turnover</span><br><span class="line">date</span><br><span class="line">2017-09-28  12.876  12.877  12.897  295086.63  278342.70  361487.26      0.09</span><br><span class="line">2017-09-27  12.882  12.878  12.891  287117.30  278378.59  371819.95      0.09</span><br><span class="line">2017-09-26  12.888  12.880  12.892  274102.09  283976.74  388872.57      0.08</span><br><span class="line">2017-09-25  12.896  12.898  12.897  290115.72  312825.75  407822.89      0.18</span><br><span class="line">2017-09-22  12.890  12.903  12.894  260235.52  314372.85  434535.66      0.09</span><br><span class="line">2017-09-21  12.878  12.917  12.889  261598.76  354958.25  495234.65      0.07</span><br><span class="line">2017-09-20  12.874  12.915  12.869  269639.89  373042.77  516241.10      0.07</span><br><span class="line">2017-09-19  12.872  12.923  12.853  293851.39  386999.19  554743.32      0.11</span><br><span class="line">2017-09-18  12.900  12.936  12.830  335535.78  430322.09  569073.26      0.13</span><br><span class="line">2017-09-15  12.916  12.923  12.810  368510.19  430242.01  568104.62      0.09</span><br><span class="line">2017-09-14  12.956  12.917  12.794  448317.74  444631.83  573655.78      0.09</span><br><span class="line">2017-09-13  12.956  12.903  12.778  476445.64  465261.31  581120.94      0.11</span><br><span class="line">2017-09-12  12.974  12.903  12.759  480147.00  493768.40  582077.75      0.18</span><br><span class="line">2017-09-11  12.972  12.895  12.736  525108.41  502820.04  587867.55      0.19</span><br><span class="line">2017-09-08  12.930  12.885  12.715  491973.83  554698.47  584531.19      0.23</span><br><span class="line">2017-09-07  12.878  12.860  12.697  440945.92  635511.05  596587.18      0.14</span><br><span class="line">2017-09-06  12.850  12.822  12.694  454076.98  659439.44  599502.81      0.12</span><br><span class="line">2017-09-05  12.832  12.783  12.684  507389.81  722487.45  598742.93      0.26</span><br><span class="line">2017-09-04  12.818  12.723  12.676  480531.67  707824.43  573781.57      0.13</span><br><span class="line">2017-09-01  12.840  12.696  12.684  617423.11  705967.22  570712.06      0.14</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; hist_df.sort_index(ascending=True)</span><br><span class="line">             open   high  close    low     volume  price_change  p_change  \</span><br><span class="line">date</span><br><span class="line">2017-09-01  12.68  12.87  12.77  12.68  392641.31          0.06      0.47</span><br><span class="line">2017-09-04  12.78  12.84  12.78  12.65  356674.47          0.01      0.08</span><br><span class="line">2017-09-05  12.78  13.09  13.03  12.78  734930.25          0.25      1.96</span><br><span class="line">2017-09-06  12.99  13.05  12.96  12.90  338235.75         -0.07     -0.54</span><br><span class="line">2017-09-07  12.94  13.02  12.85  12.82  382247.81         -0.11     -0.85</span><br><span class="line">2017-09-08  12.85  13.12  13.03  12.83  647780.88          0.18      1.40</span><br><span class="line">2017-09-11  13.15  13.15  12.99  12.95  522347.34         -0.04     -0.31</span><br><span class="line">2017-09-12  13.00  13.04  13.04  12.91  510123.22          0.05      0.39</span><br><span class="line">2017-09-13  13.01  13.01  12.87  12.86  319728.97         -0.17     -1.30</span><br><span class="line">2017-09-14  12.88  12.98  12.85  12.81  241608.31         -0.02     -0.15</span><br><span class="line">2017-09-15  12.82  12.86  12.83  12.75  248743.12         -0.02     -0.16</span><br><span class="line">2017-09-18  12.82  12.96  12.91  12.80  357475.28          0.08      0.62</span><br><span class="line">2017-09-19  12.93  12.95  12.90  12.82  301701.25         -0.01     -0.08</span><br><span class="line">2017-09-20  12.88  12.93  12.88  12.83  198671.48         -0.02     -0.15</span><br><span class="line">2017-09-21  12.86  12.95  12.87  12.83  201402.69         -0.01     -0.08</span><br><span class="line">2017-09-22  12.84  12.92  12.89  12.79  241926.88          0.02      0.15</span><br><span class="line">2017-09-25  12.89  12.95  12.94  12.71  506876.28          0.05      0.39</span><br><span class="line">2017-09-26  12.89  12.93  12.86  12.85  221633.11         -0.08     -0.62</span><br><span class="line">2017-09-27  12.83  12.91  12.85  12.76  263747.53         -0.01     -0.08</span><br><span class="line">2017-09-28  12.85  12.88  12.84  12.77  241249.34         -0.01     -0.08</span><br><span class="line"></span><br><span class="line">               ma5    ma10    ma20      v_ma5     v_ma10     v_ma20  turnover</span><br><span class="line">date</span><br><span class="line">2017-09-01  12.840  12.696  12.684  617423.11  705967.22  570712.06      0.14</span><br><span class="line">2017-09-04  12.818  12.723  12.676  480531.67  707824.43  573781.57      0.13</span><br><span class="line">2017-09-05  12.832  12.783  12.684  507389.81  722487.45  598742.93      0.26</span><br><span class="line">2017-09-06  12.850  12.822  12.694  454076.98  659439.44  599502.81      0.12</span><br><span class="line">2017-09-07  12.878  12.860  12.697  440945.92  635511.05  596587.18      0.14</span><br><span class="line">2017-09-08  12.930  12.885  12.715  491973.83  554698.47  584531.19      0.23</span><br><span class="line">2017-09-11  12.972  12.895  12.736  525108.41  502820.04  587867.55      0.19</span><br><span class="line">2017-09-12  12.974  12.903  12.759  480147.00  493768.40  582077.75      0.18</span><br><span class="line">2017-09-13  12.956  12.903  12.778  476445.64  465261.31  581120.94      0.11</span><br><span class="line">2017-09-14  12.956  12.917  12.794  448317.74  444631.83  573655.78      0.09</span><br><span class="line">2017-09-15  12.916  12.923  12.810  368510.19  430242.01  568104.62      0.09</span><br><span class="line">2017-09-18  12.900  12.936  12.830  335535.78  430322.09  569073.26      0.13</span><br><span class="line">2017-09-19  12.872  12.923  12.853  293851.39  386999.19  554743.32      0.11</span><br><span class="line">2017-09-20  12.874  12.915  12.869  269639.89  373042.77  516241.10      0.07</span><br><span class="line">2017-09-21  12.878  12.917  12.889  261598.76  354958.25  495234.65      0.07</span><br><span class="line">2017-09-22  12.890  12.903  12.894  260235.52  314372.85  434535.66      0.09</span><br><span class="line">2017-09-25  12.896  12.898  12.897  290115.72  312825.75  407822.89      0.18</span><br><span class="line">2017-09-26  12.888  12.880  12.892  274102.09  283976.74  388872.57      0.08</span><br><span class="line">2017-09-27  12.882  12.878  12.891  287117.30  278378.59  371819.95      0.09</span><br><span class="line">2017-09-28  12.876  12.877  12.897  295086.63  278342.70  361487.26      0.09</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h5 id="pandas按照某列值排序"><a href="#pandas按照某列值排序" class="headerlink" title="pandas按照某列值排序"></a>pandas按照某列值排序</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; hist_df</span><br><span class="line">             open   high  close    low     volume  price_change  p_change  \</span><br><span class="line">date</span><br><span class="line">2017-09-29  12.82  12.91  12.87  12.81  198222.62          0.03      0.23</span><br><span class="line">2017-09-28  12.85  12.88  12.84  12.77  241249.34         -0.01     -0.08</span><br><span class="line">2017-09-27  12.83  12.91  12.85  12.76  263747.53         -0.01     -0.08</span><br><span class="line">2017-09-26  12.89  12.93  12.86  12.85  221633.11         -0.08     -0.62</span><br><span class="line">2017-09-25  12.89  12.95  12.94  12.71  506876.28          0.05      0.39</span><br><span class="line">2017-09-22  12.84  12.92  12.89  12.79  241926.88          0.02      0.15</span><br><span class="line">2017-09-21  12.86  12.95  12.87  12.83  201402.69         -0.01     -0.08</span><br><span class="line">2017-09-20  12.88  12.93  12.88  12.83  198671.48         -0.02     -0.15</span><br><span class="line">2017-09-19  12.93  12.95  12.90  12.82  301701.25         -0.01     -0.08</span><br><span class="line">2017-09-18  12.82  12.96  12.91  12.80  357475.28          0.08      0.62</span><br><span class="line">2017-09-15  12.82  12.86  12.83  12.75  248743.12         -0.02     -0.16</span><br><span class="line">2017-09-14  12.88  12.98  12.85  12.81  241608.31         -0.02     -0.15</span><br><span class="line">2017-09-13  13.01  13.01  12.87  12.86  319728.97         -0.17     -1.30</span><br><span class="line">2017-09-12  13.00  13.04  13.04  12.91  510123.22          0.05      0.39</span><br><span class="line">2017-09-11  13.15  13.15  12.99  12.95  522347.34         -0.04     -0.31</span><br><span class="line">2017-09-08  12.85  13.12  13.03  12.83  647780.88          0.18      1.40</span><br><span class="line">2017-09-07  12.94  13.02  12.85  12.82  382247.81         -0.11     -0.85</span><br><span class="line">2017-09-06  12.99  13.05  12.96  12.90  338235.75         -0.07     -0.54</span><br><span class="line">2017-09-05  12.78  13.09  13.03  12.78  734930.25          0.25      1.96</span><br><span class="line">2017-09-04  12.78  12.84  12.78  12.65  356674.47          0.01      0.08</span><br><span class="line">2017-09-01  12.68  12.87  12.77  12.68  392641.31          0.06      0.47</span><br><span class="line"></span><br><span class="line">               ma5    ma10    ma20      v_ma5     v_ma10     v_ma20  turnover</span><br><span class="line">date</span><br><span class="line">2017-09-29  12.872  12.881  12.902  286345.78  273290.65  351766.33      0.07</span><br><span class="line">2017-09-28  12.876  12.877  12.897  295086.63  278342.70  361487.26      0.09</span><br><span class="line">2017-09-27  12.882  12.878  12.891  287117.30  278378.59  371819.95      0.09</span><br><span class="line">2017-09-26  12.888  12.880  12.892  274102.09  283976.74  388872.57      0.08</span><br><span class="line">2017-09-25  12.896  12.898  12.897  290115.72  312825.75  407822.89      0.18</span><br><span class="line">2017-09-22  12.890  12.903  12.894  260235.52  314372.85  434535.66      0.09</span><br><span class="line">2017-09-21  12.878  12.917  12.889  261598.76  354958.25  495234.65      0.07</span><br><span class="line">2017-09-20  12.874  12.915  12.869  269639.89  373042.77  516241.10      0.07</span><br><span class="line">2017-09-19  12.872  12.923  12.853  293851.39  386999.19  554743.32      0.11</span><br><span class="line">2017-09-18  12.900  12.936  12.830  335535.78  430322.09  569073.26      0.13</span><br><span class="line">2017-09-15  12.916  12.923  12.810  368510.19  430242.01  568104.62      0.09</span><br><span class="line">2017-09-14  12.956  12.917  12.794  448317.74  444631.83  573655.78      0.09</span><br><span class="line">2017-09-13  12.956  12.903  12.778  476445.64  465261.31  581120.94      0.11</span><br><span class="line">2017-09-12  12.974  12.903  12.759  480147.00  493768.40  582077.75      0.18</span><br><span class="line">2017-09-11  12.972  12.895  12.736  525108.41  502820.04  587867.55      0.19</span><br><span class="line">2017-09-08  12.930  12.885  12.715  491973.83  554698.47  584531.19      0.23</span><br><span class="line">2017-09-07  12.878  12.860  12.697  440945.92  635511.05  596587.18      0.14</span><br><span class="line">2017-09-06  12.850  12.822  12.694  454076.98  659439.44  599502.81      0.12</span><br><span class="line">2017-09-05  12.832  12.783  12.684  507389.81  722487.45  598742.93      0.26</span><br><span class="line">2017-09-04  12.818  12.723  12.676  480531.67  707824.43  573781.57      0.13</span><br><span class="line">2017-09-01  12.840  12.696  12.684  617423.11  705967.22  570712.06      0.14</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; hist_df.sort_values(by=&apos;close&apos;)</span><br><span class="line">             open   high  close    low     volume  price_change  p_change  \</span><br><span class="line">date</span><br><span class="line">2017-09-01  12.68  12.87  12.77  12.68  392641.31          0.06      0.47</span><br><span class="line">2017-09-04  12.78  12.84  12.78  12.65  356674.47          0.01      0.08</span><br><span class="line">2017-09-15  12.82  12.86  12.83  12.75  248743.12         -0.02     -0.16</span><br><span class="line">2017-09-28  12.85  12.88  12.84  12.77  241249.34         -0.01     -0.08</span><br><span class="line">2017-09-14  12.88  12.98  12.85  12.81  241608.31         -0.02     -0.15</span><br><span class="line">2017-09-07  12.94  13.02  12.85  12.82  382247.81         -0.11     -0.85</span><br><span class="line">2017-09-27  12.83  12.91  12.85  12.76  263747.53         -0.01     -0.08</span><br><span class="line">2017-09-26  12.89  12.93  12.86  12.85  221633.11         -0.08     -0.62</span><br><span class="line">2017-09-21  12.86  12.95  12.87  12.83  201402.69         -0.01     -0.08</span><br><span class="line">2017-09-13  13.01  13.01  12.87  12.86  319728.97         -0.17     -1.30</span><br><span class="line">2017-09-29  12.82  12.91  12.87  12.81  198222.62          0.03      0.23</span><br><span class="line">2017-09-20  12.88  12.93  12.88  12.83  198671.48         -0.02     -0.15</span><br><span class="line">2017-09-22  12.84  12.92  12.89  12.79  241926.88          0.02      0.15</span><br><span class="line">2017-09-19  12.93  12.95  12.90  12.82  301701.25         -0.01     -0.08</span><br><span class="line">2017-09-18  12.82  12.96  12.91  12.80  357475.28          0.08      0.62</span><br><span class="line">2017-09-25  12.89  12.95  12.94  12.71  506876.28          0.05      0.39</span><br><span class="line">2017-09-06  12.99  13.05  12.96  12.90  338235.75         -0.07     -0.54</span><br><span class="line">2017-09-11  13.15  13.15  12.99  12.95  522347.34         -0.04     -0.31</span><br><span class="line">2017-09-08  12.85  13.12  13.03  12.83  647780.88          0.18      1.40</span><br><span class="line">2017-09-05  12.78  13.09  13.03  12.78  734930.25          0.25      1.96</span><br><span class="line">2017-09-12  13.00  13.04  13.04  12.91  510123.22          0.05      0.39</span><br><span class="line"></span><br><span class="line">               ma5    ma10    ma20      v_ma5     v_ma10     v_ma20  turnover</span><br><span class="line">date</span><br><span class="line">2017-09-01  12.840  12.696  12.684  617423.11  705967.22  570712.06      0.14</span><br><span class="line">2017-09-04  12.818  12.723  12.676  480531.67  707824.43  573781.57      0.13</span><br><span class="line">2017-09-15  12.916  12.923  12.810  368510.19  430242.01  568104.62      0.09</span><br><span class="line">2017-09-28  12.876  12.877  12.897  295086.63  278342.70  361487.26      0.09</span><br><span class="line">2017-09-14  12.956  12.917  12.794  448317.74  444631.83  573655.78      0.09</span><br><span class="line">2017-09-07  12.878  12.860  12.697  440945.92  635511.05  596587.18      0.14</span><br><span class="line">2017-09-27  12.882  12.878  12.891  287117.30  278378.59  371819.95      0.09</span><br><span class="line">2017-09-26  12.888  12.880  12.892  274102.09  283976.74  388872.57      0.08</span><br><span class="line">2017-09-21  12.878  12.917  12.889  261598.76  354958.25  495234.65      0.07</span><br><span class="line">2017-09-13  12.956  12.903  12.778  476445.64  465261.31  581120.94      0.11</span><br><span class="line">2017-09-29  12.872  12.881  12.902  286345.78  273290.65  351766.33      0.07</span><br><span class="line">2017-09-20  12.874  12.915  12.869  269639.89  373042.77  516241.10      0.07</span><br><span class="line">2017-09-22  12.890  12.903  12.894  260235.52  314372.85  434535.66      0.09</span><br><span class="line">2017-09-19  12.872  12.923  12.853  293851.39  386999.19  554743.32      0.11</span><br><span class="line">2017-09-18  12.900  12.936  12.830  335535.78  430322.09  569073.26      0.13</span><br><span class="line">2017-09-25  12.896  12.898  12.897  290115.72  312825.75  407822.89      0.18</span><br><span class="line">2017-09-06  12.850  12.822  12.694  454076.98  659439.44  599502.81      0.12</span><br><span class="line">2017-09-11  12.972  12.895  12.736  525108.41  502820.04  587867.55      0.19</span><br><span class="line">2017-09-08  12.930  12.885  12.715  491973.83  554698.47  584531.19      0.23</span><br><span class="line">2017-09-05  12.832  12.783  12.684  507389.81  722487.45  598742.93      0.26</span><br><span class="line">2017-09-12  12.974  12.903  12.759  480147.00  493768.40  582077.75      0.18</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; hist_df.sort_values(by=[&apos;close&apos;, &apos;open&apos;])</span><br><span class="line">             open   high  close    low     volume  price_change  p_change  \</span><br><span class="line">date</span><br><span class="line">2017-09-01  12.68  12.87  12.77  12.68  392641.31          0.06      0.47</span><br><span class="line">2017-09-04  12.78  12.84  12.78  12.65  356674.47          0.01      0.08</span><br><span class="line">2017-09-15  12.82  12.86  12.83  12.75  248743.12         -0.02     -0.16</span><br><span class="line">2017-09-28  12.85  12.88  12.84  12.77  241249.34         -0.01     -0.08</span><br><span class="line">2017-09-27  12.83  12.91  12.85  12.76  263747.53         -0.01     -0.08</span><br><span class="line">2017-09-14  12.88  12.98  12.85  12.81  241608.31         -0.02     -0.15</span><br><span class="line">2017-09-07  12.94  13.02  12.85  12.82  382247.81         -0.11     -0.85</span><br><span class="line">2017-09-26  12.89  12.93  12.86  12.85  221633.11         -0.08     -0.62</span><br><span class="line">2017-09-29  12.82  12.91  12.87  12.81  198222.62          0.03      0.23</span><br><span class="line">2017-09-21  12.86  12.95  12.87  12.83  201402.69         -0.01     -0.08</span><br><span class="line">2017-09-13  13.01  13.01  12.87  12.86  319728.97         -0.17     -1.30</span><br><span class="line">2017-09-20  12.88  12.93  12.88  12.83  198671.48         -0.02     -0.15</span><br><span class="line">2017-09-22  12.84  12.92  12.89  12.79  241926.88          0.02      0.15</span><br><span class="line">2017-09-19  12.93  12.95  12.90  12.82  301701.25         -0.01     -0.08</span><br><span class="line">2017-09-18  12.82  12.96  12.91  12.80  357475.28          0.08      0.62</span><br><span class="line">2017-09-25  12.89  12.95  12.94  12.71  506876.28          0.05      0.39</span><br><span class="line">2017-09-06  12.99  13.05  12.96  12.90  338235.75         -0.07     -0.54</span><br><span class="line">2017-09-11  13.15  13.15  12.99  12.95  522347.34         -0.04     -0.31</span><br><span class="line">2017-09-05  12.78  13.09  13.03  12.78  734930.25          0.25      1.96</span><br><span class="line">2017-09-08  12.85  13.12  13.03  12.83  647780.88          0.18      1.40</span><br><span class="line">2017-09-12  13.00  13.04  13.04  12.91  510123.22          0.05      0.39</span><br><span class="line"></span><br><span class="line">               ma5    ma10    ma20      v_ma5     v_ma10     v_ma20  turnover</span><br><span class="line">date</span><br><span class="line">2017-09-01  12.840  12.696  12.684  617423.11  705967.22  570712.06      0.14</span><br><span class="line">2017-09-04  12.818  12.723  12.676  480531.67  707824.43  573781.57      0.13</span><br><span class="line">2017-09-15  12.916  12.923  12.810  368510.19  430242.01  568104.62      0.09</span><br><span class="line">2017-09-28  12.876  12.877  12.897  295086.63  278342.70  361487.26      0.09</span><br><span class="line">2017-09-27  12.882  12.878  12.891  287117.30  278378.59  371819.95      0.09</span><br><span class="line">2017-09-14  12.956  12.917  12.794  448317.74  444631.83  573655.78      0.09</span><br><span class="line">2017-09-07  12.878  12.860  12.697  440945.92  635511.05  596587.18      0.14</span><br><span class="line">2017-09-26  12.888  12.880  12.892  274102.09  283976.74  388872.57      0.08</span><br><span class="line">2017-09-29  12.872  12.881  12.902  286345.78  273290.65  351766.33      0.07</span><br><span class="line">2017-09-21  12.878  12.917  12.889  261598.76  354958.25  495234.65      0.07</span><br><span class="line">2017-09-13  12.956  12.903  12.778  476445.64  465261.31  581120.94      0.11</span><br><span class="line">2017-09-20  12.874  12.915  12.869  269639.89  373042.77  516241.10      0.07</span><br><span class="line">2017-09-22  12.890  12.903  12.894  260235.52  314372.85  434535.66      0.09</span><br><span class="line">2017-09-19  12.872  12.923  12.853  293851.39  386999.19  554743.32      0.11</span><br><span class="line">2017-09-18  12.900  12.936  12.830  335535.78  430322.09  569073.26      0.13</span><br><span class="line">2017-09-25  12.896  12.898  12.897  290115.72  312825.75  407822.89      0.18</span><br><span class="line">2017-09-06  12.850  12.822  12.694  454076.98  659439.44  599502.81      0.12</span><br><span class="line">2017-09-11  12.972  12.895  12.736  525108.41  502820.04  587867.55      0.19</span><br><span class="line">2017-09-05  12.832  12.783  12.684  507389.81  722487.45  598742.93      0.26</span><br><span class="line">2017-09-08  12.930  12.885  12.715  491973.83  554698.47  584531.19      0.23</span><br><span class="line">2017-09-12  12.974  12.903  12.759  480147.00  493768.40  582077.75      0.18</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; hist_df.sort_values(by=[&apos;close&apos;, &apos;open&apos;], ascending=False)</span><br><span class="line">             open   high  close    low     volume  price_change  p_change  \</span><br><span class="line">date</span><br><span class="line">2017-09-12  13.00  13.04  13.04  12.91  510123.22          0.05      0.39</span><br><span class="line">2017-09-08  12.85  13.12  13.03  12.83  647780.88          0.18      1.40</span><br><span class="line">2017-09-05  12.78  13.09  13.03  12.78  734930.25          0.25      1.96</span><br><span class="line">2017-09-11  13.15  13.15  12.99  12.95  522347.34         -0.04     -0.31</span><br><span class="line">2017-09-06  12.99  13.05  12.96  12.90  338235.75         -0.07     -0.54</span><br><span class="line">2017-09-25  12.89  12.95  12.94  12.71  506876.28          0.05      0.39</span><br><span class="line">2017-09-18  12.82  12.96  12.91  12.80  357475.28          0.08      0.62</span><br><span class="line">2017-09-19  12.93  12.95  12.90  12.82  301701.25         -0.01     -0.08</span><br><span class="line">2017-09-22  12.84  12.92  12.89  12.79  241926.88          0.02      0.15</span><br><span class="line">2017-09-20  12.88  12.93  12.88  12.83  198671.48         -0.02     -0.15</span><br><span class="line">2017-09-13  13.01  13.01  12.87  12.86  319728.97         -0.17     -1.30</span><br><span class="line">2017-09-21  12.86  12.95  12.87  12.83  201402.69         -0.01     -0.08</span><br><span class="line">2017-09-29  12.82  12.91  12.87  12.81  198222.62          0.03      0.23</span><br><span class="line">2017-09-26  12.89  12.93  12.86  12.85  221633.11         -0.08     -0.62</span><br><span class="line">2017-09-07  12.94  13.02  12.85  12.82  382247.81         -0.11     -0.85</span><br><span class="line">2017-09-14  12.88  12.98  12.85  12.81  241608.31         -0.02     -0.15</span><br><span class="line">2017-09-27  12.83  12.91  12.85  12.76  263747.53         -0.01     -0.08</span><br><span class="line">2017-09-28  12.85  12.88  12.84  12.77  241249.34         -0.01     -0.08</span><br><span class="line">2017-09-15  12.82  12.86  12.83  12.75  248743.12         -0.02     -0.16</span><br><span class="line">2017-09-04  12.78  12.84  12.78  12.65  356674.47          0.01      0.08</span><br><span class="line">2017-09-01  12.68  12.87  12.77  12.68  392641.31          0.06      0.47</span><br><span class="line"></span><br><span class="line">               ma5    ma10    ma20      v_ma5     v_ma10     v_ma20  turnover</span><br><span class="line">date</span><br><span class="line">2017-09-12  12.974  12.903  12.759  480147.00  493768.40  582077.75      0.18</span><br><span class="line">2017-09-08  12.930  12.885  12.715  491973.83  554698.47  584531.19      0.23</span><br><span class="line">2017-09-05  12.832  12.783  12.684  507389.81  722487.45  598742.93      0.26</span><br><span class="line">2017-09-11  12.972  12.895  12.736  525108.41  502820.04  587867.55      0.19</span><br><span class="line">2017-09-06  12.850  12.822  12.694  454076.98  659439.44  599502.81      0.12</span><br><span class="line">2017-09-25  12.896  12.898  12.897  290115.72  312825.75  407822.89      0.18</span><br><span class="line">2017-09-18  12.900  12.936  12.830  335535.78  430322.09  569073.26      0.13</span><br><span class="line">2017-09-19  12.872  12.923  12.853  293851.39  386999.19  554743.32      0.11</span><br><span class="line">2017-09-22  12.890  12.903  12.894  260235.52  314372.85  434535.66      0.09</span><br><span class="line">2017-09-20  12.874  12.915  12.869  269639.89  373042.77  516241.10      0.07</span><br><span class="line">2017-09-13  12.956  12.903  12.778  476445.64  465261.31  581120.94      0.11</span><br><span class="line">2017-09-21  12.878  12.917  12.889  261598.76  354958.25  495234.65      0.07</span><br><span class="line">2017-09-29  12.872  12.881  12.902  286345.78  273290.65  351766.33      0.07</span><br><span class="line">2017-09-26  12.888  12.880  12.892  274102.09  283976.74  388872.57      0.08</span><br><span class="line">2017-09-07  12.878  12.860  12.697  440945.92  635511.05  596587.18      0.14</span><br><span class="line">2017-09-14  12.956  12.917  12.794  448317.74  444631.83  573655.78      0.09</span><br><span class="line">2017-09-27  12.882  12.878  12.891  287117.30  278378.59  371819.95      0.09</span><br><span class="line">2017-09-28  12.876  12.877  12.897  295086.63  278342.70  361487.26      0.09</span><br><span class="line">2017-09-15  12.916  12.923  12.810  368510.19  430242.01  568104.62      0.09</span><br><span class="line">2017-09-04  12.818  12.723  12.676  480531.67  707824.43  573781.57      0.13</span><br><span class="line">2017-09-01  12.840  12.696  12.684  617423.11  705967.22  570712.06      0.14</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>
<h5 id="pandas生成图表"><a href="#pandas生成图表" class="headerlink" title="pandas生成图表"></a>pandas生成图表</h5><p><a href="https://amaozhao.gitbooks.io/pandas-notebook/content/pandas%E4%B8%AD%E7%9A%84%E7%BB%98%E5%9B%BE%E5%87%BD%E6%95%B0.html" target="_blank" rel="noopener">https://amaozhao.gitbooks.io/pandas-notebook/content/pandas%E4%B8%AD%E7%9A%84%E7%BB%98%E5%9B%BE%E5%87%BD%E6%95%B0.html</a><br><a href="http://cloga.info/python/2014/02/23/plotting_with_pandas" target="_blank" rel="noopener">http://cloga.info/python/2014/02/23/plotting_with_pandas</a><br><a href="http://blog.csdn.net/u013524655/article/details/41291715" target="_blank" rel="noopener">http://blog.csdn.net/u013524655/article/details/41291715</a><br><a href="http://blog.csdn.net/sun_shengyun/article/details/52767037" target="_blank" rel="noopener">http://blog.csdn.net/sun_shengyun/article/details/52767037</a><br><a href="http://freefarm.cc/2016/05/24/PANDAS%E5%B8%B8%E7%94%A8%E6%89%8B%E5%86%8C-VIII-%E7%BB%98%E5%9B%BE%E5%92%8C%E5%8F%AF%E8%A7%86%E5%8C%96/" target="_blank" rel="noopener">http://freefarm.cc/2016/05/24/PANDAS%E5%B8%B8%E7%94%A8%E6%89%8B%E5%86%8C-VIII-%E7%BB%98%E5%9B%BE%E5%92%8C%E5%8F%AF%E8%A7%86%E5%8C%96/</a><br><a href="https://www.jelekinn.com/pandas-dataframe-plot.html" target="_blank" rel="noopener">https://www.jelekinn.com/pandas-dataframe-plot.html</a><br><a href="http://www.chenhf.com/data/pandas-done-right" target="_blank" rel="noopener">http://www.chenhf.com/data/pandas-done-right</a><br><a href="http://www.cnblogs.com/splended/p/5229699.html" target="_blank" rel="noopener">http://www.cnblogs.com/splended/p/5229699.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; import tushare as ts</span><br><span class="line">&gt;&gt;&gt; import matplotlib.pyplot as plt</span><br><span class="line">&gt;&gt;&gt; import pandas</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; hist_df = ts.get_hist_data(&apos;600000&apos;, start=&apos;2017-09-01&apos;, ktype=&apos;D&apos;)</span><br><span class="line">&gt;&gt;&gt; new_hist_df = hist_df.sort_index(ascending=True)</span><br><span class="line">&gt;&gt;&gt; plot.show(new_hist_df[list(new_hist_df.columns[0:4])].plot())</span><br></pre></td></tr></table></figure></p>
<p><img src="/upload_image/pandas-usage/plot.png" alt="plot.png"></p>
<h5 id="pandas坑"><a href="#pandas坑" class="headerlink" title="pandas坑"></a>pandas坑</h5><p><a href="https://tracholar.github.io/wiki/python/pandas.html" target="_blank" rel="noopener">https://tracholar.github.io/wiki/python/pandas.html</a><br><a href="https://www.zybuluo.com/ds17/note/806790" target="_blank" rel="noopener">https://www.zybuluo.com/ds17/note/806790</a></p>
<h5 id="pandas汇总统计"><a href="#pandas汇总统计" class="headerlink" title="pandas汇总统计"></a>pandas汇总统计</h5><p><a href="https://blog.csdn.net/pipisorry/article/details/25625799" target="_blank" rel="noopener">https://blog.csdn.net/pipisorry/article/details/25625799</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">描述和汇总统计</span><br><span class="line"></span><br><span class="line">方法                                     说明</span><br><span class="line">count                      非NA值的数量</span><br><span class="line">describe                  针对Series或各DataFrame列计算汇总统计</span><br><span class="line">min,max                 计算最小值和最大值</span><br><span class="line">argmin,argmax        计算能够获取到最小值和最大值的索引位置（整数)</span><br><span class="line">idxmin,idxmax         计算能够获取到最小值和最大值的索引值</span><br><span class="line">quantile                   计算样本的分位数（0到 1）</span><br><span class="line">sum                        值的总和</span><br><span class="line">mean                      值的平均数， a.mean() 默认对每一列的数据求平均值；若加上参数a.mean(1)则对每一行求平均值</span><br><span class="line">media                      值的算术中位数（50%分位数)</span><br><span class="line">mad                         根据平均值计算平均绝对离差</span><br><span class="line">var                          样本值的方差</span><br><span class="line">std                        样本值的标准差</span><br><span class="line">skew                     样本值的偏度（三阶矩）</span><br><span class="line">kurt                       样本值的峰度（四阶矩）</span><br><span class="line">cumsum                 样本值的累计和</span><br><span class="line">cummin,cummax    样本值的累计最大值和累计最小</span><br><span class="line">cumprod                样本值的累计积</span><br><span class="line">diff                        计算一阶差分（对时间序列很有用)</span><br><span class="line">pct_change            计算百分数变化</span><br><span class="line">--------------------- </span><br><span class="line">作者：-柚子皮- </span><br><span class="line">来源：CSDN </span><br><span class="line">原文：https://blog.csdn.net/pipisorry/article/details/25625799 </span><br><span class="line">版权声明：本文为博主原创文章，转载请附上博文链接！</span><br></pre></td></tr></table></figure></p>
<h5 id="Pandas速查手册中文版"><a href="#Pandas速查手册中文版" class="headerlink" title="Pandas速查手册中文版"></a>Pandas速查手册中文版</h5><p><a href="https://zhuanlan.zhihu.com/p/25630700" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/25630700</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line">本文翻译自文章：Pandas Cheat Sheet - Python for Data Science，同时添加了部分注解。</span><br><span class="line"></span><br><span class="line">对于数据科学家，无论是数据分析还是数据挖掘来说，Pandas是一个非常重要的Python包。它不仅提供了很多方法，使得数据处理非常简单，同时在数据处理速度上也做了很多优化，使得和Python内置方法相比时有了很大的优势。</span><br><span class="line"></span><br><span class="line">如果你想学习Pandas，建议先看两个网站。</span><br><span class="line"></span><br><span class="line">（1）官网：Python Data Analysis Library</span><br><span class="line"></span><br><span class="line">（2）十分钟入门Pandas：10 Minutes to pandas</span><br><span class="line"></span><br><span class="line">在第一次学习Pandas的过程中，你会发现你需要记忆很多的函数和方法。所以在这里我们汇总一下Pandas官方文档中比较常用的函数和方法，以方便大家记忆。同时，我们提供一个PDF版本，方便大家打印。pandas-cheat-sheet.pdf</span><br><span class="line">关键缩写和包导入</span><br><span class="line"></span><br><span class="line">在这个速查手册中，我们使用如下缩写：</span><br><span class="line"></span><br><span class="line">    df：任意的Pandas DataFrame对象</span><br><span class="line">    s：任意的Pandas Series对象</span><br><span class="line"></span><br><span class="line">同时我们需要做如下的引入：</span><br><span class="line"></span><br><span class="line">    import pandas as pd</span><br><span class="line">    import numpy as np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">导入数据</span><br><span class="line"></span><br><span class="line">    pd.read_csv(filename)：从CSV文件导入数据</span><br><span class="line">    pd.read_table(filename)：从限定分隔符的文本文件导入数据</span><br><span class="line">    pd.read_excel(filename)：从Excel文件导入数据</span><br><span class="line">    pd.read_sql(query, connection_object)：从SQL表/库导入数据</span><br><span class="line">    pd.read_json(json_string)：从JSON格式的字符串导入数据</span><br><span class="line">    pd.read_html(url)：解析URL、字符串或者HTML文件，抽取其中的tables表格</span><br><span class="line">    pd.read_clipboard()：从你的粘贴板获取内容，并传给read_table()</span><br><span class="line">    pd.DataFrame(dict)：从字典对象导入数据，Key是列名，Value是数据</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">导出数据</span><br><span class="line"></span><br><span class="line">    df.to_csv(filename)：导出数据到CSV文件</span><br><span class="line">    df.to_excel(filename)：导出数据到Excel文件</span><br><span class="line">    df.to_sql(table_name, connection_object)：导出数据到SQL表</span><br><span class="line">    df.to_json(filename)：以Json格式导出数据到文本文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">创建测试对象</span><br><span class="line"></span><br><span class="line">    pd.DataFrame(np.random.rand(20,5))：创建20行5列的随机数组成的DataFrame对象</span><br><span class="line">    pd.Series(my_list)：从可迭代对象my_list创建一个Series对象</span><br><span class="line">    df.index = pd.date_range(&apos;1900/1/30&apos;, periods=df.shape[0])：增加一个日期索引</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看、检查数据</span><br><span class="line"></span><br><span class="line">    df.head(n)：查看DataFrame对象的前n行</span><br><span class="line">    df.tail(n)：查看DataFrame对象的最后n行</span><br><span class="line">    df.shape()：查看行数和列数</span><br><span class="line">    http://df.info()：查看索引、数据类型和内存信息</span><br><span class="line">    df.describe()：查看数值型列的汇总统计</span><br><span class="line">    s.value_counts(dropna=False)：查看Series对象的唯一值和计数</span><br><span class="line">    df.apply(pd.Series.value_counts)：查看DataFrame对象中每一列的唯一值和计数</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">数据选取</span><br><span class="line"></span><br><span class="line">    df[col]：根据列名，并以Series的形式返回列</span><br><span class="line">    df[[col1, col2]]：以DataFrame形式返回多列</span><br><span class="line">    s.iloc[0]：按位置选取数据</span><br><span class="line">    s.loc[&apos;index_one&apos;]：按索引选取数据</span><br><span class="line">    df.iloc[0,:]：返回第一行</span><br><span class="line">    df.iloc[0,0]：返回第一列的第一个元素</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">数据清理</span><br><span class="line"></span><br><span class="line">    df.columns = [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;]：重命名列名</span><br><span class="line">    pd.isnull()：检查DataFrame对象中的空值，并返回一个Boolean数组</span><br><span class="line">    pd.isna()：检查DataFrame对象中的空值，并返回一个Boolean数组</span><br><span class="line">    pd.notnull()：检查DataFrame对象中的非空值，并返回一个Boolean数组</span><br><span class="line">    df.dropna()：删除所有包含空值的行</span><br><span class="line">    df.dropna(axis=1)：删除所有包含空值的列</span><br><span class="line">    df.dropna(axis=1,thresh=n)：删除所有小于n个非空值的行</span><br><span class="line">    df.fillna(x)：用x替换DataFrame对象中所有的空值</span><br><span class="line">    s.astype(float)：将Series中的数据类型更改为float类型</span><br><span class="line">    s.replace(1,&apos;one&apos;)：用‘one’代替所有等于1的值</span><br><span class="line">    s.replace([1,3],[&apos;one&apos;,&apos;three&apos;])：用&apos;one&apos;代替1，用&apos;three&apos;代替3</span><br><span class="line">    df.rename(columns=lambda x: x + 1)：批量更改列名</span><br><span class="line">    df.rename(columns=&#123;&apos;old_name&apos;: &apos;new_ name&apos;&#125;)：选择性更改列名</span><br><span class="line">    df.set_index(&apos;column_one&apos;)：更改索引列</span><br><span class="line">    df.rename(index=lambda x: x + 1)：批量重命名索引</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">数据处理：Filter、Sort和GroupBy</span><br><span class="line"></span><br><span class="line">    df[df[col] &gt; 0.5]：选择col列的值大于0.5的行</span><br><span class="line">    df.sort_values(col1)：按照列col1排序数据，默认升序排列</span><br><span class="line">    df.sort_values(col2, ascending=False)：按照列col1降序排列数据</span><br><span class="line">    df.sort_values([col1,col2], ascending=[True,False])：先按列col1升序排列，后按col2降序排列数据</span><br><span class="line">    df.groupby(col)：返回一个按列col进行分组的Groupby对象</span><br><span class="line">    df.groupby([col1,col2])：返回一个按多列进行分组的Groupby对象</span><br><span class="line">    df.groupby(col1)[col2]：返回按列col1进行分组后，列col2的均值</span><br><span class="line">    df.pivot_table(index=col1, values=[col2,col3], aggfunc=max)：创建一个按列col1进行分组，并计算col2和col3的最大值的数据透视表</span><br><span class="line">    df.groupby(col1).agg(np.mean)：返回按列col1分组的所有列的均值</span><br><span class="line">    data.apply(np.mean)：对DataFrame中的每一列应用函数np.mean</span><br><span class="line">    data.apply(np.max,axis=1)：对DataFrame中的每一行应用函数np.max</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">数据合并</span><br><span class="line"></span><br><span class="line">    df1.append(df2)：将df2中的行添加到df1的尾部</span><br><span class="line">    df.concat([df1, df2],axis=1)：将df2中的列添加到df1的尾部</span><br><span class="line">    df1.join(df2,on=col1,how=&apos;inner&apos;)：对df1的列和df2的列执行SQL形式的join</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">数据统计</span><br><span class="line"></span><br><span class="line">    df.describe()：查看数据值列的汇总统计</span><br><span class="line">    df.mean()：返回所有列的均值</span><br><span class="line">    df.corr()：返回列与列之间的相关系数</span><br><span class="line">    df.count()：返回每一列中的非空值的个数</span><br><span class="line">    df.max()：返回每一列的最大值</span><br><span class="line">    df.min()：返回每一列的最小值</span><br><span class="line">    df.median()：返回每一列的中位数</span><br><span class="line">    df.std()：返回每一列的标准差</span><br><span class="line"></span><br><span class="line">=============================================================</span><br><span class="line"></span><br><span class="line">作者主页：笑虎（Python爱好者，关注爬虫、数据分析、数据挖掘、数据可视化等）</span><br><span class="line"></span><br><span class="line">作者专栏主页：撸代码，学知识 - 知乎专栏</span><br><span class="line"></span><br><span class="line">作者GitHub主页：撸代码，学知识 - GitHub</span><br></pre></td></tr></table></figure></p>
<p></p>
</ol>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Python/" rel="tag"># Python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/11/mysql-usage/" rel="next" title="mysql使用问题记录">
                <i class="fa fa-chevron-left"></i> mysql使用问题记录
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/11/pycharm-usage/" rel="prev" title="pycharm使用问题记录">
                pycharm使用问题记录 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Hogan Chen</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#Pandas-reference-links"><span class="nav-number">1.</span> <span class="nav-text">Pandas reference links</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DataFrame获取列名"><span class="nav-number">2.</span> <span class="nav-text">DataFrame获取列名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DataFrame列作为list返回"><span class="nav-number">3.</span> <span class="nav-text">DataFrame列作为list返回</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#获取DataFrame中的某个值"><span class="nav-number">4.</span> <span class="nav-text">获取DataFrame中的某个值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设置DataFrame中的某个值"><span class="nav-number">5.</span> <span class="nav-text">设置DataFrame中的某个值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#列交换位置"><span class="nav-number">6.</span> <span class="nav-text">列交换位置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#取前两列"><span class="nav-number">7.</span> <span class="nav-text">取前两列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#插入一列"><span class="nav-number">8.</span> <span class="nav-text">插入一列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#插入一行"><span class="nav-number">9.</span> <span class="nav-text">插入一行</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#获取dateFrame的索引值"><span class="nav-number">10.</span> <span class="nav-text">获取dateFrame的索引值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#获取某一列或几列的所有值"><span class="nav-number">11.</span> <span class="nav-text">获取某一列或几列的所有值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#复制DataFrame"><span class="nav-number">12.</span> <span class="nav-text">复制DataFrame</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#复制DataFrame的结构"><span class="nav-number">13.</span> <span class="nav-text">复制DataFrame的结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#创建DataFrame"><span class="nav-number">14.</span> <span class="nav-text">创建DataFrame</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#空的DataFrame中插入数据"><span class="nav-number">15.</span> <span class="nav-text">空的DataFrame中插入数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DataFrame数据过滤"><span class="nav-number">16.</span> <span class="nav-text">DataFrame数据过滤</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#求每列最大值，最小值，和，平均值"><span class="nav-number">17.</span> <span class="nav-text">求每列最大值，最小值，和，平均值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#空值填充"><span class="nav-number">18.</span> <span class="nav-text">空值填充</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#获取某一行的值"><span class="nav-number">19.</span> <span class="nav-text">获取某一行的值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Pandas中loc-iloc-ix-iat区别"><span class="nav-number">20.</span> <span class="nav-text">Pandas中loc ,iloc,ix,iat区别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DataFrame排序"><span class="nav-number">21.</span> <span class="nav-text">DataFrame排序</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Merge操作"><span class="nav-number">22.</span> <span class="nav-text">Merge操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Series与DataFrame的区别"><span class="nav-number">23.</span> <span class="nav-text">Series与DataFrame的区别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DataFrame一行数据的访问"><span class="nav-number">24.</span> <span class="nav-text">DataFrame一行数据的访问</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pandas按index排序"><span class="nav-number">25.</span> <span class="nav-text">pandas按index排序</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pandas按照某列值排序"><span class="nav-number">26.</span> <span class="nav-text">pandas按照某列值排序</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pandas生成图表"><span class="nav-number">27.</span> <span class="nav-text">pandas生成图表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pandas坑"><span class="nav-number">28.</span> <span class="nav-text">pandas坑</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pandas汇总统计"><span class="nav-number">29.</span> <span class="nav-text">pandas汇总统计</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Pandas速查手册中文版"><span class="nav-number">30.</span> <span class="nav-text">Pandas速查手册中文版</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Hogan Chen</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
